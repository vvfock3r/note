<template><div><h2 id="æ–‡æ¡£" tabindex="-1"><a class="header-anchor" href="#æ–‡æ¡£" aria-hidden="true">#</a> æ–‡æ¡£</h2>
<p>å®˜ç½‘ï¼š<a href="https://golang.google.cn/" target="_blank" rel="noopener noreferrer">https://golang.google.cn/<ExternalLinkIcon/></a></p>
<p>å®‰è£…æ–‡æ¡£ï¼š<a href="https://golang.google.cn/doc/install" target="_blank" rel="noopener noreferrer">https://golang.google.cn/doc/install<ExternalLinkIcon/></a></p>
<p>Goå‘½ä»¤æ–‡æ¡£ï¼š<a href="https://golang.google.cn/cmd/go/" target="_blank" rel="noopener noreferrer">https://golang.google.cn/cmd/go/<ExternalLinkIcon/></a></p>
<h2 id="é¡¹ç›®ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#é¡¹ç›®ç®¡ç†" aria-hidden="true">#</a> é¡¹ç›®ç®¡ç†</h2>
<h3 id="ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> ç¯å¢ƒå˜é‡</h3>
<p><strong>æŸ¥çœ‹/è®¾ç½®ç¯å¢ƒå˜é‡</strong></p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>go <span class="token function">env</span> 						<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡</span>
go <span class="token function">env</span> -json				<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼Œjsonæ ¼å¼</span>
go <span class="token function">env</span> <span class="token punctuation">[</span>environment<span class="token punctuation">]</span>		<span class="token comment"># æŸ¥çœ‹æŸä¸ªå…·ä½“çš„ç¯å¢ƒå˜é‡</span>
go <span class="token function">env</span> -w <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on	<span class="token comment"># è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ°¸ä¹…ç”Ÿæ•ˆ</span>
go <span class="token builtin class-name">help</span> <span class="token function">env</span>					<span class="token comment"># æŸ¥çœ‹envå‘½ä»¤å¸®åŠ©</span>
</code></pre></div><p><strong>é‡è¦ç¯å¢ƒå˜é‡</strong></p>
<table>
<thead>
<tr>
<th>ç¯å¢ƒå˜é‡</th>
<th>è¯´æ˜</th>
<th>è®¾ç½®å‘½ä»¤</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>GOROOT</code></td>
<td>Goçš„å®‰è£…ç›®å½•</td>
<td>ä¸€èˆ¬ä¸ç”¨è‡ªå·±è®¾ç½®</td>
</tr>
<tr>
<td><code v-pre>GOPATH</code></td>
<td>ä»£è¡¨Goçš„å·¥ä½œåŒºï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªç›®å½•ï¼Œä½¿ç”¨é€—å·åˆ†éš”?<br />å®˜æ–¹è¯´æ˜æ–‡æ¡£ï¼šhttps://github.com/golang/go/wiki/GOPATH</td>
<td><code v-pre>go env -w GOPATH=/usr/local/gopath</code></td>
</tr>
<tr>
<td><code v-pre>GO111MODULE</code></td>
<td>Go 1.11ç‰ˆæœ¬å¢åŠ çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå¼ºçƒˆå»ºè®®å¼€å¯</td>
<td><code v-pre>go env -w GO111MODULE=on</code></td>
</tr>
<tr>
<td><code v-pre>GOPROXY</code></td>
<td>ä»£ç†åœ°å€ï¼Œç”±äºå¢™çš„å› ç´ å»ºè®®ä¿®æ”¹<br />é»˜è®¤å€¼ï¼šhttps://proxy.golang.org,direct<br />ä¸ƒç‰›äº‘ï¼šhttps://goproxy.cn,direct</td>
<td><code v-pre>go env -w GOPROXY=https://goproxy.cn,direct</code></td>
</tr>
<tr>
<td><code v-pre>GOSUMDB</code></td>
<td>ç”¨æ¥æ ¡éªŒä¸‹è½½çš„åŒ…çš„å®‰å…¨æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹<br />é»˜è®¤å€¼ï¼š<code v-pre>sum.golang.org</code><br />å…³é—­ï¼š<code v-pre>off</code></td>
<td><code v-pre>go env -w GOSUMDB=off</code></td>
</tr>
</tbody>
</table>
<p>æ›´å¤šç¯å¢ƒå˜é‡ï¼šhttps://golang.google.cn/cmd/go/#hdr-Environment_variables æˆ–<code v-pre>go help environment</code></p>
<h3 id="å•æ–‡ä»¶åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å•æ–‡ä»¶åº”ç”¨" aria-hidden="true">#</a> å•æ–‡ä»¶åº”ç”¨</h3>
<p><code v-pre>main.go</code></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
 
<span class="token keyword">import</span> <span class="token string">"fmt"</span>
 
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code v-pre>package</code>å£°æ˜æˆ‘è‡ªå·±çš„åŒ…å</p>
</li>
<li>
<p><code v-pre>import</code> å¯¼å…¥å…¶ä»–åŒ…ï¼Œè¿™é‡Œ<code v-pre>fmt</code>æ˜¯å†…ç½®çš„ä¸€ä¸ªåŒ…</p>
</li>
<li>
<p><code v-pre>func </code>å£°æ˜å‡½æ•°</p>
</li>
<li>
<p>ç¨‹åºæ‰§è¡Œçš„å…¥å£å¿…é¡»æ˜¯<code v-pre>main</code>åŒ…å’Œ<code v-pre>main</code>æ–¹æ³•ï¼Œæ–‡ä»¶åä»»æ„</p>
</li>
<li>
<p>ä¸¤ç§è¿è¡Œæ–¹å¼</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># (1) ç¼–è¯‘å’Œè¿è¡Œ</span>
go build main.go        <span class="token comment"># ç¼–è¯‘</span>
./main.exe              <span class="token comment"># è¿è¡Œ</span>

<span class="token comment"># (2) ç¼–è¯‘å¹¶è¿è¡Œ</span>
go run main.go
</code></pre></div></li>
</ul>
<p>é—®é¢˜ï¼šæˆ‘è¦å¯¼å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚ä½¿ç”¨ginæ¥å¯åŠ¨ä¸€ä¸ªHTTP Serverï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ</p>
<p><code v-pre>main.go</code></p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat main.go </span>
package main

<span class="token function">import</span> <span class="token punctuation">(</span>
        <span class="token string">"github.com/gin-gonic/gin"</span>
        <span class="token string">"log"</span>
        <span class="token string">"net/http"</span>
<span class="token punctuation">)</span>

func <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        // ç›‘å¬åœ°å€
        addr :<span class="token operator">=</span> <span class="token string">"127.0.0.1:80"</span>

        // å®ä¾‹åŒ–Ginè·¯ç”±å¼•æ“
        r :<span class="token operator">=</span> gin.Default<span class="token punctuation">(</span><span class="token punctuation">)</span>

        // æ³¨å†Œè·¯ç”±
        r.GET<span class="token punctuation">(</span><span class="token string">"/"</span>, func<span class="token punctuation">(</span>c *gin.Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c.String<span class="token punctuation">(</span>http.StatusOK, <span class="token string">"Hello Gin!<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        // å¯åŠ¨Gin Server
        log.Fatalln<span class="token punctuation">(</span>r.Run<span class="token punctuation">(</span>addr<span class="token punctuation">))</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># go run main.go   # åœ¨å½“å‰ç›®å½•åŠçˆ¶ç›®å½•æ²¡æœ‰æ‰¾åˆ°go.modæ–‡ä»¶</span>
main.go:4:2: no required module provides package github.com/gin-gonic/gin: go.mod <span class="token function">file</span> not found <span class="token keyword">in</span> current directory or any parent directory<span class="token punctuation">;</span> see <span class="token string">'go help modules'</span>
</code></pre></div><p>æˆ‘ä»¬å°†åœ¨<code v-pre>Go Modules</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<h3 id="go-modules" tabindex="-1"><a class="header-anchor" href="#go-modules" aria-hidden="true">#</a> Go Modules</h3>
<p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod<ExternalLinkIcon/></a></p>
<p>ä»<code v-pre>Go1.11</code>å¼€å§‹ï¼Œå®˜æ–¹æ¨å‡ºGo moduleä½œä¸ºåŒ…ç®¡ç†å·¥å…·</p>
<h4 id="_1-å¼€å¯go-module" tabindex="-1"><a class="header-anchor" href="#_1-å¼€å¯go-module" aria-hidden="true">#</a> ï¼ˆ1ï¼‰å¼€å¯Go Module</h4>
<p><code v-pre>GO111MODULE</code>å˜é‡æ§åˆ¶æ˜¯å¦å¯ç”¨go modulesï¼Œä»–æœ‰3ä¸ªå€¼ï¼š</p>
<ul>
<li><code v-pre>on</code>ï¼šå¼€å¯go module</li>
<li><code v-pre>off</code>ï¼šå…³é—­go module</li>
<li><code v-pre>auto</code>ï¼šæ ¹æ®é¡¹ç›®é…ç½®è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨<code v-pre>go module</code>è¿˜æ˜¯<code v-pre>go path</code></li>
</ul>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># ä¸ç®¡å¼€å¯æ²¡å¼€å¯ï¼Œéƒ½é‡æ–°å¼€å¯ä¸€é</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Notes<span class="token operator">></span>go <span class="token function">env</span> -w <span class="token assign-left variable">GO111MODULE</span><span class="token operator">=</span>on
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>Notes<span class="token operator">></span>go <span class="token function">env</span> GO111MODULE
on
</code></pre></div><h4 id="_2-åˆå§‹åŒ–é¡¹ç›®-go-mod-init" tabindex="-1"><a class="header-anchor" href="#_2-åˆå§‹åŒ–é¡¹ç›®-go-mod-init" aria-hidden="true">#</a> ï¼ˆ2ï¼‰åˆå§‹åŒ–é¡¹ç›®ï¼š<code v-pre>go mod init</code></h4>
<p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-mod-init" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-mod-init<ExternalLinkIcon/></a></p>
<p><strong>åŸºç¡€ä½¿ç”¨</strong></p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># å…ˆåˆ›å»ºæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•demo</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir demo</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd demo/</span>

<span class="token comment"># ç„¶ååˆå§‹åŒ–é¡¹ç›®</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go mod init demo</span>
go: creating new go.mod: module demo

<span class="token comment"># çœ‹ä¸€ä¸‹éƒ½åšäº†ä»€ä¹ˆäº‹ï¼šç”Ÿæˆäº†ä¸€ä¸ªæ–‡ä»¶go.mod</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">4</span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">21</span> May <span class="token number">30</span> <span class="token number">19</span>:27 go.mod

<span class="token comment"># çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶å†…å®¹</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod </span>
module demo		<span class="token comment"># æ¨¡å—å</span>

go <span class="token number">1.18</span>			<span class="token comment"># goç‰ˆæœ¬</span>
</code></pre></div><p><strong>æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªgoæ˜æ˜Ÿé¡¹ç›®çš„moduleåæ˜¯å¦‚ä½•å†™çš„</strong></p>
<table>
<thead>
<tr>
<th>Githubåœ°å€</th>
<th>Module Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>https://github.com/containerd/containerd</td>
<td><code v-pre>module github.com/containerd/containerd</code></td>
</tr>
<tr>
<td>https://github.com/gin-gonic/gin</td>
<td><code v-pre>module github.com/gin-gonic/gin</code></td>
</tr>
<tr>
<td>https://github.com/pingcap/tidb</td>
<td><code v-pre>module github.com/pingcap/tidb</code></td>
</tr>
</tbody>
</table>
<p>ä»”ç»†ç ”ç©¶å‘ç°ä»–ä»¬çš„æ ¼å¼éƒ½æ˜¯<code v-pre>github.com/ç”¨æˆ·å/é¡¹ç›®å</code>ï¼Œè¿™æ˜¯ä¸ºå•¥ï¼Ÿï¼Œå…ˆä¸ç®¡ä»–ï¼Œåé¢å†è¯´</p>
<p><strong>ç»§ç»­ä½¿ç”¨gin</strong></p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -l</span>
total <span class="token number">8</span>
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">21</span> May <span class="token number">30</span> <span class="token number">19</span>:49 go.mod
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">327</span> May <span class="token number">30</span> <span class="token number">19</span>:17 main.go
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat main.go</span>
package main

<span class="token function">import</span> <span class="token punctuation">(</span>
        <span class="token string">"github.com/gin-gonic/gin"</span>
        <span class="token string">"log"</span>
        <span class="token string">"net/http"</span>
<span class="token punctuation">)</span>

func <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        // ç›‘å¬åœ°å€
        addr :<span class="token operator">=</span> <span class="token string">"127.0.0.1:80"</span>

        // å®ä¾‹åŒ–Ginè·¯ç”±å¼•æ“
        r :<span class="token operator">=</span> gin.Default<span class="token punctuation">(</span><span class="token punctuation">)</span>

        // æ³¨å†Œè·¯ç”±
        r.GET<span class="token punctuation">(</span><span class="token string">"/"</span>, func<span class="token punctuation">(</span>c *gin.Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                c.String<span class="token punctuation">(</span>http.StatusOK, <span class="token string">"Hello Gin!<span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        // å¯åŠ¨Gin Server
        log.Fatalln<span class="token punctuation">(</span>r.Run<span class="token punctuation">(</span>addr<span class="token punctuation">))</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go run main.go		# è¿™æ¬¡æŠ¥é”™ä¸ä¸€æ ·äº†ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨go getä¸‹è½½gin</span>
main.go:4:2: no required module provides package github.com/gin-gonic/gin<span class="token punctuation">;</span> to <span class="token function">add</span> it:
        go get github.com/gin-gonic/gin
</code></pre></div><h4 id="_3-ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…-go-get" tabindex="-1"><a class="header-anchor" href="#_3-ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…-go-get" aria-hidden="true">#</a> ï¼ˆ3ï¼‰ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…ï¼š<code v-pre>go get</code></h4>
<p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-get" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-get<ExternalLinkIcon/></a></p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»åœ¨é¡¹ç›®ç›®å½•(å«æœ‰go.modçš„ç›®å½•)ä½¿ç”¨<code v-pre>go get</code>ï¼Œæ— æ³•åœ¨å…¨å±€ç›®å½•ä½¿ç”¨</li>
<li><code v-pre>go get</code>ç”¨æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åŒ…ç‰ˆæœ¬é—®é¢˜ï¼Œä¼šè‡ªåŠ¨ç»´æŠ¤go.modå’Œgo.sumæ–‡ä»¶</li>
<li><code v-pre>go get</code>ä¸‹è½½çš„åŒ…æ”¾åœ¨GOPATH/pkgç›®å½•å†…</li>
<li>è‹¥ä¸æŒ‡å®šç‰ˆæœ¬å·åªèƒ½æ›´æ–°åˆ°<code v-pre>v1.x.x</code>æœ€æ–°ç‰ˆï¼Œè‹¥ç¬¬ä¸‰æ–¹åŒ…æ²¡æœ‰ç‰ˆæœ¬å·ï¼ˆTagï¼‰åˆ™ä¼šæ›´æ–°åˆ°æœ€åä¸€æ¬¡æäº¤çš„ä»£ç </li>
</ul>
<details class="custom-container details"><summary>åŸºç¡€ç”¨æ³•</summary>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># ä¸‹è½½</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin</span>
go: added github.com/gin-contrib/sse v0.1.0
go: added github.com/gin-gonic/gin v1.8.0
go: added github.com/go-playground/locales v0.14.0
go: added github.com/go-playground/universal-translator v0.18.0
go: added github.com/go-playground/validator/v10 v10.10.0
go: added github.com/goccy/go-json v0.9.7
go: added github.com/json-iterator/go v1.1.12
go: added github.com/leodido/go-urn v1.2.1
go: added github.com/mattn/go-isatty v0.0.14
go: added github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421
go: added github.com/modern-go/reflect2 v1.0.2
go: added github.com/pelletier/go-toml/v2 v2.0.1
go: added github.com/ugorji/go/codec v1.2.7
go: added golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97
go: added golang.org/x/net v0.0.0-20210226172049-e18ecbb05110
go: added golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069
go: added golang.org/x/text v0.3.6
go: added google.golang.org/protobuf v1.28.0
go: added gopkg.in/yaml.v2 v2.4.0

<span class="token comment"># æŸ¥çœ‹go.mod, å°†ginåŠå…¶ä¾èµ–çš„åŒ…éƒ½å†™å…¥åˆ°go.modæ–‡ä»¶ä¸­äº†</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod</span>
module demo

go <span class="token number">1.18</span>

<span class="token comment"># requireé‡Œé¢ä»£è¡¨ä¾èµ–çš„åŒ…</span>
require <span class="token punctuation">(</span>
        github.com/gin-contrib/sse v0.1.0 // indirect
        github.com/gin-gonic/gin v1.8.0 // indirect
        github.com/go-playground/locales v0.14.0 // indirect
        github.com/go-playground/universal-translator v0.18.0 // indirect
        github.com/go-playground/validator/v10 v10.10.0 // indirect
        github.com/goccy/go-json v0.9.7 // indirect
        github.com/json-iterator/go v1.1.12 // indirect
        github.com/leodido/go-urn v1.2.1 // indirect
        github.com/mattn/go-isatty v0.0.14 // indirect
        github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421 // indirect
        github.com/modern-go/reflect2 v1.0.2 // indirect
        github.com/pelletier/go-toml/v2 v2.0.1 // indirect
        github.com/ugorji/go/codec v1.2.7 // indirect
        golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97 // indirect
        golang.org/x/net v0.0.0-20210226172049-e18ecbb05110 // indirect
        golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069 // indirect
        golang.org/x/text v0.3.6 // indirect
        google.golang.org/protobuf v1.28.0 // indirect
        gopkg.in/yaml.v2 v2.4.0 // indirect
<span class="token punctuation">)</span>

<span class="token comment"># æˆ‘ä»¬ä¸‹è½½çš„åŒ…åœ¨GOPATHç›®å½•ä¸‹</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go env GOPATH</span>
/usr/local/gopath
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -l /usr/local/gopath/pkg/mod/</span>
total <span class="token number">20</span>
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 cache
drwxr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 github.com
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 golang.org
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 google.golang.org
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 gopkg.in

<span class="token comment"># è¿˜ä¼šç”Ÿæˆä¸€ä¸ªgo.sumæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶ä¸éœ€è¦æˆ‘ä»¬ç®¡ç†ï¼Œå…ˆä¸åšæ·±å…¥ç ”ç©¶</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ls -lh go.sum </span>
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">9</span>.1K May <span class="token number">30</span> <span class="token number">20</span>:32 go.sum
</code></pre></div></details>
<details class="custom-container details"><summary>å®‰è£…æœ€æ–°ç‰ˆã€å®‰è£…æŒ‡å®šç‰ˆã€ç§»é™¤ç‰ˆæœ¬ã€å‡çº§ä¾èµ–</summary>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œä»¥ä¸‹ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ï¼Œè¿™ä¼šä¸‹è½½æœ€æ–°çš„tagç‰ˆæœ¬</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@latest</span>

<span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@v1.7.0</span>
go: downgraded github.com/gin-gonic/gin v1.8.0 <span class="token operator">=</span><span class="token operator">></span> v1.7.0

<span class="token comment"># å°†åŒ…ä»go.modä¸­ç§»é™¤ï¼ˆæœ¬åœ°å¹¶ä¸ä¼šåˆ é™¤ï¼‰</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get github.com/gin-gonic/gin@none</span>
go: removed github.com/gin-gonic/gin v1.7.0

<span class="token comment"># æŸ¥çœ‹æœ¬åœ°åŒ…</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># ll /usr/local/gopath/pkg/mod/github.com/gin-gonic/</span>
total <span class="token number">8</span>
dr-xr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:32 gin@v1.7.0
dr-xr-xr-x <span class="token number">9</span> root root <span class="token number">4096</span> May <span class="token number">30</span> <span class="token number">20</span>:26 gin@v1.8.0

<span class="token comment"># å‡çº§ä¾èµ–ï¼ˆè¿™ä¼šå‡çº§æ‰€æœ‰ä¾èµ–ï¼‰</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go get -u</span>
go: downloading golang.org/x/net v0.0.0-20220526153639-5463443f8c37
go: downloading github.com/go-playground/validator/v10 v10.11.0
go: downloading github.com/go-playground/validator v9.31.0+incompatible
go: downloading github.com/pelletier/go-toml v1.9.5
go: downloading github.com/ugorji/go v1.2.7
go: downloading golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a
go: downloading golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e
go: downloading golang.org/x/text v0.3.7
go: downloading github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd
go: upgraded github.com/go-playground/validator/v10 v10.10.0 <span class="token operator">=</span><span class="token operator">></span> v10.11.0
go: upgraded github.com/modern-go/concurrent v0.0.0-20180228061459-e0a39a4cb421 <span class="token operator">=</span><span class="token operator">></span> v0.0.0-20180306012644-bacd9c7ef1dd
go: upgraded golang.org/x/crypto v0.0.0-20210711020723-a769d52b0f97 <span class="token operator">=</span><span class="token operator">></span> v0.0.0-20220525230936-793ad666bf5e
go: upgraded golang.org/x/net v0.0.0-20210226172049-e18ecbb05110 <span class="token operator">=</span><span class="token operator">></span> v0.0.0-20220526153639-5463443f8c37
go: upgraded golang.org/x/sys v0.0.0-20210806184541-e5e7981a1069 <span class="token operator">=</span><span class="token operator">></span> v0.0.0-20220520151302-bc2c85ada10a
go: upgraded golang.org/x/text v0.3.6 <span class="token operator">=</span><span class="token operator">></span> v0.3.7

<span class="token comment"># å‡çº§ä¾èµ–go.modå˜åŒ–</span>
<span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># cat go.mod </span>
module demo

go <span class="token number">1.18</span>

require github.com/gin-gonic/gin v1.8.0		// è¿™ä¸ªåŸæ¥åœ¨ä¸‹é¢ï¼Œå¹¶ä¸”æœ‰// indirectï¼Œç°åœ¨æ²¡æœ‰äº†

require <span class="token punctuation">(</span>
        github.com/gin-contrib/sse v0.1.0 // indirect
        github.com/go-playground/locales v0.14.0 // indirect
        github.com/go-playground/universal-translator v0.18.0 // indirect
        github.com/go-playground/validator/v10 v10.11.0 // indirect
        github.com/goccy/go-json v0.9.7 // indirect
        github.com/golang/protobuf v1.5.2 // indirect
        github.com/json-iterator/go v1.1.12 // indirect
        github.com/leodido/go-urn v1.2.1 // indirect
        github.com/mattn/go-isatty v0.0.14 // indirect
        github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd // indirect
        github.com/modern-go/reflect2 v1.0.2 // indirect
        github.com/pelletier/go-toml/v2 v2.0.1 // indirect
        github.com/ugorji/go/codec v1.2.7 // indirect
        golang.org/x/crypto v0.0.0-20220525230936-793ad666bf5e // indirect
        golang.org/x/net v0.0.0-20220526153639-5463443f8c37 // indirect
        golang.org/x/sys v0.0.0-20220520151302-bc2c85ada10a // indirect
        golang.org/x/text v0.3.7 // indirect
        google.golang.org/protobuf v1.28.0 // indirect
        gopkg.in/yaml.v2 v2.4.0 // indirect
<span class="token punctuation">)</span>
</code></pre></div></details>
<h4 id="_4-å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶-go-install" tabindex="-1"><a class="header-anchor" href="#_4-å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶-go-install" aria-hidden="true">#</a> ï¼ˆ4ï¼‰å®‰è£…å¯æ‰§è¡Œæ–‡ä»¶ï¼š<code v-pre>go install</code></h4>
<p>æ–‡æ¡£ï¼š<a href="https://go.dev/ref/mod#go-install" target="_blank" rel="noopener noreferrer">https://go.dev/ref/mod#go-install<ExternalLinkIcon/></a></p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨å…¨å±€ä½¿ç”¨<code v-pre>go install</code>ï¼Œä¸ä¼šç»´æŠ¤go.modå’Œgo.sumæ–‡ä»¶</li>
<li>ä½¿ç”¨<code v-pre>go install github.com/xxx/@ç‰ˆæœ¬</code>,å¿…é¡»åŠ ä¸Šç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯æœ€æ–°ç‰ˆåˆ™æ˜¯<code v-pre>latest</code></li>
<li>å…¶åŸç†æ˜¯ï¼š
<ul>
<li>ä¸‹è½½ç¬¬ä¸‰æ–¹åŒ…åˆ°<code v-pre>GOPATH/pkg</code></li>
<li>ç„¶åç¼–è¯‘ï¼ˆå…¥å£æ˜¯<code v-pre>main</code>åŒ…çš„<code v-pre>main</code>æ–¹æ³•ï¼‰</li>
<li>å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨<code v-pre>GOPATH/bin</code>ç›®å½•ä¸‹</li>
</ul>
</li>
<li>å¯ä»¥ä½¿ç”¨<code v-pre>go install</code>çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª<code v-pre>main</code>åŒ…å’Œ<code v-pre>main</code>æ–¹æ³•</li>
</ul>
<p>ä¸¾å‡ ä¸ªä¾‹å­</p>
<table>
<thead>
<tr>
<th>Github</th>
<th>main</th>
</tr>
</thead>
<tbody>
<tr>
<td>https://github.com/davecheney/httpstat</td>
<td><code v-pre>main.go</code></td>
</tr>
<tr>
<td>https://github.com/Code-Hex/pget</td>
<td><code v-pre>cmd/pget/main.go</code></td>
</tr>
</tbody>
</table>
<h4 id="_5-ä¾èµ–æ•´ç†-go-mod-tidy" tabindex="-1"><a class="header-anchor" href="#_5-ä¾èµ–æ•´ç†-go-mod-tidy" aria-hidden="true">#</a> ï¼ˆ5ï¼‰ä¾èµ–æ•´ç†ï¼šgo mod tidy</h4>
<p>å¾ˆå¸¸ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œå¯å¤šæ¬¡æ‰§è¡Œ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost demo<span class="token punctuation">]</span><span class="token comment"># go help mod</span>
Go mod provides access to operations on modules.

Note that support <span class="token keyword">for</span> modules is built into all the go commands,
not just <span class="token string">'go mod'</span><span class="token builtin class-name">.</span> For example, day-to-day adding, removing, upgrading,
and downgrading of dependencies should be <span class="token keyword">done</span> using <span class="token string">'go get'</span><span class="token builtin class-name">.</span>
See <span class="token string">'go help modules'</span> <span class="token keyword">for</span> an overview of module functionality.

Usage:

        go mod <span class="token operator">&lt;</span>command<span class="token operator">></span> <span class="token punctuation">[</span>arguments<span class="token punctuation">]</span>

The commands are:

        download    download modules to <span class="token builtin class-name">local</span> cache
        edit        edit go.mod from tools or scripts
        graph       print module requirement graph
        init        initialize new module <span class="token keyword">in</span> current directory
        tidy        <span class="token function">add</span> missing and remove unused modules			<span class="token comment"># æ·»åŠ ç¼ºå°‘çš„åŒ…ï¼Œå¹¶ç§»é™¤æœªä½¿ç”¨çš„åŒ…</span>
        vendor      <span class="token function">make</span> vendored copy of dependencies
        verify      verify dependencies have expected content
        why         explain why packages or modules are needed

Use <span class="token string">"go help mod &lt;command>"</span> <span class="token keyword">for</span> <span class="token function">more</span> information about a command.
</code></pre></div><h4 id="_6-å‘å¸ƒå…¬å…±æ¨¡å—åˆ°githubğŸ‰" tabindex="-1"><a class="header-anchor" href="#_6-å‘å¸ƒå…¬å…±æ¨¡å—åˆ°githubğŸ‰" aria-hidden="true">#</a> ï¼ˆ6ï¼‰å‘å¸ƒå…¬å…±æ¨¡å—åˆ°GitHubğŸ‰</h4>
<details class="custom-container details"><summary>ï¼ˆ1ï¼‰å…ˆè·‘é€šä¸€ä¸ªæœ€ç®€å•çš„å‘å¸ƒæµç¨‹</summary>
<p>â‘  é¦–å…ˆåœ¨Githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“test</p>
<p>â‘¡ å…¶æ¬¡å…‹éš†ä»£ç ï¼Œä½¿ç”¨go modåˆå§‹åŒ–ï¼Œè¦æ±‚module nameå¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼ˆ<code v-pre>github.com/ç”¨æˆ·å/é¡¹ç›®å</code>ï¼‰</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># å…‹éš†</span>
<span class="token function">git</span> clone https://github.com/vvfock3r/test.git

<span class="token comment"># åˆå§‹åŒ–Goæ¨¡å—</span>
go mod init github.com/vvfock3r/test
</code></pre></div><p>â‘¢ æäº¤ä»£ç åˆ°testä»“åº“</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># æ–°å»ºä¸€ä¸ªæ–‡ä»¶utils.go</span>
package <span class="token builtin class-name">test</span>

func Add<span class="token punctuation">(</span>x, y int<span class="token punctuation">)</span> int <span class="token punctuation">{</span>
	<span class="token builtin class-name">return</span> x + y
<span class="token punctuation">}</span>

<span class="token comment"># æäº¤</span>
<span class="token function">git</span> <span class="token function">add</span> *
<span class="token function">git</span> commit -m <span class="token string">"test"</span>
<span class="token function">git</span> push -u origin main
</code></pre></div><p>â‘£ ä½¿ç”¨GoLandæ–°å»ºä¸€ä¸ªGoé¡¹ç›®demoï¼Œè¿›è¡Œæµ‹è¯•</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># æ·»åŠ ä¾èµ–åŒ…</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">></span>go get github.com/vvfock3r/test 
go: downloading github.com/vvfock3r/test v0.0.0-20220601023617-b9d901edce34

<span class="token comment"># ç¼–å†™main.go</span>
package main

<span class="token function">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"github.com/vvfock3r/test"</span>
<span class="token punctuation">)</span>

func <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt.Println<span class="token punctuation">(</span>test.Add<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span><span class="token punctuation">))</span>
<span class="token punctuation">}</span>

<span class="token comment"># æµ‹è¯•æ‰§è¡Œ</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">></span>go run <span class="token builtin class-name">.</span>      
<span class="token number">3</span>

<span class="token comment"># æŸ¥çœ‹go.mod</span>
module demo

go <span class="token number">1.18</span>

require github.com/vvfock3r/test v0.0.0-20220601023617-b9d901edce34 // indirect
</code></pre></div><p>æ€»ç»“å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ¨¡å—åï¼šåº”ä½¿ç”¨<code v-pre>github.com/ç”¨æˆ·å/é¡¹ç›®å</code></p>
<p>ï¼ˆ2ï¼‰ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç‰ˆæœ¬ï¼šè‹¥æ— ç‰ˆæœ¬ï¼ŒGoè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç‰ˆæœ¬<code v-pre>v0.0.0-æ—¶é—´-æäº¤ID</code></p>
<ul>
<li><code v-pre>v0.0.0</code>æ˜¯å›ºå®šçš„</li>
<li>æ—¶é—´æ ¼å¼<code v-pre>å¹´æœˆæ—¥æ—¶åˆ†ç§’</code></li>
<li>æäº¤IDé•¿åº¦<code v-pre>12</code>ä½</li>
</ul>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œä¸€æ¬¡æäº¤å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªç‰ˆæœ¬</p>
</details>
<details class="custom-container details"><summary>ï¼ˆ2ï¼‰æ›´æ–°ç¬¬ä¸‰æ–¹åŒ…å»¶è¿Ÿé—®é¢˜</summary>
<p>æè¿°ï¼šæˆ‘ä»¬å¯¹ç¬¬ä¸‰æ–¹æ¨¡å—<code v-pre>test</code>éšä¾¿åšä¸€ç‚¹ä¿®æ”¹å¹¶æäº¤åˆ°GitHubï¼Œåœ¨<code v-pre>demo</code>é¡¹ç›®ä¸­æµ‹è¯•æ›´æ–°<code v-pre>test</code>æ¨¡å—æ˜¯å¦æ­£å¸¸</p>
<p>ç»“æœï¼šç¬¬ä¸‰æ–¹åŒ…åˆšåˆšæ›´æ–°çš„ä»£ç ï¼Œæˆ‘ä»¬æ— æ³•ç«‹é©¬æ‹‰å–åˆ°æ–°ä»£ç ï¼Œæµ‹è¯•è¿‡çš„æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li>ä½¿ç”¨<code v-pre>go get -u github.com/vvfock3r/test</code>æ›´æ–°ï¼Œæ— æ•ˆ</li>
<li>åˆ é™¤<code v-pre>go.mod</code>å’Œæœ¬åœ°<code v-pre>GOPATH</code>ä¸‹çš„<code v-pre>test</code>æ¨¡å—ç›¸å…³çš„ä»»ä½•ä¸œè¥¿ï¼Œç„¶åä½¿ç”¨<code v-pre>go get</code>é‡æ–°ä¸‹è½½ï¼Œæ— æ•ˆ</li>
</ul>
<p>åŸå› æ˜¯ï¼šæˆ‘ä»¬<code v-pre>go get</code>ä¸‹è½½åŒ…å¹¶ä¸æ˜¯ç›´æ¥ä»<code v-pre>github.com</code>ä¸‹è½½çš„ï¼Œè€Œæ˜¯é€šè¿‡<code v-pre>GOPROXY</code>æŒ‡å®šçš„é•œåƒç«™ä¸‹è½½çš„ï¼ˆé€šè¿‡<code v-pre>go get -x</code>å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œè€Œé•œåƒç«™å­˜åœ¨ä¸€å®šå»¶è¿Ÿä»è€Œå¯¼è‡´ä¸èƒ½é©¬ä¸Šä¸‹è½½æœ€æ–°åŒ…</p>
<p>è§£å†³åŠæ³•ï¼šä½¿ç”¨<code v-pre>go get github.com/vvfock3r/test@æäº¤ID</code>æ¥è¿›è¡Œæ›´æ–°ï¼ˆæäº¤IDå¹¶ä¸ä¸€å®šæ˜¯å®Œæ•´çš„IDï¼‰ï¼Œå¯ä»¥åœ¨ä¸‹å›¾ä¸­è¿™ä¸ªä½ç½®æ‰¾åˆ°æœ€æ–°æäº¤ID</p>
<p><img src="https://tuchuang-1257805459.cos.ap-shanghai.myqcloud.com/image-20220601140958608.png" alt="image-20220601140958608"></p>
</details>
<details class="custom-container details"><summary>ï¼ˆ3ï¼‰æŒ‡å®šç¬¬ä¸‰æ–¹åŒ…çš„ç‰ˆæœ¬</summary>
<p>å¦‚æœæˆ‘æƒ³è®©ç”¨æˆ·ä½¿ç”¨<code v-pre>go get github.com/vvfock3r/test@v1.0.0</code>è¿™æ ·çš„æ–¹å¼æ¥å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p>
<p>è¿™é‡Œçš„<code v-pre>v1.0.0</code>ï¼Œå°±æ˜¯ä»“åº“çš„<code v-pre>Tag</code>åç§°ï¼Œä½†æ˜¯æœ‰å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>
<p>Tagåç§°å¿…é¡»æ˜¯ç±»ä¼¼<code v-pre>v1.0.0</code>è¿™ç§è§„åˆ™ï¼Œå¦‚æœæ˜¯<code v-pre>v1.0</code>è¿™æ ·æ˜¯æ‹‰å–ä¸åˆ°å¯¹åº”ç‰ˆæœ¬çš„</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">></span>go get github.com/vvfock3r/test@v1.0
go: github.com/vvfock3r/test@v1.0: no matching versions <span class="token keyword">for</span> query <span class="token string">"v1.0"</span>
</code></pre></div></li>
<li>
<p>å¯¹äº<code v-pre>v2.0.0</code>åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¦‚æœç›´æ¥ä½¿ç”¨<code v-pre>go get github.com/vvfock3r/test@v2.0.0</code>ä¼šæŠ¥é”™</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>GolandProjects<span class="token punctuation">\</span>demo<span class="token operator">></span>go get github.com/vvfock3r/test@v2.0.0
go: github.com/vvfock3r/test@v2.0.0: invalid version: module contains a go.mod file, so module path must match major version <span class="token punctuation">(</span><span class="token string">"github.com/vvfock3r/test/v2"</span><span class="token punctuation">)</span>

<span class="token comment"># åŸå› ä¹Ÿç»™å‡ºæ¥äº†ï¼šæ¨¡å—è·¯å¾„å¿…é¡»åŒ…å«ä¸»ç‰ˆæœ¬å·</span>
</code></pre></div><p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ°¸è¿œä¸å‡çº§åˆ°<code v-pre>v2.x.x</code>ï¼Œä¸€ç›´ä½¿ç”¨v1çš„ç‰ˆæœ¬æ¯”å¦‚<code v-pre>v1.0.0</code>ã€<code v-pre>v1.0.1</code>ã€<code v-pre>@v1.999.999</code></li>
<li>å‡çº§åˆ°<code v-pre>v2.x.x</code>ï¼Œéœ€è¦åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code v-pre>v2</code>çš„ç›®å½•ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç‰ˆæœ¬</li>
</ul>
</li>
<li>
<p>å…¶ä»–ï¼šGithubä¸Šæ–°æ‰“çš„Tagå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨<code v-pre>go get </code>ä¸‹è½½ï¼Œæ²¡æœ‰GOPROXYç¼“å­˜çš„é—®é¢˜ï¼ˆæŒ‡å®šç‰ˆæœ¬ä¸º<code v-pre>latest</code>é™¤å¤–ï¼‰</p>
</li>
</ul>
</details>
<details class="custom-container details"><summary>ï¼ˆ4ï¼‰replaceç®€ä»‹</summary>
<p>replaceå¯ä»¥è®©æˆ‘ä»¬å¯¹åŒ…è¿›è¡Œæ›¿æ¢ï¼Œå¯ä»¥è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼šå¯¼å…¥çš„æ˜¯<code v-pre>a</code>åŒ…ï¼Œä½†å®é™…ä½¿ç”¨çš„æ˜¯<code v-pre>b</code>åŒ…</p>
<p>ä½¿ç”¨replaceå¯ä»¥ç›´æ¥ä¿®æ”¹go.modæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code v-pre>go mod edit -replace</code>å‘½ä»¤ï¼ˆæ¨èï¼‰</p>
<p>è¯­æ³•</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># è¯­æ³•</span>
<span class="token comment"># go mod edit -replace æ—§åœ°å€=æ–°åœ°å€</span>

<span class="token comment"># ç¤ºä¾‹ï¼šå°†v1.1.2æ›¿æ¢ä¸ºv1.1.1ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯é™ä½äº†ä¸€ä¸ªç‰ˆæœ¬</span>
go mod edit -replace github.com/vvfock3r/test@v1.1.2<span class="token operator">=</span>github.com/vvfock3r/test@v1.1.1

<span class="token comment"># æŸ¥çœ‹ä¸€ä¸‹go.modæ–‡ä»¶</span>
module demo
go <span class="token number">1.18</span>
require github.com/vvfock3r/test v1.1.2
replace github.com/vvfock3r/test v1.1.2 <span class="token operator">=</span><span class="token operator">></span> github.com/vvfock3r/test v1.1.1		<span class="token comment"># replace</span>

<span class="token comment"># è¯´æ˜</span>
è™½ç„¶go.modä¸­requireæ˜¯v1.1.2ç‰ˆæœ¬ï¼Œä½†å®é™…ä¸Šåœ¨ä½¿ç”¨v1.1.1ç‰ˆæœ¬
</code></pre></div></details>
<h2 id="å‰ç½®çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#å‰ç½®çŸ¥è¯†" aria-hidden="true">#</a> å‰ç½®çŸ¥è¯†</h2>
<h3 id="å£°æ˜å…³é”®å­—" tabindex="-1"><a class="header-anchor" href="#å£°æ˜å…³é”®å­—" aria-hidden="true">#</a> å£°æ˜å…³é”®å­—</h3>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>var</code></td>
<td>å£°æ˜å˜é‡</td>
</tr>
<tr>
<td><code v-pre>const</code></td>
<td>å£°æ˜å¸¸é‡</td>
</tr>
<tr>
<td><code v-pre>func</code></td>
<td>å£°æ˜å‡½æ•°</td>
</tr>
<tr>
<td><code v-pre>type</code></td>
<td>å£°æ˜ç±»å‹</td>
</tr>
</tbody>
</table>
<h3 id="å˜é‡å’Œå¸¸é‡" tabindex="-1"><a class="header-anchor" href="#å˜é‡å’Œå¸¸é‡" aria-hidden="true">#</a> å˜é‡å’Œå¸¸é‡</h3>
<p><strong>å£°æ˜å˜é‡å¹¶èµ‹å€¼</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å•ä¸ªå˜é‡</span>
	<span class="token comment">//	è¯­æ³•1ï¼švar å˜é‡å å˜é‡ç±»å‹ = å˜é‡å€¼	-- æ¨èä½¿ç”¨</span>
	<span class="token comment">//	è¯­æ³•2ï¼šå˜é‡å := å˜é‡å€¼			-- æ¨èä½¿ç”¨,ä½†ä»…æ”¯æŒåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨</span>
	<span class="token keyword">var</span> Monday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">1</span>
	Tuesday <span class="token operator">:=</span> <span class="token number">2</span>

	<span class="token comment">// å£°æ˜å¤šä¸ªå˜é‡</span>
	<span class="token comment">// è¯­æ³•1:</span>
	<span class="token comment">//		var (                                   -- æ¨èä½¿ç”¨</span>
	<span class="token comment">//			å˜é‡å1 å˜é‡ç±»å‹ = å˜é‡å€¼</span>
	<span class="token comment">//			å˜é‡å2 å˜é‡ç±»å‹ = å˜é‡å€¼</span>
	<span class="token comment">//		)</span>
	<span class="token comment">// è¯­æ³•2: var å˜é‡å1,å˜é‡å2 å˜é‡ç±»å‹ = å˜é‡å€¼1, å˜é‡å€¼2</span>
	<span class="token keyword">var</span> <span class="token punctuation">(</span>
		Wednesday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">3</span>
		Thursday  <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">4</span>
	<span class="token punctuation">)</span>

	<span class="token keyword">var</span> Friday<span class="token punctuation">,</span> Saturday<span class="token punctuation">,</span> Sunday <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span>

	<span class="token comment">// å‡½æ•°å†…å£°æ˜çš„å˜é‡å¿…é¡»è¦ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼›å‡½æ•°å¤–çš„å˜é‡å¯ä»¥å£°æ˜ä½†ä¸ä½¿ç”¨</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨ä¸€: "</span><span class="token punctuation">,</span> Monday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨äºŒ: "</span><span class="token punctuation">,</span> Tuesday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨ä¸‰: "</span><span class="token punctuation">,</span> Wednesday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨å››: "</span><span class="token punctuation">,</span> Thursday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨äº”: "</span><span class="token punctuation">,</span> Friday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨å…­: "</span><span class="token punctuation">,</span> Saturday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨æ—¥: "</span><span class="token punctuation">,</span> Sunday<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>å‘¨ä¸€:  <span class="token number">1</span>
å‘¨äºŒ:  <span class="token number">2</span>
å‘¨ä¸‰:  <span class="token number">3</span>
å‘¨å››:  <span class="token number">4</span>
å‘¨äº”:  <span class="token number">5</span>
å‘¨å…­:  <span class="token number">6</span>
å‘¨æ—¥:  <span class="token number">7</span>
</code></pre></div><br />
<p><strong>å£°æ˜å˜é‡ä¸èµ‹å€¼</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜ä¸èµ‹å€¼,é»˜è®¤ä¼šä½¿ç”¨è¯¥ç±»å‹çš„é›¶å€¼</span>
	<span class="token keyword">var</span> Monday <span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>Monday<span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token punctuation">}</span>
</code></pre></div><br />
<p><strong>å£°æ˜å¸¸é‡</strong></p>
<p>å¸¸é‡ä½¿ç”¨<code v-pre>const</code>å…³é”®å­—å£°æ˜ï¼Œä¸<code v-pre>var</code>ç”¨æ³•å¾ˆç±»ä¼¼ï¼Œè¿™é‡Œä¸»è¦æ¼”ç¤ºä¸€ä¸‹ç‰¹æ®Šçš„åœ°æ–¹</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
	<span class="token comment">// æ–¹å¼1</span>
	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		Monday  <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">4</span>
		Tuesday     <span class="token comment">// åœ¨åŒä¸€ä¸ªæ‹¬å·å†…ï¼Œè‹¥å˜é‡å€¼ä¸å†™ï¼Œåˆ™ä¿æŒè·Ÿè·ç¦»æœ€è¿‘çš„ä¸€ä¸ªå˜é‡ ç±»å‹å’Œå€¼ä¸€æ ·</span>
	<span class="token punctuation">)</span>

	<span class="token comment">// æ–¹å¼2</span>
	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		Wednesday <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token comment">// iotaåˆå§‹ä¸º0,  0 + 3 = 3</span>
		Thursday             <span class="token comment">// æ¯æ–°å¢ä¸€è¡Œiotaè‡ªå¢é•¿ï¼‘, 1 + 3 = 4</span>
		Friday               <span class="token comment">//  åŒç†, 2 + 3 =5</span>
		Saturday
		Sunday
	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨ä¸€: "</span><span class="token punctuation">,</span> Monday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨äºŒ: "</span><span class="token punctuation">,</span> Tuesday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨ä¸‰: "</span><span class="token punctuation">,</span> Wednesday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨å››: "</span><span class="token punctuation">,</span> Thursday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨äº”: "</span><span class="token punctuation">,</span> Friday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨å…­: "</span><span class="token punctuation">,</span> Saturday<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å‘¨æ—¥: "</span><span class="token punctuation">,</span> Sunday<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>å‘¨ä¸€:  <span class="token number">4</span>
å‘¨äºŒ:  <span class="token number">4</span>
å‘¨ä¸‰:  <span class="token number">3</span>
å‘¨å››:  <span class="token number">4</span>
å‘¨äº”:  <span class="token number">5</span>
å‘¨å…­:  <span class="token number">6</span>
å‘¨æ—¥:  <span class="token number">7</span>
</code></pre></div><h3 id="æŒ‡é’ˆ" tabindex="-1"><a class="header-anchor" href="#æŒ‡é’ˆ" aria-hidden="true">#</a> æŒ‡é’ˆ</h3>
<p>æŒ‡é’ˆçš„å€¼æ˜¯å˜é‡çš„å†…å­˜åœ°å€ï¼Œä½¿ç”¨æŒ‡é’ˆå¯ä»¥åœ¨æ— éœ€çŸ¥é“å˜é‡åå­—çš„æƒ…å†µä¸‹ï¼Œé—´æ¥è¯»å–æˆ–æ›´æ–°å˜é‡çš„å€¼</p>
<p>æŒ‡é’ˆç±»å‹çš„é›¶å€¼æ˜¯nil</p>
<p>æŒ‡é’ˆæ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œå½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå˜é‡æˆ–ä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¸ºnilçš„æ—¶ä»–ä»¬æ‰ç›¸ç­‰</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// (1) é€šè¿‡å˜é‡è·å–æŒ‡é’ˆ</span>
	name <span class="token operator">:=</span> <span class="token string">"Bob"</span>     <span class="token comment">// å£°æ˜å˜é‡</span>
	namePtr <span class="token operator">:=</span> <span class="token operator">&amp;</span>name  <span class="token comment">// è·å–è¿™ä¸ªå˜é‡çš„æŒ‡é’ˆèµ‹å€¼ç»™ namePtr</span>
	<span class="token operator">*</span>namePtr <span class="token operator">=</span> <span class="token string">"Jack"</span> <span class="token comment">// é€šè¿‡æŒ‡é’ˆè·å–å˜é‡ï¼Œå¹¶ç»™è¿™ä¸ªå˜é‡èµ‹å€¼</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>     <span class="token comment">// Jack</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>namePtr<span class="token punctuation">)</span> <span class="token comment">// Jack</span>

	<span class="token comment">// (2) ç›´æ¥å£°æ˜æŒ‡é’ˆå¹¶èµ‹å€¼</span>
	<span class="token keyword">var</span> a <span class="token operator">*</span><span class="token builtin">string</span> <span class="token operator">=</span> namePtr
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token comment">// Jack</span>

	<span class="token comment">// (3) ç›´æ¥å£°æ˜ç©ºæŒ‡é’ˆ,åç»­èµ‹å€¼ä¼šå¼•å‘panic, åŸå› æ˜¯å¹¶æ²¡æœ‰è¿›è¡Œå†…å­˜åˆ†é…,å¯¼è‡´æ— æ³•èµ‹å€¼</span>
	<span class="token keyword">var</span> b <span class="token operator">*</span><span class="token builtin">int</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">// &lt;nil>, æŒ‡é’ˆç±»å‹çš„é›¶å€¼ä¸ºnil, è¿™æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆ</span>
	<span class="token comment">//fmt.Println(*b) // è¿™ä¼šæŠ¥é”™, å› ä¸ºæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨è¿™æ ·åˆ›å»ºçš„æŒ‡é’ˆç±»å‹,è¿˜æ²¡æœ‰è¿›è¡Œå†…å­˜åˆ†é…,è§£å†³åŠæ³•å¯ä»¥ä½¿ç”¨newå’Œmake</span>

	<span class="token comment">// (4) å¯¹äºå€¼ç±»å‹æ•°æ®ç»“æ„,ä½¿ç”¨newå£°æ˜å’Œåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡é’ˆå˜é‡</span>
	c <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
	<span class="token operator">*</span>c <span class="token operator">=</span> <span class="token number">200</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>c<span class="token punctuation">)</span>

	<span class="token comment">// (5) å¯¹ä¸å¼•ç”¨æ•°æ®ç»“æ„,ä½¿ç”¨makeå£°æ˜å’Œåˆ†é…å†…å­˜å¹¶è¿”å›å˜é‡(æ³¨æ„è¿”å›çš„ä¸æ˜¯æŒ‡é’ˆ,å› ä¸ºå¼•ç”¨ç±»å‹å°±æ²¡æœ‰å¿…è¦ç”¨æŒ‡é’ˆäº†)</span>
	s1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">300</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>        <span class="token comment">// [300]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span> <span class="token comment">// []int</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="printç³»åˆ—å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#printç³»åˆ—å‡½æ•°" aria-hidden="true">#</a> printç³»åˆ—å‡½æ•°</h3>
<p>æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/fmt" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/fmt<ExternalLinkIcon/></a></p>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¾“å‡ºåˆ°æ§åˆ¶å°</td>
<td><code v-pre>fmt.Print(string)</code></td>
<td>ä¸æ¢è¡Œ</td>
</tr>
<tr>
<td></td>
<td><code v-pre>fmt.Println(string)</code></td>
<td>è‡ªåŠ¨æ¢è¡Œï¼Œ<code v-pre>ln</code>æ„ä¸º<code v-pre>line</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>fmt.Printf(æ ¼å¼åŒ–å­—ç¬¦, å­—ç¬¦ä¸²)</code></td>
<td>æ ¼å¼åŒ–è¾“å‡º</td>
</tr>
<tr>
<td>ä½œä¸ºè¿”å›å€¼è¿”å›</td>
<td><code v-pre>fmt.Sprint()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code v-pre>fmt.Sprintln()</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code v-pre>fmt.Sprintf(æ ¼å¼åŒ–å­—ç¬¦, å­—ç¬¦ä¸²å¯¹è±¡)</code></td>
<td></td>
</tr>
<tr>
<td>æ¥æ”¶ç”¨æˆ·è¾“å…¥</td>
<td><code v-pre>fmt.Scan(æŒ‡é’ˆå¯¹è±¡)</code></td>
<td>å°†æ§åˆ¶å°æ¥æ”¶çš„å€¼ èµ‹å€¼ç»™æŒ‡é’ˆå¯¹è±¡</td>
</tr>
</tbody>
</table>
<p><code v-pre>printf</code>æ ¼å¼åŒ–å­—ç¬¦ä¸²</p>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>ä¿®é¥°ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¸¸ç”¨</td>
<td><code v-pre>%T</code></td>
<td>æ•°æ®ç±»å‹</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%v</code></td>
<td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœå®ç°äº† <code v-pre>error </code>æ¥å£ï¼Œä»…è¡¨ç¤ºé”™è¯¯æ¶ˆæ¯</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%+v</code></td>
<td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“ä¼šæºå¸¦å­—æ®µå</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%#v</code></td>
<td>è·å–æ•°æ®çš„å€¼ï¼Œå¦‚æœæ˜¯ç»“æ„ä½“ä¼šæºå¸¦ç»“æ„ä½“åå’Œå­—æ®µå</td>
</tr>
<tr>
<td>æŒ‡é’ˆ</td>
<td><code v-pre>%p</code></td>
<td>æŒ‡é’ˆåœ°å€ï¼ˆå¸¦ <code v-pre>0x</code>ï¼‰</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%#p</code></td>
<td>æŒ‡é’ˆåœ°å€ï¼ˆä¸å¸¦ <code v-pre>0x</code>ï¼‰</td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²</td>
<td><code v-pre>%s</code></td>
<td>å­—ç¬¦ä¸²æˆ–å­—èŠ‚åˆ‡ç‰‡</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%c</code></td>
<td>Unicodeç ç‚¹å¯¹åº”çš„å­—ç¬¦</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%q</code></td>
<td>å¯¹äºå­—ç¬¦ä¸²æˆ–å­—èŠ‚åˆ‡ç‰‡ï¼Œç»“æœä¼šåŠ ä¸ŠåŒå¼•å·ï¼›<br />å¯¹äº<code v-pre>byte</code>æˆ–<code v-pre>runeï¼Œ</code>ç»“æœä¼šåŠ ä¸Šå•å¼•å·</td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²å®½åº¦</td>
<td><code v-pre>%5s</code></td>
<td>æœ€å°å®½åº¦ä¸º5ï¼ˆé»˜è®¤å³å¯¹é½ï¼‰</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%-5s</code></td>
<td>æœ€å°å®½åº¦ä¸º5ï¼ˆå·¦å¯¹é½ï¼‰</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%.5s</code></td>
<td>æœ€å¤§å®½åº¦ä¸º5ï¼Œå¤šå‡ºéƒ¨åˆ†ä¼šæˆªæ–­</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%5.7s</code></td>
<td>æœ€å°å®½åº¦ä¸º5ï¼Œæœ€å¤§å®½åº¦ä¸º7</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%-5.7s</code></td>
<td>æœ€å°å®½åº¦ä¸º5ï¼Œæœ€å¤§å®½åº¦ä¸º7ï¼ˆå·¦å¯¹é½ï¼‰</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%5.3s</code></td>
<td>å¦‚æœå®½åº¦å¤§äº3ï¼Œåˆ™æˆªæ–­</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%05s</code></td>
<td>å¦‚æœå®½åº¦å°äº5ï¼Œå°±ä¼šåœ¨å­—ç¬¦ä¸²å‰é¢è¡¥é›¶</td>
</tr>
<tr>
<td>æ•´å‹</td>
<td><code v-pre>%b</code></td>
<td>äºŒè¿›åˆ¶æ•°</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%o</code></td>
<td>å…«è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%#o</code></td>
<td>å…«è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%d</code></td>
<td>åè¿›åˆ¶æ•°</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%x</code></td>
<td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œa-f</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%X</code></td>
<td>æ‰“å°16è¿›åˆ¶æ•°ï¼ŒA-F</td>
</tr>
<tr>
<td></td>
<td><code v-pre>%#x</code>ã€<code v-pre>%#X</code></td>
<td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œå¸¦<code v-pre>0x</code>ã€<code v-pre>0X</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>% x</code>ã€<code v-pre>% X</code></td>
<td>æ‰“å°16è¿›åˆ¶æ•°ï¼Œå‰é¢å¸¦ä¸€ä¸ªç©ºæ ¼</td>
</tr>
<tr>
<td>æµ®ç‚¹æ•°</td>
<td><code v-pre>%f</code></td>
<td>æµ®ç‚¹æ•°, é»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå³<code v-pre>%.6</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>%e</code></td>
<td>ç§‘å­¦è®¡æ•°æ³•ï¼Œé»˜è®¤ä¿ç•™6ä½å°æ•°ï¼Œå³<code v-pre>%.6e</code></td>
</tr>
<tr>
<td>æŒ‡é’ˆ</td>
<td><code v-pre>%p</code></td>
<td>æŒ‡é’ˆï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå¸¦å‰ç¼€<code v-pre>0x</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>%#p</code></td>
<td>æŒ‡é’ˆï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºï¼Œä¸å¸¦å‰ç¼€<code v-pre>0x</code></td>
</tr>
<tr>
<td>å¸ƒå°”å€¼</td>
<td><code v-pre>%t</code></td>
<td>æ‰“å°<code v-pre>true</code>æˆ–<code v-pre>false</code></td>
</tr>
</tbody>
</table>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	person <span class="token operator">:=</span> Person<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"Bob"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">}</span>
	numbers <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// å¸¸ç”¨ç±»å‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%+v\n"</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> person<span class="token punctuation">)</span>
	<span class="token comment">//main.Person</span>
	<span class="token comment">//{Bob 20}</span>
	<span class="token comment">//{Name:Bob Age:20}</span>
	<span class="token comment">//main.Person{Name:"Bob", Age:20}</span>

	<span class="token comment">// æŒ‡é’ˆç±»å‹ï¼Œå€¼ç±»å‹éœ€è¦ä½¿ç”¨&amp;è·å–æŒ‡é’ˆåœ°å€ï¼Œå¼•ç”¨ç±»å‹åŠ ä¸åŠ &amp;éƒ½å¯ä»¥</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p, %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>person<span class="token punctuation">,</span> numbers<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#p, %#p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>person<span class="token punctuation">,</span> <span class="token operator">&amp;</span>numbers<span class="token punctuation">)</span>
	<span class="token comment">//0xc000004078, 0xc0000161e0</span>
	<span class="token comment">//c000004078, c0000161e0</span>

	<span class="token comment">// å­—ç¬¦ä¸²</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s, %s\n"</span><span class="token punctuation">,</span> <span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#x\n"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0x5317, å­—ç¬¦ä¸² -> unicode -> 16è¿›åˆ¶</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> <span class="token number">0x5317</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q, %q, %q\n"</span><span class="token punctuation">,</span> <span class="token string">"åŒ—äº¬"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"åŒ—äº¬"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0x5317</span><span class="token punctuation">)</span>
	<span class="token comment">//åŒ—äº¬, åŒ—äº¬</span>
	<span class="token comment">//0x5317</span>
	<span class="token comment">//åŒ—</span>
	<span class="token comment">//"åŒ—äº¬", "åŒ—äº¬", 'åŒ—'</span>

	<span class="token comment">// å­—ç¬¦ä¸²å®½åº¦</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%5s\n"</span><span class="token punctuation">,</span> <span class="token string">"ABC"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%-5s\n"</span><span class="token punctuation">,</span> <span class="token string">"ABC"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%.5s\n"</span><span class="token punctuation">,</span> <span class="token string">"ABCDEF"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%5.3s\n"</span><span class="token punctuation">,</span> <span class="token string">"ABCDEF"</span><span class="token punctuation">)</span>
	<span class="token comment">//ABC</span>
	<span class="token comment">//ABC</span>
	<span class="token comment">//ABCDE</span>
	<span class="token comment">//ABC</span>

	<span class="token comment">// æ•´å‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%b\n"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%o\n"</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#o\n"</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%x\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%X\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%X\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#x\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#X\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"% X\n"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>
	<span class="token comment">//11</span>
	<span class="token comment">//11</span>
	<span class="token comment">//011</span>
	<span class="token comment">//f</span>
	<span class="token comment">//F</span>
	<span class="token comment">//F</span>
	<span class="token comment">//0xf</span>
	<span class="token comment">//0XF</span>
	<span class="token comment">// F</span>

	<span class="token comment">// 	æµ®ç‚¹æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%.2f\n"</span><span class="token punctuation">,</span> <span class="token number">2.985</span><span class="token punctuation">)</span>                     <span class="token comment">// å¹¶éå››èˆäº”å…¥</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%.2f\n"</span><span class="token punctuation">,</span> <span class="token number">2.986</span><span class="token punctuation">)</span>                     <span class="token comment">// ä¹Ÿä¸æ˜¯å®Œå…¨èˆå»å°æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%f\n"</span><span class="token punctuation">,</span> <span class="token number">3.3333333333333333333333333</span><span class="token punctuation">)</span> <span class="token comment">// é»˜è®¤ä¿ç•™å…­ä½å°æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%f\n"</span><span class="token punctuation">,</span> <span class="token number">3.0</span><span class="token punctuation">)</span>                         <span class="token comment">// é»˜è®¤ä¿ç•™å…­ä½å°æ•°ï¼Œå³%.06</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%e\n"</span><span class="token punctuation">,</span> <span class="token number">123456.789</span><span class="token punctuation">)</span>                  <span class="token comment">// ç§‘å­¦è®¡æ•°æ³•ï¼Œ é»˜è®¤ä¸º%.6eï¼›è®¡ç®—æ–¹æ³•ä¸ºï¼š123456.789 = 1.23456789 * 10^5 = 1.23456789e5ï¼Œåˆå› ä¸ºæ˜¯ä¿ç•™6ä½å°æ•°ï¼Œæ‰€ä»¥1.234568</span>

	<span class="token comment">// æŒ‡é’ˆ</span>
	a <span class="token operator">:=</span> <span class="token number">1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span>
	<span class="token comment">//0xc0000181c0</span>
	<span class="token comment">//c0000181c0</span>

	<span class="token comment">// å¸ƒå°”å€¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%t\n"</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="ç®—æœ¯è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#ç®—æœ¯è¿ç®—ç¬¦" aria-hidden="true">#</a> ç®—æœ¯è¿ç®—ç¬¦</h3>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>åŠ </td>
</tr>
<tr>
<td>-</td>
<td>å‡</td>
</tr>
<tr>
<td>*</td>
<td>ä¹˜</td>
</tr>
<tr>
<td>/</td>
<td>é™¤ï¼Œ<br />æ•´æ•°ç›¸é™¤ä¼šèˆå¼ƒå°æ•°éƒ¨åˆ†ï¼Œæ¯”å¦‚<code v-pre>10 /3 = 3</code>,  <br />æœ‰ä»»æ„ä¸€ä¸ªæ˜¯æµ®ç‚¹æ•°ç»“æœå°±æ˜¯æµ®ç‚¹æ•°ï¼Œæ¯”å¦‚<code v-pre>10 / 3.0 = 3.3333333333333335</code></td>
</tr>
<tr>
<td>%</td>
<td>å–ä½™ï¼Œå€¼çš„ç¬¦å·å’Œé™¤æ•°ç¬¦å·ä¿æŒä¸€è‡´<br /><code v-pre>10 % 3 = 1</code><br /><code v-pre>10 % -3 = 1</code><br /><code v-pre>-10 % 3 = -1</code></td>
</tr>
<tr>
<td>++</td>
<td>æ”¯æŒi++ï¼Œä½†ä¸æ”¯æŒ++i</td>
</tr>
<tr>
<td>--</td>
<td>åŒ++</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>           <span class="token comment">// 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>           <span class="token comment">// 0</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>           <span class="token comment">// 4</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>           <span class="token comment">// 1, æ•´æ•°ç›¸é™¤ä¼šèˆå¼ƒå°æ•°éƒ¨åˆ†</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">3.0</span><span class="token punctuation">)</span>        <span class="token comment">// 3.3333333333333335</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token function">float32</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.3333333</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token function">float64</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3.3333333333333335, é»˜è®¤çš„æµ®ç‚¹æ•°æ˜¯float64</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>          <span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">)</span>         <span class="token comment">// -1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">%</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span>         <span class="token comment">// 1</span>

	i <span class="token operator">:=</span> <span class="token number">1</span>
	<span class="token comment">// ä¸‹é¢ä½¿ç”¨éƒ½ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼Œ i++æ˜¯ä¸€æ¡è¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ï¼Œæ²¡æœ‰è¿”å›å€¼</span>
	<span class="token comment">//j := i++</span>
	<span class="token comment">//fmt.Println(i++)</span>
	i<span class="token operator">++</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="ä½è¿ç®—ç¬¦" tabindex="-1"><a class="header-anchor" href="#ä½è¿ç®—ç¬¦" aria-hidden="true">#</a> ä½è¿ç®—ç¬¦</h3>
<p><strong>åŸç åç è¡¥ç </strong></p>
<ul>
<li>åŸç ï¼šæœ€é«˜ä½è¡¨ç¤ºç¬¦å·ä½ï¼Œ0è¡¨ç¤ºæ­£ï¼Œ1è¡¨ç¤ºè´Ÿï¼Œæ‰€ä»¥ -&gt; 0000 0001</li>
<li>åç 
<ul>
<li>æ­£æ•°çš„åç ç­‰äºåŸç </li>
<li>è´Ÿæ•°çš„åç ç­‰äºåŸç æŒ‰ä½å–åï¼ˆç¬¦å·ä½é™¤å¤–ï¼‰</li>
</ul>
</li>
<li>è¡¥ç 
<ul>
<li>æ­£æ•°çš„è¡¥ç ç­‰äºåŸç </li>
<li>è´Ÿæ•°çš„è¡¥ç ç­‰äºåç +1</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">BitReverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"^æŒ‰ä½å–å:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// æœ‰ç¬¦å·æ•°å­—æŒ‰ä½å–å</span>
	<span class="token comment">// è®¡ç®—å…¬å¼ï¼š^n = (n + 1) * -1 (næ˜¯æœ‰ç¬¦å·æ•°å­—ï¼Œå¯èƒ½æ˜¯æ­£æ•°ä¹Ÿå¯èƒ½æ˜¯è´Ÿæ•°)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int32</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"^int32(%-5s = %d\n"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">,</span> <span class="token operator">^</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æ— ç¬¦å·æ•°å­—æŒ‰ä½å–å</span>
	<span class="token comment">// è®¡ç®—å…¬å¼ï¼š^n = è¯¥ç±»å‹æœ€å¤§å€¼ - (n+1) ï¼ˆnæ˜¯æ— ç¬¦å·æ•°å­—ï¼Œ>=0ï¼‰</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"^uint8(%-5s = %d\n"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">,</span> <span class="token operator">^</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
    <span class="token comment">// å¤‡æ³¨: è¿™é‡Œæˆ‘ä»¬å°†^ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨ï¼Œå®ƒè¿˜å¯ä»¥ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ä½¿ç”¨ã€‚</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">LeftShift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\n&lt;&lt;å·¦ç§»ä½:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// è®¡ç®—å…¬å¼ï¼šn&lt;&lt;m = n*(2çš„mæ¬¡æ–¹) ï¼ˆnä¸º10è¿›åˆ¶æ•°ï¼‰</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d&lt;&lt;1=%d     %d&lt;&lt;2=%d     %d&lt;&lt;3=%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">&lt;&lt;</span><span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">&lt;&lt;</span><span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">RightShift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\n>>å³ç§»ä½:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// è®¡ç®—å…¬å¼ï¼šn>>m = int(n/(2çš„mæ¬¡æ–¹)) ï¼ˆnä¸º10è¿›åˆ¶æ•°ï¼‰</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">10</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">10</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d>>1=%d     %d>>2=%d     %d>>3=%d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">>></span><span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> i<span class="token operator">>></span><span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æŒ‰ä½å–å</span>
	<span class="token function">BitReverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å·¦ç§»ä½</span>
	<span class="token function">LeftShift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å³ç§»ä½</span>
	<span class="token function">RightShift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>^æŒ‰ä½å–å:
^int32<span class="token punctuation">(</span>-200<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">199</span>              
^int32<span class="token punctuation">(</span>-100<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">99</span>               
^int32<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token operator">=</span> -1               
^int32<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token operator">=</span> -101             
^int32<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>  <span class="token operator">=</span> -201             
^uint8<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">255</span>              
^uint8<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">254</span>              
^uint8<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token operator">=</span> <span class="token number">253</span>              
                                
<span class="token operator">&lt;&lt;</span>å·¦ç§»ä½:                       
<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">0</span>     <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">0</span>     <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">0</span>    
<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span>     <span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">4</span>     <span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">8</span>    
<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">4</span>     <span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">8</span>     <span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">16</span>   
<span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">6</span>     <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">12</span>     <span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">24</span>  
                                
<span class="token operator">>></span>å³ç§»ä½:                       
<span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">1</span><span class="token operator">=</span><span class="token number">5</span>     <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">2</span><span class="token operator">=</span><span class="token number">2</span>     <span class="token number">1</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">3</span><span class="token operator">=</span><span class="token number">1</span> 
<span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">1</span><span class="token operator">=</span><span class="token number">10</span>     <span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">2</span><span class="token operator">=</span><span class="token number">5</span>     <span class="token number">2</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">3</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">1</span><span class="token operator">=</span><span class="token number">15</span>     <span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">2</span><span class="token operator">=</span><span class="token number">7</span>     <span class="token number">3</span><span class="token operator"><span class="token file-descriptor important">0</span>>></span><span class="token number">3</span><span class="token operator">=</span><span class="token number">3</span>
</code></pre></div><h3 id="å¾ªç¯è¯­å¥" tabindex="-1"><a class="header-anchor" href="#å¾ªç¯è¯­å¥" aria-hidden="true">#</a> å¾ªç¯è¯­å¥</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ------------------------- åŸºç¡€è¯­æ³• --------------------------------</span>
	<span class="token comment">// Cè¯­è¨€é£æ ¼å¾ªç¯</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// rangeå¾ªç¯</span>
	list <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> list <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v[%d]=%d\n"</span><span class="token punctuation">,</span> list<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// ç±»ä¼¼while</span>
	n <span class="token operator">:=</span> <span class="token number">6</span>
	<span class="token keyword">for</span> n <span class="token operator">&lt;=</span> <span class="token number">8</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		n<span class="token operator">++</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æ­»å¾ªç¯</span>
	<span class="token comment">//for {</span>
	<span class="token comment">//	fmt.Println(time.Now())</span>
	<span class="token comment">//}</span>

	<span class="token comment">// ------------------------- é™·é˜± --------------------------------</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\né™·é˜±ä»£ç ï¼š"</span><span class="token punctuation">)</span>
	data1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">}</span>
	data2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span>
		data2 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data2<span class="token punctuation">,</span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data2 <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º3ä¸ª300</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// åŸå› </span>
	<span class="token comment">// væ˜¯ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯å¹¶ä¸é‡æ–°åˆ†é…å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä»…æ”¹å€¼è€Œå·²ï¼Œ</span>
	<span class="token comment">// è¿™å°±å¯¼è‡´å½“æœ€åä¸€æ¬¡å¾ªç¯å®Œæˆåï¼Œvçš„å€¼è¢«é‡ç½®ä¸º300</span>

	<span class="token comment">// ------------------------- è§£å†³ --------------------------------</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nä¿®æ­£ä»£ç -æ–¹å¼1ï¼š"</span><span class="token punctuation">)</span>
	data3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span>
		data3 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data3<span class="token punctuation">,</span> <span class="token operator">&amp;</span>data1<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// é€šè¿‡keyæ¥è·å–åŸå§‹æ•°æ®data1ä¸­çš„åœ°å€</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data3 <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º100 200 300</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nä¿®æ­£ä»£ç -æ–¹å¼2ï¼š"</span><span class="token punctuation">)</span>
	data4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data1 <span class="token punctuation">{</span>
		temp <span class="token operator">:=</span> v <span class="token comment">//ä½¿ç”¨æ–°å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šé‡æ–°å¼€è¾Ÿå†…å­˜ç©ºé—´</span>
		data4 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data4<span class="token punctuation">,</span> <span class="token operator">&amp;</span>temp<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> data4 <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">)</span> <span class="token comment">// è¾“å‡º100 200 300</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">0</span>
<span class="token number">1</span>                  
<span class="token number">2</span>                  
<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">4</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token number">6</span>                  
<span class="token number">7</span>                  
<span class="token number">8</span>                  
                   
é™·é˜±ä»£ç ï¼š         
<span class="token number">300</span>                
<span class="token number">300</span>                
<span class="token number">300</span>                
                   
ä¿®æ­£ä»£ç -æ–¹å¼1ï¼š   
<span class="token number">100</span>                
<span class="token number">200</span>                
<span class="token number">300</span>                
                   
ä¿®æ­£ä»£ç -æ–¹å¼2ï¼š   
<span class="token number">100</span>                
<span class="token number">200</span>                
<span class="token number">300</span>      
</code></pre></div><h3 id="åˆ¤æ–­è¯­å¥" tabindex="-1"><a class="header-anchor" href="#åˆ¤æ–­è¯­å¥" aria-hidden="true">#</a> åˆ¤æ–­è¯­å¥</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ifåˆ¤æ–­</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ifåˆ¤æ–­"</span><span class="token punctuation">)</span>
	a <span class="token operator">:=</span> <span class="token number">100</span>
	b <span class="token operator">:=</span> <span class="token number">200</span>
	<span class="token keyword">if</span> x<span class="token punctuation">,</span> y <span class="token operator">:=</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span> x <span class="token operator">&lt;</span> y <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d &lt; %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// switch</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nswitchåˆ¤æ–­"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> i <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"0-2"</span><span class="token punctuation">)</span>
		<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">:</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"1-3"</span><span class="token punctuation">)</span>
		<span class="token keyword">default</span><span class="token punctuation">:</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token string">"Default"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nswitch-fallthroughåˆ¤æ–­"</span><span class="token punctuation">)</span>
	c <span class="token operator">:=</span> <span class="token number">100</span>
	<span class="token keyword">switch</span> c <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token number">50</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"50"</span><span class="token punctuation">)</span>
	<span class="token keyword">case</span> <span class="token number">100</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span>
		<span class="token keyword">fallthrough</span> <span class="token comment">// é‡åˆ°fallthroughï¼Œä¼šç»§ç»­æ‰§è¡Œä»£ç åé¢çš„caseï¼Œ defaultä¸æ‰§è¡Œ</span>
	<span class="token keyword">case</span> <span class="token number">200</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"200"</span><span class="token punctuation">)</span>
	<span class="token keyword">case</span> <span class="token number">300</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"300"</span><span class="token punctuation">)</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Default"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>ifåˆ¤æ–­
<span class="token number">100</span> <span class="token operator">&lt;</span> <span class="token number">200</span>             
                      
switchåˆ¤æ–­            
<span class="token number">0</span> <span class="token number">0</span>-2                 
<span class="token number">1</span> <span class="token number">1</span>-3                 
<span class="token number">2</span> <span class="token number">0</span>-2                 
<span class="token number">3</span> <span class="token number">1</span>-3                 
<span class="token number">4</span> Default             
                      
switch-fallthroughåˆ¤æ–­
<span class="token number">100</span>                   
<span class="token number">200</span>
</code></pre></div><h3 id="æµ‹è¯•åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•åŸºç¡€" aria-hidden="true">#</a> æµ‹è¯•åŸºç¡€</h3>
<table>
<thead>
<tr>
<th>åŠŸèƒ½\å±æ€§</th>
<th>æ–‡ä»¶åè¦æ±‚</th>
<th>å‡½æ•°ç­¾åè¦æ±‚</th>
<th>æ‰§è¡Œå‘½ä»¤</th>
</tr>
</thead>
<tbody>
<tr>
<td>å•å…ƒæµ‹è¯•</td>
<td>æ–‡ä»¶åè¦ä»¥<code v-pre>_test.go</code>ç»“å°¾</td>
<td><code v-pre>TestXX(t *testing.T)</code></td>
<td>æµ‹è¯•å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼š<code v-pre>go test .</code></td>
</tr>
<tr>
<td>æ€§èƒ½æµ‹è¯•</td>
<td>æ–‡ä»¶åè¦ä»¥<code v-pre>_test.go</code>ç»“å°¾</td>
<td><code v-pre>BenchmarkXX(b *testing.B)</code></td>
<td>æµ‹è¯•å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼š<code v-pre>go test -bench . </code></td>
</tr>
</tbody>
</table>
<p><strong>å•å…ƒæµ‹è¯•ä¸¾ä¾‹</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"testing"</span>

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> n1 <span class="token operator">+</span> n2
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">TestAdd</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">int</span> <span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// è¿™é‡Œæ•…æ„å†™é”™</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>
		<span class="token keyword">if</span> ret <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> ret <span class="token operator">!=</span> v<span class="token punctuation">.</span>c <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Add(%d, %d) got %d, expectd %d\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>a<span class="token punctuation">,</span> v<span class="token punctuation">.</span>b<span class="token punctuation">,</span> ret<span class="token punctuation">,</span> v<span class="token punctuation">.</span>c<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token operator">==</span><span class="token operator">=</span> RUN   TestAdd
    a_test.go:19: Add<span class="token punctuation">(</span><span class="token number">6</span>, <span class="token number">7</span><span class="token punctuation">)</span> got <span class="token number">13</span>, expectd <span class="token number">14</span>
--- FAIL: TestAdd <span class="token punctuation">(</span><span class="token number">0</span>.00s<span class="token punctuation">)</span>

FAIL
</code></pre></div><p><strong>æ€§èƒ½æµ‹è¯•ä¸¾ä¾‹</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"testing"</span>

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> n1 <span class="token operator">+</span> n2
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">BenchmarkAdd</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x <span class="token operator">:=</span> <span class="token number">10000</span>
	y <span class="token operator">:=</span> <span class="token operator">-</span><span class="token number">25000</span>
	z <span class="token operator">:=</span> <span class="token operator">-</span><span class="token number">15000</span>

	<span class="token comment">// è¿™é‡Œæ˜¯é‡ç½®æ—¶é—´ï¼Œå¦‚æœä¸Šé¢æœ‰è€—æ—¶åˆå§‹åŒ–çš„è¯å¯ä»¥æ·»åŠ è¿™ä¸€å¥</span>
	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// b.Næ˜¯æ€§èƒ½æµ‹è¯•ä¸ºæˆ‘ä»¬æä¾›çš„è®¡æ•°å™¨</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> v <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> v <span class="token operator">!=</span> z <span class="token punctuation">{</span>
			b<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"Add(%d, %d) got %d, expectd %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> v<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>BenchmarkAdd-8          <span class="token number">1000000000</span>               <span class="token number">0.2460</span> ns/op
PASS
ok      learn   <span class="token number">0</span>.956s
</code></pre></div><h3 id="äº¤å‰ç¼–è¯‘" tabindex="-1"><a class="header-anchor" href="#äº¤å‰ç¼–è¯‘" aria-hidden="true">#</a> äº¤å‰ç¼–è¯‘</h3>
<p>äº¤å‰ç¼–è¯‘ç®€å•æ¥è¯´æŒ‡çš„æ˜¯åœ¨å½“å‰å¹³å°ä¸Šå¯ä»¥ç¼–è¯‘å‡ºå…¶ä»–å¹³å°çš„å¯æ‰§è¡Œç¨‹åºï¼Œæ¯”å¦‚åœ¨Windowsä¸‹ç¼–è¯‘LinuxäºŒè¿›åˆ¶ç¨‹åº</p>
<p>å¯¹äº<code v-pre>go</code>æ¥è¯´ä¸»è¦æ§åˆ¶3ä¸ªå˜é‡ï¼š</p>
<ul>
<li><code v-pre>CGO_ENABLED=0</code>ï¼šGoåœ¨ç¼–è¯‘æ—¶å¯ä»¥é€‰æ‹©ä½¿ç”¨Cé“¾æ¥åº“(Cé“¾æ¥åº“ä¸æ‰“åŒ…è¿›ç¨‹åº)æˆ–çº¯Goç¼–è¯‘(æ‰“åŒ…æ‰€æœ‰å†…å®¹)ï¼Œ<code v-pre>CGO_ENABLED</code>å‚æ•°æ§åˆ¶æ˜¯å¦å¯ç”¨<code v-pre>CGO</code></li>
<li><code v-pre>GOOS=&lt;ç›®æ ‡å¹³å°çš„æ“ä½œç³»ç»Ÿ&gt;</code>ï¼Œæ¯”å¦‚<code v-pre>windows</code>ã€<code v-pre>linux</code>ã€<code v-pre>darwin</code>ã€<code v-pre>freebsd</code></li>
<li><code v-pre>GOARCH=&lt;ç›®æ ‡å¹³å°çš„ä½“ç³»æ¶æ„&gt;</code>ï¼Œæ¯”å¦‚<code v-pre>amd64</code>,<code v-pre>386</code>ã€<code v-pre>arm</code></li>
</ul>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token comment"># Windowsä¸‹ç¼–è¯‘Linuxå’ŒMac64ä½å¯æ‰§è¡Œç¨‹åº</span>
SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64
go build <span class="token builtin class-name">.</span>

SET <span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span>
SET <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin
SET <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64
go build <span class="token builtin class-name">.</span>

<span class="token comment"># Macä¸‹ç¼–è¯‘Linuxå’ŒWindows64ä½å¯æ‰§è¡Œç¨‹åº</span>
<span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>linux   <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span>
<span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span>

<span class="token comment"># Linuxä¸‹ç¼–è¯‘Macå’ŒWindows 64ä½å¯æ‰§è¡Œç¨‹åº</span>
<span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>darwin  <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span>
<span class="token assign-left variable">CGO_ENABLED</span><span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">GOOS</span><span class="token operator">=</span>windows <span class="token assign-left variable">GOARCH</span><span class="token operator">=</span>amd64 go build <span class="token builtin class-name">.</span>
</code></pre></div><h2 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a> </h2>
<h2 id="æ•°æ®ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç±»å‹" aria-hidden="true">#</a> æ•°æ®ç±»å‹</h2>
<h3 id="æ•°å­—" tabindex="-1"><a class="header-anchor" href="#æ•°å­—" aria-hidden="true">#</a> æ•°å­—</h3>
<h4 id="æ•°å­—ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ•°å­—ç±»å‹" aria-hidden="true">#</a> æ•°å­—ç±»å‹</h4>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å…³é”®å­—</th>
</tr>
</thead>
<tbody>
<tr>
<td>æœ‰ç¬¦å·æ•´æ•°</td>
<td><code v-pre>int8</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>int16</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>int32</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>int64</code></td>
</tr>
<tr>
<td>æ— ç¬¦å·æ•´æ•°</td>
<td><code v-pre>uint8</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>uint16</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>uint32</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>uint64</code></td>
</tr>
<tr>
<td>æµ®ç‚¹æ•°</td>
<td><code v-pre>float32</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>float64</code></td>
</tr>
</tbody>
</table>
<h4 id="å„ç±»å‹å–å€¼èŒƒå›´" tabindex="-1"><a class="header-anchor" href="#å„ç±»å‹å–å€¼èŒƒå›´" aria-hidden="true">#</a> å„ç±»å‹å–å€¼èŒƒå›´</h4>
<p>å–å€¼èŒƒå›´è®¡ç®—ï¼š</p>
<p>ï¼ˆ1ï¼‰æœ‰ç¬¦å·æ•´æ•°: -2çš„(n-1)æ¬¡æ–¹ ~ (2çš„(n-1)æ¬¡æ–¹ -1)ï¼Œå› ä¸ºç¬¬ä¸€ä½è¡¨ç¤ºç¬¦å·ä½ï¼Œå®é™…ä½æ•°ä¸ºn-1ï¼ŒåŒæ—¶æ­£æ•°ä¸­0ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥æ­£æ•°å–å€¼èŒƒå›´è¦-1</p>
<p>ï¼ˆ2ï¼‰æ— ç¬¦å·æ•´æ•°: 0 ~ (2çš„næ¬¡æ–¹-1)</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math"</span>
	<span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// è®¡ç®—ç³»ç»Ÿä½æ•°(32 or 64)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰æ“ä½œç³»ç»Ÿä½æ•°: %d\n"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span>IntSize<span class="token punctuation">)</span>

	<span class="token comment">// æœ‰ç¬¦å·æ•´æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næœ‰ç¬¦å·æ•´æ•°"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int8 å–å€¼èŒƒå›´: %20d ~ %-d\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt8<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt8<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int16å–å€¼èŒƒå›´: %20d ~ %-d\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt16<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt16<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int32å–å€¼èŒƒå›´: %20d ~ %-d\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt32<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt32<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int64å–å€¼èŒƒå›´: %20d ~ %-d\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt64<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt64<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int  å–å€¼èŒƒå›´: %20d ~ %-d\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxInt<span class="token punctuation">)</span>

	<span class="token comment">// æ— ç¬¦å·æ•´æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næ— ç¬¦å·æ•´æ•°"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"uint8  å–å€¼èŒƒå›´: %d ~ %-d\n"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint8<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"uint16 å–å€¼èŒƒå›´: %d ~ %-d\n"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint16<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"uint32 å–å€¼èŒƒå›´: %d ~ %-d\n"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxUint32<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"uint64 å–å€¼èŒƒå›´: %d ~ %-d\n"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">uint64</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxUint64<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¿™é‡Œéœ€è¦è½¬ä¸ºuint64</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"uint   å–å€¼èŒƒå›´: %d ~ %-d\n"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">uint64</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>MaxUint<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// è¿™é‡Œéœ€è¦è½¬ä¸ºuint64</span>

	<span class="token comment">// æµ®ç‚¹æ•°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næµ®ç‚¹æ•°"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"float32 å–å€¼èŒƒå›´: %10.1e ~ %-10.1e\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>SmallestNonzeroFloat32<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxFloat32<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"float64 å–å€¼èŒƒå›´: %10.1e ~ %-10.1e\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>SmallestNonzeroFloat64<span class="token punctuation">,</span> math<span class="token punctuation">.</span>MaxFloat64<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>å½“å‰æ“ä½œç³»ç»Ÿä½æ•°: <span class="token number">64</span>

æœ‰ç¬¦å·æ•´æ•°                                               
int8 å–å€¼èŒƒå›´:                 -128 ~ <span class="token number">127</span>                
int16å–å€¼èŒƒå›´:               -32768 ~ <span class="token number">32767</span>              
int32å–å€¼èŒƒå›´:          -2147483648 ~ <span class="token number">2147483647</span>         
int64å–å€¼èŒƒå›´: -9223372036854775808 ~ <span class="token number">9223372036854775807</span>
int  å–å€¼èŒƒå›´: -9223372036854775808 ~ <span class="token number">9223372036854775807</span>
                                                         
æ— ç¬¦å·æ•´æ•°                                               
uint8  å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">255</span>                                 
uint16 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">65535</span>                               
uint32 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">4294967295</span>                          
uint64 å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">18446744073709551615</span>                
uint   å–å€¼èŒƒå›´: <span class="token number">0</span> ~ <span class="token number">18446744073709551615</span>                
                                                         
æµ®ç‚¹æ•°                                                   
float32 å–å€¼èŒƒå›´:    <span class="token number">1</span>.4e-45 ~ <span class="token number">3</span>.4e+38                   
float64 å–å€¼èŒƒå›´:   <span class="token number">4</span>.9e-324 ~ <span class="token number">1</span>.8e+308
</code></pre></div><h4 id="è½¬æ¢æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#è½¬æ¢æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> è½¬æ¢æ³¨æ„äº‹é¡¹</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰§è¡Œæ­£å¸¸,è¿™ä¸ªå®¹æ˜“ç†è§£,å°èŒƒå›´è½¬å¤§èŒƒå›´</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>

	<span class="token comment">// æ‰§è¡ŒæŠ¥é”™,è¿™ä¸ªä¹Ÿå®¹æ˜“ç†è§£,å¤§èŒƒå›´è½¬å°èŒƒå›´,ç›´æ¥æŠ¥é”™</span>
	<span class="token comment">//fmt.Println(int8(int16(0x1234))) // cannot convert int16(0x1234) (constant 4660 of type int16) to type int8</span>

	<span class="token comment">// æ‰§è¡Œæ­£å¸¸, ä½†æ˜¯ç»“æœä¸å¯¹</span>
	i <span class="token operator">:=</span> <span class="token number">0x1234</span>
	x <span class="token operator">:=</span> <span class="token function">int16</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	y <span class="token operator">:=</span> <span class="token function">int8</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#x"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// 0x34,ç»“æœæ˜æ˜¾æœ‰é”™è¯¯,ä¸¢å¤±äº†ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å­—ç¬¦ä¸²ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²ç›¸å…³" aria-hidden="true">#</a> å­—ç¬¦ä¸²ç›¸å…³</h3>
<h4 id="ä¸‰ç§ç±»å‹å£°æ˜" tabindex="-1"><a class="header-anchor" href="#ä¸‰ç§ç±»å‹å£°æ˜" aria-hidden="true">#</a> <strong>ä¸‰ç§ç±»å‹å£°æ˜</strong></h4>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å­—ç¬¦ä¸²å£°æ˜</span>
	<span class="token keyword">var</span> s1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"\"hello\" world!"</span> <span class="token comment">// (1) æ–¹æ³•1ï¼šä½¿ç”¨åŒå¼•å·ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¹ŸåŒ…å«åŒå¼•å·åˆ™éœ€è¦è½¬ä¹‰</span>
	<span class="token keyword">var</span> s2 <span class="token builtin">string</span> <span class="token operator">=</span> `<span class="token string">"hello"</span> world<span class="token operator">!</span>`   <span class="token comment">// (2) æ–¹æ³•2ï¼šä½¿ç”¨åå¼•å·ï¼Œä¸éœ€è¦è½¬ä¹‰ï¼Œæ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span>

	<span class="token comment">// å­—èŠ‚å£°æ˜</span>
	<span class="token keyword">var</span> b1 <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token char">'a'</span>      <span class="token comment">// ä½¿ç”¨å•å¼•å·å£°æ˜</span>
	<span class="token keyword">var</span> b2 <span class="token builtin">uint8</span> <span class="token operator">=</span> <span class="token char">'b'</span>     <span class="token comment">// byteçš„æœ¬è´¨å°±æ˜¯uint8, ä»£è¡¨ä¸€ä¸ªASCIIå­—ç¬¦ï¼Œæ— æ³•è¡¨ç¤ºä¸­æ–‡</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> b1<span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä½¿ç”¨%cæˆ–%qï¼Œä¸èƒ½ä½¿ç”¨%s</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> b2<span class="token punctuation">)</span>

	<span class="token comment">// å­—ç¬¦å£°æ˜</span>
	<span class="token keyword">var</span> r1 <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token char">'ä¸­'</span>  <span class="token comment">// ä½¿ç”¨å•å¼•å·å£°æ˜</span>
	<span class="token keyword">var</span> r2 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token char">'å›½'</span> <span class="token comment">// runeçš„æœ¬è´¨å°±æ˜¯int32, ä»£è¡¨ä¸€ä¸ªUnicodeå­—ç¬¦ï¼Œé™¤äº†èƒ½è¡¨ç¤ºASCIIè¿˜èƒ½è¡¨ç¤ºä¸­æ–‡</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> r1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> r2<span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä½¿ç”¨%cæˆ–%qï¼Œä¸èƒ½ä½¿ç”¨%s</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token string">"hello"</span> world<span class="token operator">!</span>
<span class="token string">"hello"</span> world<span class="token operator">!</span>
a             
<span class="token string">'b'</span>           
ä¸­            
<span class="token string">'å›½'</span>
</code></pre></div><h4 id="å­—ç¬¦ä¸²çš„æœ¬è´¨" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²çš„æœ¬è´¨" aria-hidden="true">#</a> å­—ç¬¦ä¸²çš„æœ¬è´¨</h4>
<p>å­—ç¬¦ä¸²çš„æœ¬è´¨å°±æ˜¯å­—èŠ‚æ•°ç»„</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"unicode/utf8"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å­—ç¬¦ä¸²å®šä¹‰</span>
	s1 <span class="token operator">:=</span> <span class="token string">"åŒ—äº¬æ¬¢è¿ä½ "</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"        å­—ç¬¦ä¸²: %-s\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>

	<span class="token comment">// ------------------------------------------------------------------</span>

	<span class="token comment">// è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// 15</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"  è®¡ç®—å­—èŠ‚é•¿åº¦: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 15</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"  è®¡ç®—runeé•¿åº¦: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"  è®¡ç®—runeé•¿åº¦: %d\n"</span><span class="token punctuation">,</span> utf8<span class="token punctuation">.</span><span class="token function">RuneCountInString</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>
    
	<span class="token comment">// ------------------------------------------------------------------</span>

	<span class="token comment">// æŒ‰ç…§å­—èŠ‚éå† - éå†å‡ºæ¥æ˜¯ä¹±ç </span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"string[%d]=%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æŒ‰ç…§å­—èŠ‚æ•°ç»„éå† - éå†å‡ºæ¥æ˜¯ä¹±ç ï¼Œå’Œä¸Šé¢çš„ç»“æœæ˜¯ä¸€æ ·çš„</span>
	s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"string[%d]=%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// ä½¿ç”¨rangeéå† - ä¸‹æ ‡å…·æœ‰ä¸ç¡®å®šæ€§</span>
	<span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> s1 <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"string[%d]=%c\n"</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// ä½¿ç”¨runeéå† - å®Œç¾</span>
	s3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"string[%d]=%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> s3<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>        å­—ç¬¦ä¸²: åŒ—äº¬æ¬¢è¿ä½ 
è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦: <span class="token number">15</span>
  è®¡ç®—å­—èŠ‚é•¿åº¦: <span class="token number">15</span>
  è®¡ç®—runeé•¿åº¦: <span class="token number">5</span> 
  è®¡ç®—runeé•¿åº¦: <span class="token number">5</span> 

ä¸­é—´ä¹±ç çœç•¥<span class="token punctuation">..</span>.

string<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>åŒ—
string<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>äº¬
string<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span>æ¬¢
string<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">=</span>è¿
string<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token operator">=</span>ä½ 
string<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>åŒ—
string<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>äº¬
string<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span>æ¬¢
string<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span>è¿
string<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span>ä½ 
</code></pre></div><h4 id="stringsåŒ…" tabindex="-1"><a class="header-anchor" href="#stringsåŒ…" aria-hidden="true">#</a> stringsåŒ…</h4>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/strings" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/strings<ExternalLinkIcon/></a></p>
<p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://studygolang.com/static/pkgdoc/pkg/strings.htm" target="_blank" rel="noopener noreferrer">https://studygolang.com/static/pkgdoc/pkg/strings.htm<ExternalLinkIcon/></a></p>
<p>å¸¸ç”¨å‡½æ•°</p>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>å­—ç¬¦ä¸²ç›¸ç­‰</td>
<td><code v-pre>func EqualFold(s, t string) bool</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ª<code v-pre>UTF-8</code>å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¸åŒºåˆ†å¤§å°å†™</td>
</tr>
<tr>
<td>å‰åç¼€åˆ¤æ–­</td>
<td><code v-pre>func HasPrefix(s, prefix string) bool</code></td>
<td>åˆ¤æ–­<code v-pre>s</code>æ˜¯å¦æœ‰å‰ç¼€å­—ç¬¦ä¸²<code v-pre>prefix</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>func HasSuffix(s, suffix string) bool</code></td>
<td>åˆ¤æ–­<code v-pre>s</code>æ˜¯å¦æœ‰åç¼€å­—ç¬¦ä¸²<code v-pre>suffix </code></td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²åŒ…å«</td>
<td><code v-pre>func Contains(s, substr string) bool</code></td>
<td>åˆ¤æ–­å­—ç¬¦ä¸²<code v-pre>s</code>æ˜¯å¦åŒ…å«å­ä¸²<code v-pre>substr</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>func ContainsRune(s string, r rune) bool</code></td>
<td>åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦åŒ…å«<code v-pre>utf-8</code>ç å€¼<code v-pre>r</code></td>
</tr>
<tr>
<td></td>
<td><code v-pre>func ContainsAny(s, chars string) bool</code></td>
<td>åˆ¤æ–­å­—ç¬¦ä¸²sæ˜¯å¦åŒ…å«å­—ç¬¦ä¸²<code v-pre>chars</code>ä¸­çš„ä»»ä¸€å­—ç¬¦</td>
</tr>
<tr>
<td>å¤§å°å†™</td>
<td><code v-pre>func ToLower(s string) string</code></td>
<td>è¿”å›å°†æ‰€æœ‰å­—æ¯éƒ½è½¬ä¸ºå¯¹åº”çš„å°å†™ç‰ˆæœ¬çš„æ‹·è´</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func ToUpper(s string) string</code></td>
<td>è¿”å›å°†æ‰€æœ‰å­—æ¯éƒ½è½¬ä¸ºå¯¹åº”çš„å¤§å†™ç‰ˆæœ¬çš„æ‹·è´</td>
</tr>
<tr>
<td>æ¸…é™¤</td>
<td><code v-pre>func Trim(s string, cutset string) string</code></td>
<td>è¿”å›å°†så‰åç«¯æ‰€æœ‰<code v-pre>cutset</code>åŒ…å«çš„<code v-pre>utf-8</code>ç å€¼éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func TrimSpace(s string) string</code></td>
<td>è¿”å›å°†så‰åç«¯æ‰€æœ‰ç©ºç™½éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func TrimFunc(s string, f func(rune) bool) string</code></td>
<td>è¿”å›å°†så‰åç«¯æ‰€æœ‰æ»¡è¶³<code v-pre>f</code>çš„<code v-pre>unicode</code>ç å€¼éƒ½å»æ‰çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>åˆ†å‰²</td>
<td><code v-pre>func Split(s, sep string) []string</code></td>
<td>ä»¥<code v-pre>sep</code>ä½œä¸ºåˆ†å‰²ç¬¦åˆ†å‰²å­—ç¬¦ä¸²ç›´æ¥æœ«å°¾ï¼Œ<br />å¦‚æœ<code v-pre>sep</code>ä¸ºç©ºåˆ™è¿”å›æ¯ä¸ª<code v-pre>Unicode</code>ç ç‚¹</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func SplitN(s, sep string, n int) []string</code></td>
<td>åŒ<code v-pre>Split</code>ï¼Œå‚æ•°<code v-pre>n</code>å†³å®šè¿”å›çš„åˆ‡ç‰‡çš„æ•°ç›®<br /><code v-pre>n</code> == 0ï¼Œè¿”å›<code v-pre>nil</code>ï¼ˆç©ºåˆ‡ç‰‡é›¶å€¼ï¼‰<br /><code v-pre>n</code> &gt; 0 è¿”å›çš„åˆ‡ç‰‡æœ€å¤šnä¸ªå­å­—ç¬¦ä¸²ï¼›æœ€åä¸€ä¸ªå­å­—ç¬¦ä¸²åŒ…å«æœªè¿›è¡Œåˆ‡å‰²çš„éƒ¨åˆ†<br /><code v-pre>n</code> &lt; 0 : è¿”å›æ‰€æœ‰çš„å­å­—ç¬¦ä¸²ç»„æˆçš„åˆ‡ç‰‡</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func SplitAfter(s, sep string) []string</code></td>
<td>åŒ<code v-pre>Split</code>ï¼Œåªæ˜¯ä¼šä¿ç•™åˆ†éš”ç¬¦</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>è¿æ¥</td>
<td><code v-pre>func Join(a []string, sep string) string</code></td>
<td>å°†ä¸€ç³»åˆ—å­—ç¬¦ä¸²è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹‹é—´ç”¨sepæ¥åˆ†éš”</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"strings"</span>
	<span class="token string">"unicode"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">"go"</span><span class="token punctuation">,</span> <span class="token string">"GO"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true, ä¸åŒºåˆ†å¤§å°å†™</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"go"</span> <span class="token operator">==</span> <span class="token string">"GO"</span><span class="token punctuation">)</span>                  <span class="token comment">// false, åŒºåˆ†å¤§å°å†™</span>

	<span class="token comment">// å­—ç¬¦ä¸²å‰åç¼€åŒ¹é…</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nå­—ç¬¦ä¸²å‰åç¼€åŒ¹é…"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"he"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">" he"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å­—ç¬¦ä¸²åŒ…å«åŒ¹é…</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nå­—ç¬¦ä¸²åŒ…å«åŒ¹é…"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"ell"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ContainsRune</span><span class="token punctuation">(</span><span class="token string">"ä¸­åäººæ°‘å…±å’Œå›½"</span><span class="token punctuation">,</span> <span class="token char">'äºº'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ContainsAny</span><span class="token punctuation">(</span><span class="token string">"ä¸­åäººæ°‘å…±å’Œå›½"</span><span class="token punctuation">,</span> <span class="token string">"ä½ æ˜¯å“ªé‡Œçš„äººå•Šï¼Ÿ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å¤§å°å†™è½¬æ¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nå¤§å°å†™è½¬æ¢"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// hello</span>

	<span class="token comment">// æ¸…é™¤</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næ¸…é™¤"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">,</span> <span class="token string">"l!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                       <span class="token comment">// hello world, !è¢«æ¸…é™¤äº†ï¼Œè¯´æ˜å¹¶æ²¡æœ‰å°†l!ä½œä¸ºä¸€ä¸ªæ•´ä½“</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token string">"@!hello world!"</span><span class="token punctuation">,</span> <span class="token string">"!@"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                     <span class="token comment">// hello world, å†æ¬¡æµ‹è¯•ä¸€ä¸‹ï¼ŒéªŒè¯æˆåŠŸ</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token string">" 	hello world "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                      <span class="token comment">// æ¸…é™¤ä¸¤ä¾§çš„ç©ºç™½</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">TrimFunc</span><span class="token punctuation">(</span><span class="token string">" hello world HAHA"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span> <span class="token comment">// æ¸…é™¤ä¸¤ä¾§çš„ç©ºç™½å’Œå¤§å†™å­—æ¯</span>
		<span class="token keyword">return</span> unicode<span class="token punctuation">.</span><span class="token function">IsSpace</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">||</span> unicode<span class="token punctuation">.</span><span class="token function">IsUpper</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// åˆ†å‰²</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nåˆ†å‰²"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">"a,b,c"</span><span class="token punctuation">,</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// ["a" "b" "c"]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">"aab"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// ["" "" "b"]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">"a b c"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// ["a" " " "b" " " "c"]</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span><span class="token string">"a b c"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// å‚æ•°nå†³å®šè¿”å›çš„åˆ‡ç‰‡çš„æ•°ç›®</span>

	<span class="token comment">// è¿æ¥</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nè¿æ¥"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">,</span> <span class="token string">"!"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>å­—ç¬¦ä¸²ç›¸ç­‰åˆ¤æ–­
<span class="token boolean">true</span>            
<span class="token boolean">false</span>           
                
å­—ç¬¦ä¸²å‰åç¼€åŒ¹é…
<span class="token boolean">true</span>            
<span class="token boolean">false</span>           
                
å­—ç¬¦ä¸²åŒ…å«åŒ¹é…  
<span class="token boolean">true</span>            
<span class="token boolean">true</span>            
<span class="token boolean">true</span>            
                
å¤§å°å†™è½¬æ¢      
hello           
                
æ¸…é™¤            
hello world     
hello world     
hello world     
hello world     
                
åˆ†å‰²            
<span class="token punctuation">[</span><span class="token string">"a"</span> <span class="token string">"b"</span> <span class="token string">"c"</span><span class="token punctuation">]</span>   
<span class="token punctuation">[</span><span class="token string">""</span> <span class="token string">""</span> <span class="token string">"b"</span><span class="token punctuation">]</span>     
<span class="token punctuation">[</span><span class="token string">"a"</span> <span class="token string">" "</span> <span class="token string">"b"</span> <span class="token string">" "</span> <span class="token string">"c"</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token string">"a b c"</span><span class="token punctuation">]</span>

è¿æ¥
hello world <span class="token operator">!</span>
</code></pre></div><h4 id="bytesåŒ…" tabindex="-1"><a class="header-anchor" href="#bytesåŒ…" aria-hidden="true">#</a> bytesåŒ…</h4>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/bytes" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/bytes<ExternalLinkIcon/></a></p>
<p>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://studygolang.com/static/pkgdoc/pkg/bytes.htm" target="_blank" rel="noopener noreferrer">https://studygolang.com/static/pkgdoc/pkg/bytes.htm<ExternalLinkIcon/></a></p>
<p>bytesåŒ…å®ç°äº†æ“ä½œ<code v-pre>[]byte</code>çš„å¸¸ç”¨å‡½æ•°ï¼Œä¸<code v-pre>string</code>åŒ…å‡½æ•°ç±»ä¼¼ï¼Œç®€å•ä»‹ç»å‡ ä¸ªæ–¹æ³•</p>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç›¸ç­‰åˆ¤æ–­</td>
<td><code v-pre>func Equal(a, b []byte) bool</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªåˆ‡ç‰‡çš„å†…å®¹æ˜¯å¦å®Œå…¨ç›¸åŒ</td>
</tr>
<tr>
<td></td>
<td><code v-pre>func EqualFold(s, t []byte) bool</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ª<code v-pre>utf-8</code>ç¼–ç åˆ‡ç‰‡ï¼ˆå°†unicodeå¤§å†™ã€å°å†™ã€æ ‡é¢˜ä¸‰ç§æ ¼å¼å­—ç¬¦è§†ä¸ºç›¸åŒï¼‰æ˜¯å¦ç›¸åŒ</td>
</tr>
<tr>
<td>è½¬æ¢</td>
<td><code v-pre>func Runes(s []byte) []rune</code></td>
<td>è¿”å›å’Œsç­‰ä»·çš„[]runeåˆ‡ç‰‡</td>
</tr>
</tbody>
</table>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bytes"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å­—èŠ‚åˆ‡ç‰‡ç›¸ç­‰åˆ¤æ–­</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å­—èŠ‚åˆ‡ç‰‡ç›¸ç­‰åˆ¤æ–­"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// å®Œå…¨ç›¸ç­‰</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bytes<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ä¸åŒºåˆ†å¤§å°å†™</span>

	<span class="token comment">// è½¬æ¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nè½¬æ¢"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">Runes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// true</span>
<span class="token comment">// true       </span>
<span class="token comment">// ['ä½ ' 'å¥½']</span>
</code></pre></div><h4 id="unicodeç³»åˆ—" tabindex="-1"><a class="header-anchor" href="#unicodeç³»åˆ—" aria-hidden="true">#</a> unicodeç³»åˆ—</h4>
<p><code v-pre>unicode</code>åŒ…åŒ…å«åŸºæœ¬çš„å­—ç¬¦åˆ¤æ–­å‡½æ•°ã€‚</p>
<p><code v-pre>utf8</code>åŒ…ä¸»è¦è´Ÿè´£<code v-pre>rune</code>å’Œ<code v-pre>byte</code>ä¹‹é—´çš„è½¬æ¢ã€‚</p>
<p><code v-pre>utf16</code>åŒ…è´Ÿè´£<code v-pre>rune</code>å’Œ<code v-pre>uint16</code>æ•°ç»„ä¹‹é—´çš„è½¬æ¢</p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p><code v-pre>unicode</code>ï¼š<a href="https://pkg.go.dev/unicode" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode<ExternalLinkIcon/></a></p>
<p><code v-pre>unicode/utf8</code>ï¼š<a href="https://pkg.go.dev/unicode/utf8" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode/utf8<ExternalLinkIcon/></a></p>
<p><code v-pre>unicode/utf16</code>ï¼š<a href="https://pkg.go.dev/unicode/utf16" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/unicode/utf16<ExternalLinkIcon/></a></p>
<table>
<thead>
<tr>
<th>åŒ…å</th>
<th>åˆ†ç±»</th>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>unicode</code></td>
<td>å­—ç¬¦åˆ¤æ–­</td>
<td><code v-pre>func Is(rangeTab *RangeTable, r rune) bool</code></td>
<td>åˆ¤æ–­<code v-pre>r</code>æ˜¯å¦åœ¨<code v-pre>RangeTable</code>å†…</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsSpace(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯ç©ºç™½å­—ç¬¦ï¼ˆç©ºå­—ç¬¦ä¸²ä¼šæŠ¥é”™ï¼‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsDigit(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯åè¿›åˆ¶æ•°å­—</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsNumber(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯æ•°å­—</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsLetter(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯å­—æ¯</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsLower(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯å°å†™å­—æ¯</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func IsUpper(r rune) bool</code></td>
<td>æ˜¯å¦æ˜¯å¤§å†™å­—æ¯</td>
</tr>
<tr>
<td></td>
<td>è½¬æ¢</td>
<td><code v-pre>func ToLower(r rune) rune</code></td>
<td>è¿”å›å¯¹åº”çš„å°å†™å­—ç¬¦</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func ToUpper(r rune) rune</code></td>
<td>è¿”å›å¯¹åº”çš„å°å†™å­—ç¬¦</td>
</tr>
<tr>
<td><code v-pre>unicode/utf8</code></td>
<td>bytesè½¬rune</td>
<td><code v-pre>func DecodeRune(p []byte) (r rune, size int)</code></td>
<td>è§£ç  []byteä¸­<strong>ç¬¬ä¸€ä¸ª</strong><code v-pre>UTF-8</code> ç¼–ç åºåˆ—ï¼Œè¿”å›è¯¥ç å€¼å’Œé•¿åº¦</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func DecodeLastRune(p []byte) (r rune, size int)</code></td>
<td>åŒ<code v-pre>DecodeRune</code>ï¼Œæ˜¯æœ€åä¸€ä¸ª<code v-pre>UTF-8</code> ç¼–ç åºåˆ—</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func DecodeRuneInString(s string) (r rune, size int)</code></td>
<td>åŒ<code v-pre>DecodeRune</code>ï¼Œä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func DecodeLastRuneInString(s string) (r rune, size int)</code></td>
<td>åŒ<code v-pre>DecodeRune</code>ï¼Œä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²ï¼Œæ˜¯æœ€åä¸€ä¸ª<code v-pre>UTF-8</code> ç¼–ç åºåˆ—</td>
</tr>
<tr>
<td></td>
<td>runeè½¬bytes</td>
<td><code v-pre>func EncodeRune(p []byte, r rune) int</code></td>
<td>å°† runeçš„<code v-pre>UTF-8 </code>ç¼–ç åºåˆ—å†™å…¥<code v-pre>[]byte</code>ï¼Œå¹¶è¿”å›å†™å…¥çš„å­—èŠ‚æ•°ã€‚péœ€è¦æ»¡è¶³è¶³å¤Ÿçš„é•¿åº¦</td>
</tr>
<tr>
<td></td>
<td>æ£€æµ‹</td>
<td><code v-pre>func FullRune(p []byte) bool</code></td>
<td>æ£€æµ‹<code v-pre>[]byte</code>æ˜¯å¦åŒ…å«ä¸€ä¸ªå®Œæ•´ <code v-pre>UTF-8</code>ç¼–ç ï¼ˆåªè¦åŒ…å«ä¸€ä¸ªå°±è¿”å›trueï¼‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func FullRuneInString(s string) bool</code></td>
<td>åŒä¸Šï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func RuneStart(b byte) bool</code></td>
<td>æ£€æµ‹å­—èŠ‚ byte b æ˜¯å¦å¯ä»¥ä½œä¸ºæŸä¸ª rune ç¼–ç çš„ç¬¬ä¸€ä¸ªå­—èŠ‚</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func Valid(p []byte) bool</code></td>
<td>æ£€æµ‹åˆ‡ç‰‡<code v-pre>[]byte</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code v-pre>UTF-8</code>ç¼–ç åºåˆ—ï¼ˆä¸èƒ½æœ‰ä¹±ç ï¼‰</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func ValidRune(r rune) bool</code></td>
<td>æ£€æµ‹å­—ç¬¦<code v-pre>rune</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code v-pre>UTF-8</code>ç¼–ç åºåˆ—</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func ValidString(s string) bool</code></td>
<td>æ£€æµ‹å­—ç¬¦ä¸²<code v-pre>string</code>æ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„<code v-pre>UTF-8</code>ç¼–ç åºåˆ—</td>
</tr>
<tr>
<td></td>
<td>ç»Ÿè®¡</td>
<td><code v-pre>func RuneCount(p []byte) int</code></td>
<td>ç»Ÿè®¡<code v-pre>[]byte</code>ä¸­<code v-pre>rune</code>çš„ä¸ªæ•°</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func RuneCountInString(s string) (n int)</code></td>
<td>åŒä¸Šï¼Œè¾“å…¥æ˜¯å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func RuneLen(r rune) int</code></td>
<td>ç»Ÿè®¡<code v-pre>rune</code>ç¼–ç åçš„å­—èŠ‚æ•°</td>
</tr>
<tr>
<td><code v-pre>unicode/utf16</code></td>
<td>è½¬æ¢</td>
<td><code v-pre>func Encode(s []rune) []uint16</code></td>
<td>ç¼–ç <code v-pre>rune</code>æ•°ç»„ä¸º<code v-pre>uint16</code>æ•°ç»„</td>
</tr>
<tr>
<td></td>
<td></td>
<td><code v-pre>func Decode(s []uint16) []rune</code></td>
<td>è§£ç <code v-pre>uint16</code>æ•°ç»„ä¸º<code v-pre>rune</code>æ•°ç»„</td>
</tr>
</tbody>
</table>
<blockquote>
<p>ç¼–ç ï¼šå­—ç¬¦ä¸² -&gt; bytesï¼Œ rune -&gt; bytes</p>
<p>è§£ç ï¼šbytes -&gt; runeï¼Œ bytes -&gt; å­—ç¬¦ä¸²</p>
</blockquote>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"unicode"</span>
	<span class="token string">"unicode/utf16"</span>
	<span class="token string">"unicode/utf8"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// unicodeåŒ… - åˆ¤æ–­</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"unicodeåŒ… - åˆ¤æ–­"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span>Scripts<span class="token punctuation">[</span><span class="token string">"Han"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token char">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æ±‰å­—</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">Is</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span>Scripts<span class="token punctuation">[</span><span class="token string">"Han"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token char">'ä¸­'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unicode<span class="token punctuation">.</span><span class="token function">IsSpace</span><span class="token punctuation">(</span><span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">// unicodeåŒ… - è½¬æ¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nunicodeåŒ… - è½¬æ¢"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> unicode<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> unicode<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token char">'ä¸­'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// unicode/utf8 - bytesè½¬rune</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nunicode/utf8 -bytesè½¬rune"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeRune</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// è§£ç ç¬¬ä¸€ä¸ªï¼Œ20320 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> <span class="token number">20320</span><span class="token punctuation">)</span>                      <span class="token comment">// ä½ </span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeLastRune</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è§£ç æœ€åä¸€ä¸ªï¼Œ22909 3</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> <span class="token number">22909</span><span class="token punctuation">)</span>                      <span class="token comment">// å¥½</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeRuneInString</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">DecodeLastRuneInString</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// unicode/utf8 - runeè½¬bytes</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nunicode/utf8 - runeè½¬bytes"</span><span class="token punctuation">)</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">EncodeRune</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token char">'ä¸–'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">)</span> <span class="token comment">// []byte{0xe4, 0xb8, 0x96}</span>

	<span class="token comment">// unicode/utf8 - æ£€æµ‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\nunicode/utf8 - æ£€æµ‹"</span><span class="token punctuation">)</span>
	buf2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">}</span>           <span class="token comment">// ä¸–</span>
	buf3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">228</span><span class="token punctuation">,</span> <span class="token number">184</span><span class="token punctuation">}</span> <span class="token comment">// åœ¨buf2çš„åŸºç¡€ä¸Šå†åŠ ä¸Šä¸¤ä¸ªå­—èŠ‚, ä¸–\xe4\xb8</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// true</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// true</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">FullRune</span><span class="token punctuation">(</span>buf2<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> buf3<span class="token punctuation">)</span>

	<span class="token comment">// unicode/utf16 - runeä¸uint16è½¬æ¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> utf16<span class="token punctuation">.</span><span class="token function">Encode</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token string">"ä½ å¥½"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// []uint16{0x4f60, 0x597d}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> utf16<span class="token punctuation">.</span><span class="token function">Decode</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint16</span><span class="token punctuation">{</span><span class="token number">0x4f60</span><span class="token punctuation">,</span> <span class="token number">0x597d</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ['ä½ ' 'å¥½']</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<blockquote>
<p>utf8ç¼–ç ä¸‹ï¼Œè‹±æ–‡å 1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—å 3ä¸ªå­—èŠ‚ï¼›</p>
<p>utf16ç¼–ç ä¸‹ï¼Œè‹±æ–‡å 1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—å 1ä¸ªå­—èŠ‚</p>
</blockquote>
<h3 id="å¸ƒå°”å€¼" tabindex="-1"><a class="header-anchor" href="#å¸ƒå°”å€¼" aria-hidden="true">#</a> å¸ƒå°”å€¼</h3>
<p>å¸ƒå°”å€¼çš„é›¶å€¼æ˜¯<code v-pre>false</code>ï¼Œå¸ƒå°”å€¼æ— æ³•éšå¼è½¬æ¢ä¸ºæ•°å€¼(1æˆ–0)</p>
<h3 id="æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„" aria-hidden="true">#</a> æ•°ç»„</h3>
<p>æ•°ç»„çš„ç‰¹ç‚¹</p>
<ul>
<li>æ•°ç»„ä¸€æ—¦å®šä¹‰ï¼Œå…ƒç´ ä¸ªæ•°ä¸å¯æ”¹å˜ï¼Œå³ä¸èƒ½å¢åŠ æˆ–åˆ é™¤å…ƒç´ ï¼›å¯ä»¥æ”¹å…ƒç´ çš„å€¼</li>
<li>å…ƒç´ æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´</li>
<li>ç›¸åŒæ•°æ®ç±»å‹ã€é•¿åº¦å›ºå®šçš„åºåˆ—æ‰æ˜¯ä¸€æ ·çš„ï¼Œå³<code v-pre>[2]int</code>å’Œ<code v-pre>[3]int</code>æ˜¯ä¸åŒ</li>
<li>æ•°ç»„çš„é›¶å€¼æ˜¯å…ƒç´ æ•°æ®ç±»å‹çš„é›¶å€¼</li>
<li>æ²¡æœ‰&quot;ç©ºæ•°ç»„&quot;çš„è¯´æ³•</li>
<li>æ•°ç»„æ˜¯å€¼ç±»å‹</li>
</ul>
<h4 id="å£°æ˜" tabindex="-1"><a class="header-anchor" href="#å£°æ˜" aria-hidden="true">#</a> å£°æ˜</h4>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>                   <span class="token comment">// å£°æ˜æ•°ç»„ï¼›3ä»£è¡¨æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼ˆå¿…é¡»æŒ‡å®šï¼‰ï¼›æœªèµ‹å€¼åˆ™é»˜è®¤ä½¿ç”¨é›¶å€¼ï¼Œè¿™é‡Œæ˜¯0</span>
	<span class="token keyword">var</span> a2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span> <span class="token comment">// å£°æ˜å¹¶èµ‹å€¼</span>
	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>           <span class="token comment">// çŸ­å˜é‡å£°æ˜</span>
	a4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">}</span>      <span class="token comment">//ä½¿ç”¨...åæ•°ç»„é•¿åº¦ä¼šè‡ªåŠ¨åˆ¤æ–­ï¼›...åªèƒ½ç”¨åœ¨å€¼çš„ä½ç½®ä¸Šä¸å¯ä»¥ç”¨åœ¨ç±»å‹çš„ä½ç½®ä¸Š</span>
	a5 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>           <span class="token comment">// ç´¢å¼•1çš„ä½ç½®æ•°æ®æ˜¯-1ï¼Œå…¶ä»–ä½ç½®æ˜¯é›¶å€¼</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a3<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a4<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a5<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span><span class="token punctuation">}</span>   
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">7</span>, <span class="token number">8</span>, <span class="token number">9</span><span class="token punctuation">}</span>   
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">10</span>, <span class="token number">11</span>, <span class="token number">12</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span>, -1<span class="token punctuation">}</span>   
</code></pre></div><h4 id="åŸºæœ¬æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h4>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">}</span>

	<span class="token comment">// éå†</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> a <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æˆªå–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// ç´¢å¼•0-2ï¼Œæ³¨æ„ä¸æ”¯æŒ[:-2]è¿™ç§è´Ÿæ•°è¡¨ç¤ºæ–¹æ³•</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">10</span>
<span class="token number">11</span>        
<span class="token number">12</span>        
<span class="token number">13</span>        
<span class="token number">14</span>        
<span class="token number">15</span>        
<span class="token number">10</span>        
<span class="token number">11</span>        
<span class="token number">12</span>        
<span class="token number">13</span>        
<span class="token number">14</span>        
<span class="token number">15</span>        
<span class="token punctuation">[</span><span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span><span class="token punctuation">]</span>
</code></pre></div><h4 id="å¤šç»´æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#å¤šç»´æ•°ç»„" aria-hidden="true">#</a> å¤šç»´æ•°ç»„</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// äºŒç»´æ•°ç»„</span>
	a2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span> <span class="token comment">// [[0 0 0] [0 0 0]]</span>

	<span class="token comment">// ä¸‰ç»´æ•°ç»„</span>
	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a3<span class="token punctuation">)</span>
	<span class="token comment">/*
	   [                            ç¬¬ä¸€ä¸ªæ•°ç»„ä¸ºé•¿åº¦ä¸º1çš„æ•°ç»„
	      [                         ç¬¬ä¸€ä¸ªæ•°ç»„çš„ç¬¬1ä¸ªå…ƒç´ ä¸ºå¦ä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„
	         [0 0 0] [0 0 0]        æ¯ä¸ªæ•°ç»„æœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º3çš„æ•°ç»„
	      ]
	   ]

	*/</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åˆ‡ç‰‡" tabindex="-1"><a class="header-anchor" href="#åˆ‡ç‰‡" aria-hidden="true">#</a> åˆ‡ç‰‡</h3>
<p>åˆ‡ç‰‡æ˜¯é•¿åº¦å¯å˜çš„æ•°ç»„ï¼Œåˆ‡ç‰‡çš„ç‰¹ç‚¹</p>
<ul>
<li>
<p>å¯ä»¥åŠ¨æ€æ·»åŠ åˆ é™¤å…ƒç´ </p>
</li>
<li>
<p>æ‰€æœ‰å…ƒç´ æ•°æ®ç±»å‹ä¹Ÿå¿…é¡»æ˜¯ä¸€æ ·</p>
</li>
<li>
<p>åˆ‡ç‰‡çš„é›¶å€¼æ˜¯<code v-pre>nil</code></p>
</li>
<li>
<p>åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹</p>
</li>
</ul>
<p>åˆ‡ç‰‡ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>æŒ‡é’ˆï¼šå­˜æ”¾åº•å±‚æ•°ç»„çš„å†…å­˜åœ°å€</li>
<li>é•¿åº¦ï¼šæŒ‡çš„æ˜¯åˆ‡ç‰‡çš„å…ƒç´ ä¸ªæ•°ï¼Œä½¿ç”¨<code v-pre>len(åˆ‡ç‰‡)</code>è¾“å‡ºé•¿åº¦</li>
<li>å®¹é‡ï¼šåº•å±‚æ•°ç»„çš„é•¿åº¦ï¼Œä½¿ç”¨<code v-pre>cap(åˆ‡ç‰‡)</code>è¾“å‡ºå®¹é‡å¤§å°</li>
</ul>
<h4 id="å£°æ˜-1" tabindex="-1"><a class="header-anchor" href="#å£°æ˜-1" aria-hidden="true">#</a> å£°æ˜</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜æ–¹å¼1ï¼šä¸æ•°ç»„ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ä¸éœ€è¦æŒ‡å®šå…ƒç´ ä¸ªæ•°</span>
	<span class="token keyword">var</span> s1 <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>  <span class="token comment">// åªå£°æ˜ï¼Œé»˜è®¤ä¸ºé›¶å€¼ï¼Œå³nil</span>
	s2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ç©ºåˆ‡ç‰‡</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> s2<span class="token punctuation">)</span>

	<span class="token comment">// å£°æ˜æ–¹å¼2ï¼šä½¿ç”¨make</span>
	s3 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//å£°æ˜ä¸€ä¸ªintç±»å‹çš„åˆ‡ç‰‡,é•¿åº¦ä¸º1ï¼Œå®¹é‡ä¸º2ï¼›å¦‚æœå®¹é‡ä¸æŒ‡å®šï¼Œé‚£ä¹ˆå®¹é‡ç­‰åŒäºé•¿åº¦</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> s3<span class="token punctuation">)</span>

	<span class="token comment">// æŸ¥çœ‹é•¿åº¦å’Œå®¹é‡</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token punctuation">}</span> 
<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span>
<span class="token number">0</span> <span class="token number">0</span> <span class="token number">1</span>   
<span class="token number">0</span> <span class="token number">0</span> <span class="token number">2</span>   
</code></pre></div><h4 id="åŸºæœ¬æ“ä½œ-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ-1" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h4>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bytes"</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">EqualStringSlice</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	length <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	<span class="token keyword">if</span> length <span class="token operator">!=</span> <span class="token function">len</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹æ•°æ®ï¼š%#v\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>

	<span class="token comment">// æ·»åŠ å…ƒç´ </span>
	s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token char">'8'</span><span class="token punctuation">,</span> <span class="token char">'ä¸­'</span><span class="token punctuation">)</span> <span class="token comment">// å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªï¼Œ '8'å’Œ'ä¸­'è™½ç„¶ä¸ºruneï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯intç±»å‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ·»åŠ å…ƒç´ ï¼š%#v\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>    <span class="token comment">// []int{1, 2, 3, 4, 5, 6, 7, 56, 20013}</span>

	<span class="token comment">// åˆ é™¤å…ƒç´ </span>
	s1 <span class="token operator">=</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">]</span>                 <span class="token comment">// åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å…ƒç´ (ç¬¬ä¸€ä¸ª)ï¼š%#v\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span>  <span class="token comment">//</span>
	s1 <span class="token operator">=</span> s1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                <span class="token comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åˆ é™¤å…ƒç´ (æœ€åä¸€ä¸ª)ï¼š%#v\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">)</span> <span class="token comment">//</span>

	<span class="token comment">// åˆ‡ç‰‡æµ…æ‹·è´</span>
	s2 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment">// æµ…æ‹·è´</span>
	s3 <span class="token operator">:=</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// æµ…æ‹·è´</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨[:]æµ…æ‹·è´ï¼š%p &lt;---> %p\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨[:]æµ…æ‹·è´ï¼š%p &lt;---> %p\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> s3<span class="token punctuation">)</span>

	<span class="token comment">// åˆ‡ç‰‡æ·±æ‹·è´</span>
	s4 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>s4<span class="token punctuation">,</span> s1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ä½¿ç”¨copyæ·±æ‹·è´ï¼š%p &lt;---> %p\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s4<span class="token punctuation">)</span> <span class="token comment">// æ·±æ‹·è´æ–¹å¼1</span>
	s5 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> s1 <span class="token punctuation">{</span>
		s5 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s5<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"éå†æ–¹å¼ï¼š%p &lt;---> %p\n"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s5<span class="token punctuation">)</span> <span class="token comment">// æ·±æ‹·è´æ–¹å¼2</span>

	<span class="token comment">// è§£åŒ…ï¼šåˆ‡ç‰‡...</span>
	s6 <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s1<span class="token operator">...</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è§£åŒ…ç”¨æ³•ç¤ºä¾‹ï¼š%#v\n"</span><span class="token punctuation">,</span> s6<span class="token punctuation">)</span> <span class="token comment">//</span>

	<span class="token comment">// åˆ‡ç‰‡æ¯”è¾ƒ - byteåˆ‡ç‰‡ä½¿ç”¨æä¾›çš„å‡½æ•°æ¯”è¾ƒ</span>
	a1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">253</span><span class="token punctuation">}</span>
	a2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">uint8</span><span class="token punctuation">{</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">115</span><span class="token punctuation">,</span> <span class="token number">253</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"[]byteåˆ‡ç‰‡æ¯”è¾ƒ: %t\n"</span><span class="token punctuation">,</span> bytes<span class="token punctuation">.</span><span class="token function">Equal</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// åˆ‡ç‰‡æ¯”è¾ƒ - ébyteç±»å‹</span>
	a3 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">}</span>
	a4 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"[]stringåˆ‡ç‰‡æ¯”è¾ƒ: %t\n"</span><span class="token punctuation">,</span> <span class="token function">EqualStringSlice</span><span class="token punctuation">(</span>a3<span class="token punctuation">,</span> a4<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>åŸå§‹æ•°æ®ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span><span class="token punctuation">}</span>
æ·»åŠ å…ƒç´ ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">20013</span><span class="token punctuation">}</span>        
åˆ é™¤å…ƒç´ <span class="token punctuation">(</span>ç¬¬ä¸€ä¸ª<span class="token punctuation">)</span>ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">20013</span><span class="token punctuation">}</span>   
åˆ é™¤å…ƒç´ <span class="token punctuation">(</span>æœ€åä¸€ä¸ª<span class="token punctuation">)</span>ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span><span class="token punctuation">}</span>        
ä½¿ç”¨<span class="token punctuation">[</span>:<span class="token punctuation">]</span>æµ…æ‹·è´ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">></span> 0xc00012e0f8         
ä½¿ç”¨<span class="token punctuation">[</span>:<span class="token punctuation">]</span>æµ…æ‹·è´ï¼š0xc00012e100 <span class="token operator">&lt;</span>---<span class="token operator">></span> 0xc00012e100         
ä½¿ç”¨copyæ·±æ‹·è´ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">></span> 0xc00012e190        
éå†æ–¹å¼ï¼š0xc00012e0f8 <span class="token operator">&lt;</span>---<span class="token operator">></span> 0xc000156000              
è§£åŒ…ç”¨æ³•ç¤ºä¾‹ï¼š<span class="token punctuation">[</span><span class="token punctuation">]</span>int<span class="token punctuation">{</span><span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span>, <span class="token number">7</span>, <span class="token number">56</span><span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>byteåˆ‡ç‰‡æ¯”è¾ƒ: <span class="token boolean">true</span>                                   
<span class="token punctuation">[</span><span class="token punctuation">]</span>stringåˆ‡ç‰‡æ¯”è¾ƒ: <span class="token boolean">true</span>
</code></pre></div><h4 id="å®¹é‡æ‰©å®¹æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#å®¹é‡æ‰©å®¹æœºåˆ¶" aria-hidden="true">#</a> å®¹é‡æ‰©å®¹æœºåˆ¶</h4>
<p>å½“<strong>é•¿åº¦==å®¹é‡</strong>æ—¶ï¼Œå†<code v-pre>append()</code>æ’å…¥å…ƒç´ ï¼Œgoä¼šé‡æ–°ç”³è¯·ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œå°†åŸæ•°æ®æ•°æ®æ‹·è´è¿‡å»ï¼Œä¿®æ”¹åˆ‡ç‰‡æŒ‡é’ˆï¼Œå†ç”¨æ¥å­˜æ”¾æˆ‘ä»¬æ’å…¥çš„æ•°æ®</p>
<p>ä¸¤ä¸ªå¹¶ä¸å‡†ç¡®çš„ç»“è®ºï¼š</p>
<ul>
<li>å½“åŸåˆ‡ç‰‡é•¿åº¦å°äº1024æ—¶ï¼Œæ–°åˆ‡ç‰‡çš„å®¹é‡ä¼šç›´æ¥ç¿»å€</li>
<li>å½“åŸåˆ‡ç‰‡çš„å®¹é‡å¤§äºç­‰äº1024æ—¶ï¼Œä¼šåå¤åœ°å¢åŠ 25%ï¼Œç›´åˆ°æ–°å®¹é‡è¶…è¿‡æ‰€éœ€è¦çš„å®¹é‡</li>
</ul>
<p><strong>æµ‹è¯•1ï¼šå¯ä»¥çœ‹åˆ°æ˜¯ç¿»å€çš„</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å®šä¹‰åˆ‡ç‰‡</span>
	s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å¾ªç¯æ·»åŠ å…ƒç´ </span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">18</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è¾“å‡ºç»“æœ</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  0 | å½“å‰å®¹é‡:  0</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  1 | å½“å‰å®¹é‡:  1</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  2 | å½“å‰å®¹é‡:  2</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  3 | å½“å‰å®¹é‡:  4</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  4 | å½“å‰å®¹é‡:  4</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  5 | å½“å‰å®¹é‡:  8</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  6 | å½“å‰å®¹é‡:  8</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  7 | å½“å‰å®¹é‡:  8</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  8 | å½“å‰å®¹é‡:  8</span>
	<span class="token comment">//å½“å‰é•¿åº¦:  9 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 10 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 11 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 12 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 13 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 14 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 15 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 16 | å½“å‰å®¹é‡: 16</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 17 | å½“å‰å®¹é‡: 32</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 18 | å½“å‰å®¹é‡: 32</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 19 | å½“å‰å®¹é‡: 32</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p><strong>æµ‹è¯•2ï¼šå¯ä»¥çœ‹åˆ°å¹¶ä¸æ˜¯25%</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å®šä¹‰åˆ‡ç‰‡</span>
	s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å¾ªç¯æ·»åŠ å…ƒç´ </span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰é•¿åº¦: %2d | å½“å‰å®¹é‡: %2d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è¾“å‡ºç»“æœ</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2000 | å½“å‰å®¹é‡: 2000</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2001 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2002 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2003 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2004 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2005 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2006 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2007 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2008 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2009 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2010 | å½“å‰å®¹é‡: 2720</span>
	<span class="token comment">//å½“å‰é•¿åº¦: 2011 | å½“å‰å®¹é‡: 2720</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>ä¸åŒç‰ˆæœ¬çš„<code v-pre>go</code>æ‰©å®¹æœºåˆ¶ä¹Ÿå¹¶ä¸ä¸€æ ·ï¼Œå…·ä½“è¿˜éœ€è¦å»çœ‹æºä»£ç <code v-pre>src/runtime/slice.go</code>ä¸­çš„<code v-pre>growslice</code>å‡½æ•°</p>
<h4 id="å®¹é‡æ‰©å®¹é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#å®¹é‡æ‰©å®¹é¢è¯•é¢˜" aria-hidden="true">#</a> å®¹é‡æ‰©å®¹é¢è¯•é¢˜</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">}</span>
	s2 <span class="token operator">:=</span> s1

	s1 <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">11</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¾“å‡ºç»“æœå’Œè§£é‡Š</summary>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">11</span>
<span class="token number">10</span>

ç¬¬ä¸€ä¸ªä¸º11
ç¬¬äºŒä¸ªä¸º10ï¼Œæ˜¯å› ä¸ºs1æ·»åŠ å…ƒç´ åä¼šæœ‰å®¹é‡æ‰©å®¹æ“ä½œï¼Œå°†s1çš„æ•°æ®èµ‹å€¼ç»™æ–°çš„å†…å­˜ç©ºé—´ï¼Œs1æŒ‡å‘æ–°çš„åœ°å€ï¼Œs1çš„ä¿®æ”¹è‡ªç„¶å½±å“ä¸åˆ°s2ï¼Œs2çš„æ•°æ®è¿˜æ˜¯æ—§çš„ï¼Œå°±æ˜¯10
</code></pre></div></details>
<h3 id="æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#æ˜ å°„" aria-hidden="true">#</a> æ˜ å°„</h3>
<p>æ˜ å°„æ˜¯å­˜å‚¨ä¸€ç³»åˆ—æ— åºçš„key/valueé”®å€¼å¯¹</p>
<p>keyåªèƒ½ä¸ºå¯ä½¿ç”¨==è¿ç®—çš„å€¼ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”ã€æ•°ç»„ï¼‰ï¼Œvalueå¯ä»¥ä¸ºä»»æ„ç±»å‹</p>
<p>é›¶å€¼ä¸ºnil</p>
<h4 id="å£°æ˜-2" tabindex="-1"><a class="header-anchor" href="#å£°æ˜-2" aria-hidden="true">#</a> å£°æ˜</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç›´æ¥å£°æ˜</span>
	<span class="token keyword">var</span> names1 <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>     <span class="token comment">//ä½¿ç”¨varå£°æ˜ä½†æ˜¯ä¸åˆå§‹åŒ–(æ²¡æœ‰åˆ†é…å†…å­˜ç©ºé—´)åé¢èµ‹å€¼ä¼šæŠ¥é”™ï¼›ä¸å¸¦å¤§æ‹¬å·çš„æ˜¯ç±»å‹</span>
	<span class="token keyword">var</span> names2 <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–ï¼›å¸¦å¤§æ‹¬å·çš„æ˜¯å€¼</span>

	<span class="token comment">// ä½¿ç”¨makeå£°æ˜</span>
	<span class="token keyword">var</span> names3 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>      <span class="token comment">// ä½¿ç”¨makeå£°æ˜å¹¶åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> names4 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment">// ä½¿ç”¨makeå£°æ˜å¹¶åˆå§‹åŒ–ï¼Œå¹¶æŒ‡å®šå®¹é‡ï¼ˆæ³¨æ„ï¼šmapçš„å®¹é‡ä¸å¯ä»¥ä½¿ç”¨capå‡½æ•°è·å–ï¼Œä¼šæŠ¥é”™ï¼‰</span>

	<span class="token comment">// å°è¯•èµ‹å€¼</span>
	<span class="token comment">//names1["a"] = "b" // è¿™ä¸ªä¼šæŠ¥é”™ï¼Œpanic: assignment to entry in nil map</span>
	names2<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"b"</span>
	names3<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"b"</span>
	names4<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"b"</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n"</span><span class="token punctuation">,</span> names1<span class="token punctuation">,</span> names1<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names1<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n"</span><span class="token punctuation">,</span> names2<span class="token punctuation">,</span> names2<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names2<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n"</span><span class="token punctuation">,</span> names3<span class="token punctuation">,</span> names3<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names3<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç±»å‹: %T | å€¼: %#v | å…ƒç´ ä¸ªæ•°: %d\n"</span><span class="token punctuation">,</span> names4<span class="token punctuation">,</span> names4<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>names4<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string(nil) | å…ƒç´ ä¸ªæ•°: 0</span>
	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{"a":"b"} | å…ƒç´ ä¸ªæ•°: 1</span>
	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{"a":"b"} | å…ƒç´ ä¸ªæ•°: 1</span>
	<span class="token comment">//ç±»å‹: map[string]string | å€¼: map[string]string{"a":"b"} | å…ƒç´ ä¸ªæ•°: 1</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="åŸºæœ¬æ“ä½œ-2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ“ä½œ-2" aria-hidden="true">#</a> åŸºæœ¬æ“ä½œ</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜æ•°ç»„</span>
	names <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>

	<span class="token comment">// æ·»åŠ å…ƒç´ ï¼Œè‹¥å·²å­˜åœ¨ä¼šè¦†ç›–</span>
	names<span class="token punctuation">[</span><span class="token string">"Top1"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Go"</span>
	names<span class="token punctuation">[</span><span class="token string">"Top2"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Python"</span>
	names<span class="token punctuation">[</span><span class="token string">"Top3"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"JavaScript"</span>
	names<span class="token punctuation">[</span><span class="token string">"Top4"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">""</span>

	<span class="token comment">// åˆ é™¤å…ƒç´ , deleteå‡½æ•°åªç”¨äºmapï¼Œå‡½æ•°æ— è¿”å›å€¼</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token string">"Top3"</span><span class="token punctuation">)</span>

	<span class="token comment">// éå†mapï¼Œéå†å‡ºæ¥æ˜¯æ— åºçš„</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> names <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"names[%s]=%s\n"</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//names[Top2]=Python</span>
	<span class="token comment">//names[Top4]=</span>
	<span class="token comment">//names[Top1]=Go</span>

	<span class="token comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨,è‹¥ä¸å­˜åœ¨é»˜è®¤ä¼šè¿”å›å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹çš„é›¶å€¼,æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦é€šè¿‡è¿”å›çš„å¸ƒå°”å€¼æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
	key <span class="token operator">:=</span> <span class="token string">"Top4"</span>
	<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> names<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Key %s exists and value is %q\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Key %s does not exist\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Key Top4 exists and value is ""</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="valueå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#valueå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•" aria-hidden="true">#</a> valueå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•</h4>
<p>mapçš„valueå¯ä»¥æ˜¯ä¸€ä¸ªæ–¹æ³•</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m1 <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

	m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token punctuation">}</span>
	m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token operator">*</span> op <span class="token punctuation">}</span>
	m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>op <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> op <span class="token operator">*</span> op <span class="token operator">*</span> op <span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token comment">// map[1:0x47b920 2:0x47b940 3:0x47b960]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 4 8</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å®ç°setç±»å‹" tabindex="-1"><a class="header-anchor" href="#å®ç°setç±»å‹" aria-hidden="true">#</a> å®ç°setç±»å‹</h4>
<p>goè¯­è¨€ä¸­æ²¡æœ‰<code v-pre>set</code>ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨mapæ¥è‡ªå®šä¹‰<code v-pre>set</code></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–set</span>
	intSet <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">bool</span><span class="token punctuation">)</span>

	<span class="token comment">// æ·»åŠ å…ƒç´ </span>
	intSet<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
	intSet<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>

	<span class="token comment">// åˆ é™¤å…ƒç´ </span>
	<span class="token function">delete</span><span class="token punctuation">(</span>intSet<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	<span class="token comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
	n <span class="token operator">:=</span> <span class="token number">1</span>
	<span class="token keyword">if</span> intSet<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d is in set"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d is not in set"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 1 is in set</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote>
<p>æ›´å¥½çš„å®ç°setçš„æ–¹æ³•æ˜¯ä½¿ç”¨ç»“æ„ä½“ï¼Œå‚è€ƒã€Šç©ºç»“æ„ä½“ã€‹ç« èŠ‚</p>
</blockquote>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢" aria-hidden="true">#</a> åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math"</span>
	<span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Int2Float</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Intè½¬Float:\n"</span><span class="token punctuation">)</span>
	x <span class="token operator">:=</span> <span class="token number">99</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> <span class="token function">float32</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">Float2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nFloatè½¬Int:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// å°æ•°éƒ¨åˆ†ä¼šè¢«æˆªæ–­</span>
	x <span class="token operator">:=</span> <span class="token number">100.7</span>
	y <span class="token operator">:=</span> <span class="token operator">-</span><span class="token number">3.9</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %d\n"</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 100</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %d\n"</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int64</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -3</span>

	<span class="token comment">// æ³¨æ„ï¼š</span>
	<span class="token comment">//fmt.Printf("%T\n", int64(3.0)) // ä¸ä¼šæŠ¥é”™</span>
	<span class="token comment">//fmt.Printf("%T\n", int64(3.1)) // ä¼šæŠ¥é”™,å°æ•°éƒ¨åˆ†ä¸ä¸º0ç›´æ¥è½¬å°±ä¼šæŠ¥é”™</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">CeilAndFloorAndRound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nå‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥:\n"</span><span class="token punctuation">)</span>
	<span class="token comment">// å‘ä¸Šå–æ•´ï¼Œå‡½æ•°ç­¾åï¼šCeil(x float64) float64</span>
	x <span class="token operator">:=</span> <span class="token number">1.11</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %f\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Ceil</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Ceil</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 2.000000</span>

	<span class="token comment">// å‘ä¸‹å–æ•´ï¼Œå‡½æ•°ç­¾åï¼šFloor(x float64) float64</span>
	y <span class="token operator">:=</span> <span class="token number">1.99</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %f\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Floor</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 1.000000</span>

	<span class="token comment">// å››èˆäº”å…¥ï¼Œå‡½æ•°ç­¾åï¼š</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %f\n"</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span><span class="token number">1.49</span><span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">Round</span><span class="token punctuation">(</span><span class="token number">1.49</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float64 1.000000</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">AddQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nè¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·:\n"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Quote</span><span class="token punctuation">(</span><span class="token string">"å­—ç¬¦ä¸²"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">QuoteRune</span><span class="token punctuation">(</span><span class="token char">'å­—'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">String2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nå­—ç¬¦ä¸²è½¬æ•°å­—:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// å‡½æ•°ç­¾åï¼šAtoi(s string) (int, error)ï¼Œç­‰åŒäº ParseInt(s, 10, 0)</span>
	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span><span class="token string">"10"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// å‡½æ•°ç­¾åï¼šParseInt(s string, base int, bitSize int) (i int64, err error)</span>
	<span class="token comment">// æŒ‡å®šå­—ç¬¦ä¸²ä¸º10è¿›åˆ¶æ•°å­—ï¼Œè½¬æ¢åˆ°int8ç±»å‹ (0:intã€8:int8ã€16:int16ã€32:int32ã€64:int64)</span>
	<span class="token comment">// ç”¨æ³•ä¸€æ ·çš„è¿˜æœ‰ï¼šParseUint(s string, base int, bitSize int) (uint64, error)</span>
	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// å‡½æ•°ç­¾åï¼šParseFloat(s string, bitSize int) (float64, error)</span>
	<span class="token keyword">if</span> i<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span><span class="token string">"1.20"</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">String2Bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nå­—ç¬¦ä¸²è½¬å¸ƒå°”:\n"</span><span class="token punctuation">)</span>
	<span class="token comment">// è½¬æ¢è§„åˆ™ä»£ç ï¼š</span>
	<span class="token comment">//switch str {</span>
	<span class="token comment">//case "1", "t", "T", "true", "TRUE", "True":</span>
	<span class="token comment">//	return true, nil</span>
	<span class="token comment">//case "0", "f", "F", "false", "FALSE", "False":</span>
	<span class="token comment">//	return false, nil</span>
	<span class="token comment">//}</span>
	<span class="token comment">// å¦‚æœæ˜¯TRueï¼Œè¿™ç§å­—ç¬¦ä¸²å°±æ— æ³•è½¬æ¢äº†ï¼Œå¯ä»¥å…ˆä½¿ç”¨strings.ToLoweræˆ–strings.ToUpperè½¬æ¢åå†è½¬ä¸ºå¸ƒå°”å€¼</span>
	<span class="token keyword">if</span> b<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseBool</span><span class="token punctuation">(</span><span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %v\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">Int2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\næ•°å­—è½¬å­—ç¬¦ä¸²:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// int -> å­—ç¬¦ä¸²</span>
	x <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %s\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>

	<span class="token comment">// å‡½æ•°ç­¾åï¼šFormatInt(i int64, base int) stringï¼Œbaseä»£è¡¨æ˜¯å¤šå°‘è¿›åˆ¶çš„æ•°å­—</span>
	<span class="token comment">// å…ˆè½¬æˆ10è¿›åˆ¶æ•°å­—ï¼Œç„¶åè½¬ä¸ºæ•°å­—</span>
	<span class="token comment">// ç”¨æ³•ä¸€æ ·çš„å‡½æ•°è¿˜æœ‰strconv.FormatUint</span>
	y <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %s\n"</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">Bool2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nå¸ƒå°”è½¬å­—ç¬¦ä¸²:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// å‡½æ•°ç­¾åï¼šFormatBool(b bool) string</span>
	<span class="token comment">// è¿”å› "true" or "false"</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> strconv<span class="token punctuation">.</span><span class="token function">FormatBool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">Any2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nä»»æ„æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²:\n"</span><span class="token punctuation">)</span>

	<span class="token comment">// è¿™é‡Œä»¥floatä¸¾ä¾‹</span>

	<span class="token comment">// float -> å­—ç¬¦ä¸²</span>
	y <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%.2f"</span><span class="token punctuation">,</span> <span class="token number">3.1415926</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %s\n"</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ----------------------- æ•°å­—ä¹‹é—´è½¬æ¢ ------------------</span>
	<span class="token comment">// æ•°å­—ä¹‹é—´è½¬æ¢</span>
	<span class="token function">Int2Float</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Float2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ•°å­—å‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥</span>
	<span class="token function">CeilAndFloorAndRound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// ----------------------- å­—ç¬¦ä¸²ä¹‹é—´è½¬æ¢ ------------------</span>
	<span class="token comment">// å­—èŠ‚/Rune/å­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢å‚è€ƒstrings/bytes/unicodeåŒ…</span>
	<span class="token function">AddQuote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·</span>

	<span class="token comment">// ----------------------- å­—ç¬¦ä¸²è½¬åˆ°å…¶ä»–ç±»å‹ Parseç³»åˆ—å‡½æ•°------------------</span>
	<span class="token function">String2Int</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">String2Bool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// ----------------------- å…¶ä»–ç±»å‹è½¬åˆ°å­—ç¬¦ä¸² Formatç³»åˆ—å‡½æ•°------------------</span>
	<span class="token function">Int2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Bool2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Any2String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>Intè½¬Float:
float32                    
                           
Floatè½¬Int:                
int64 <span class="token number">100</span>                  
int64 -3                   
                           
å‘ä¸Šå–æ•´/å‘ä¸‹å–æ•´/å››èˆäº”å…¥:
float64 <span class="token number">2.000000</span>           
float64 <span class="token number">1.000000</span>           
float64 <span class="token number">1.000000</span>           
                           
è¾“å‡ºæ·»åŠ åŒå¼•å·/å•å¼•å·:     
<span class="token string">"å­—ç¬¦ä¸²"</span>                   
<span class="token string">'å­—'</span>                       
                           
å­—ç¬¦ä¸²è½¬æ•°å­—:              
<span class="token number">10</span>                         
<span class="token number">11</span>                         
<span class="token number">1.2</span>                        
                           
å­—ç¬¦ä¸²è½¬å¸ƒå°”:              
bool <span class="token boolean">true</span>                  
                           
æ•°å­—è½¬å­—ç¬¦ä¸²:              
string <span class="token number">100</span>
string <span class="token number">13</span>

å¸ƒå°”è½¬å­—ç¬¦ä¸²:
<span class="token boolean">false</span>

ä»»æ„æ•°æ®ç±»å‹è½¬å­—ç¬¦ä¸²:
string <span class="token number">3.14</span>
</code></pre></div><h3 id="åŸºæœ¬æ•°æ®ç±»å‹æ€»ç»“ğŸ‰" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹æ€»ç»“ğŸ‰" aria-hidden="true">#</a> åŸºæœ¬æ•°æ®ç±»å‹æ€»ç»“ğŸ‰</h3>
<table>
<thead>
<tr>
<th>æ•°æ®ç±»å‹</th>
<th>å…ƒç´ æ˜¯å¦æœ‰åº</th>
<th>å€¼ç±»å‹/å¼•ç”¨ç±»å‹</th>
<th>æŒ‡é’ˆç±»å‹åˆå§‹åŒ–å…³é”®å­—</th>
<th>é›¶å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ•°å­—</td>
<td>âœ”</td>
<td>å€¼ç±»å‹</td>
<td><code v-pre>new</code></td>
<td><code v-pre>0</code></td>
</tr>
<tr>
<td>å­—ç¬¦ä¸²</td>
<td>âœ”</td>
<td>å€¼ç±»å‹</td>
<td><code v-pre>new</code></td>
<td>ç©ºå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>å¸ƒå°”å€¼</td>
<td>âœ”</td>
<td>å€¼ç±»å‹</td>
<td><code v-pre>new</code></td>
<td><code v-pre>false</code></td>
</tr>
<tr>
<td>æ•°ç»„</td>
<td>âœ”</td>
<td>å€¼ç±»å‹</td>
<td><code v-pre>new</code></td>
<td>å…ƒç´ æ•°æ®ç±»å‹çš„é›¶å€¼</td>
</tr>
<tr>
<td>åˆ‡ç‰‡</td>
<td>âœ”</td>
<td>å¼•ç”¨ç±»å‹</td>
<td><code v-pre>make</code></td>
<td><code v-pre>nil</code></td>
</tr>
<tr>
<td>æ˜ å°„</td>
<td>âŒ</td>
<td>å¼•ç”¨ç±»å‹</td>
<td><code v-pre>make</code></td>
<td><code v-pre>nil</code></td>
</tr>
</tbody>
</table>
<h2 id="-1" tabindex="-1"><a class="header-anchor" href="#-1" aria-hidden="true">#</a> </h2>
<h2 id="å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°" aria-hidden="true">#</a> å‡½æ•°</h2>
<h3 id="å‡½æ•°å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å®šä¹‰" aria-hidden="true">#</a> å‡½æ•°å®šä¹‰</h3>
<ul>
<li>å‡½æ•°å¯ä»¥æ²¡æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¿”å›å€¼</li>
</ul>
<h4 id="åŸºæœ¬ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç¤ºä¾‹" aria-hidden="true">#</a> åŸºæœ¬ç¤ºä¾‹</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// å‚æ•°xå’Œyéƒ½æ˜¯intç±»å‹ï¼Œå‡½æ•°è¿”å›å€¼ä¹Ÿæ˜¯intç±»å‹</span>
<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å¯çœç•¥å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å¯çœç•¥å‚æ•°" aria-hidden="true">#</a> å¯çœç•¥å‚æ•°</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// options ...æ•°æ®ç±»å‹ï¼Œè¿™æ ·å®šä¹‰çš„å‚æ•°å¯ä»¥ä¸ä¼ å€¼</span>
<span class="token keyword">func</span> <span class="token function">Login</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password <span class="token builtin">string</span><span class="token punctuation">,</span> options <span class="token operator">...</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Login</span><span class="token punctuation">(</span><span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> <span class="token string">"3306"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span>
	<span class="token function">Login</span><span class="token punctuation">(</span><span class="token string">"0.0.0.0"</span><span class="token punctuation">,</span> <span class="token string">"3306"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">,</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"ssl"</span><span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//0.0.0.0 3306 root 123456 []</span>
<span class="token comment">//0.0.0.0 3306 root 123456 [map[ssl:true]]</span>
</code></pre></div><h4 id="å®å‚ä¸ºnil" tabindex="-1"><a class="header-anchor" href="#å®å‚ä¸ºnil" aria-hidden="true">#</a> å®å‚ä¸ºnil</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// å®šä¹‰å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">MyFunc</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token punctuation">{</span>
	s <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"hello world!"</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> s
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å‡½æ•°è¦æ±‚ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼Œè€Œä»–çš„é›¶å€¼ä¸ºnilï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¼ å…¥nilï¼Œåœ¨å‡½æ•°å†…éƒ¨ç›¸å½“äºæ˜¯: s := make([]string, 0)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">MyFunc</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [hello world!]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ¥å—ä»»æ„ç±»å‹å‚æ•°" tabindex="-1"><a class="header-anchor" href="#æ¥å—ä»»æ„ç±»å‹å‚æ•°" aria-hidden="true">#</a> æ¥å—ä»»æ„ç±»å‹å‚æ•°</h4>
<p>å¹¶ä¸æ¨èè¿™æ ·å†™å‡½æ•°ï¼Œä»…ä½œå­¦ä¹ ä½¿ç”¨</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// ä½¿ç”¨å¯çœç•¥å‚æ•° + interfaceï¼Œå¯æ¥å—ä»»ä½•ç±»å‹çš„å‚æ•°ï¼ˆåŒ…æ‹¬ä¸ä¼ ï¼‰ï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨æ–­è¨€å†å»åˆ¤æ–­å‚æ•°ç±»å‹</span>
<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span>i <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">1</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> m<span class="token punctuation">,</span> ok <span class="token operator">:=</span> i<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"anomoy"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span>
		<span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"bob"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å†…ç½®å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å†…ç½®å‡½æ•°" aria-hidden="true">#</a> å†…ç½®å‡½æ•°</h3>
<h4 id="copy" tabindex="-1"><a class="header-anchor" href="#copy" aria-hidden="true">#</a> copy</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ä½æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå…¨éƒ¨è¦†ç›–</span>
	<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">// [3, 2, 1]</span>

	<span class="token comment">// dstä½æ•°å°‘çš„æƒ…å†µä¸‹ï¼Œåªè¦†ç›–éƒ¨åˆ†</span>
	<span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span> <span class="token comment">// [3, 2]</span>

	<span class="token comment">// dstä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œcopyä¹‹åè¿˜æ˜¯ç©º</span>
	<span class="token keyword">var</span> s2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>s2<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token comment">// []</span>

	<span class="token comment">// srcä½æ•°å°‘çš„æƒ…å†µä¸‹ï¼Œåªè¦†ç›–éƒ¨åˆ†</span>
	<span class="token keyword">var</span> s3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
	<span class="token function">copy</span><span class="token punctuation">(</span>s3<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s3<span class="token punctuation">)</span> <span class="token comment">// [3 2 4]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="deferå»¶è¿Ÿè°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#deferå»¶è¿Ÿè°ƒç”¨" aria-hidden="true">#</a> deferå»¶è¿Ÿè°ƒç”¨</h3>
<p>deferæ˜¯å»¶è¿Ÿè°ƒç”¨ï¼Œæ¯”å¦‚æœ‰<code v-pre>A</code>ã€<code v-pre>B</code>ä¸¤ä¸ªå‡½æ•°ï¼Œåœ¨<code v-pre>A</code>å‡½æ•°ä¸­<code v-pre>defer B()</code>ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€åœ¨<code v-pre>A</code>å‡½æ•°<code v-pre>return</code>æˆ–<code v-pre>panic</code>ä¹‹åè°ƒç”¨<code v-pre>B</code>å‡½æ•°</p>
<h4 id="deferåº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#deferåº”ç”¨åœºæ™¯" aria-hidden="true">#</a> deferåº”ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>é‡Šæ”¾èµ„æº</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code>m<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">defer</span> m<span class="token punctuation">.</span>mutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li>
<li>
<p>å¼‚å¸¸å¤„ç†</p>
</li>
<li>
<p>ä¿®æ”¹å‡½æ•°è¿”å›å€¼</p>
</li>
</ul>
<h4 id="deferæœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#deferæœºåˆ¶" aria-hidden="true">#</a> deferæœºåˆ¶</h4>
<ul>
<li>
<p>deferåé¢çš„è¡¨è¾¾å¼ä¸èƒ½åŠ åœ†æ‹¬å·</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// deferåé¢çš„å‡½æ•°è°ƒç”¨ï¼Œä¸èƒ½åŠ æ‹¬å·ï¼Œä¼šæŠ¥è¯­æ³•é”™è¯¯</span>
<span class="token punctuation">}</span>

</code></pre></div></details>
</li>
<li>
<p>è‹¥æ‰§è¡Œå¤šæ¬¡<code v-pre>deferè¯­å¥</code>ï¼Œåˆ™æ»¡è¶³<code v-pre>LIFO</code>ï¼ˆåè¿›å…ˆå‡ºï¼‰ï¼Œå³<span style="color: red;font-weight: bold;">ådeferçš„å…ˆæ‰§è¡Œ</span></p>
</li>
<li>
<p><span style="color: red;font-weight: bold;">è¢«deferçš„å‡½æ•°çš„å‚æ•°åœ¨æ‰§è¡Œåˆ°deferè¯­å¥çš„æ—¶å€™å°±è¢«ç¡®å®šä¸‹æ¥äº†</span></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•1"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %p \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næµ‹è¯•2"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %p \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næµ‹è¯•3"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d %p \n"</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¾“å‡ºç»“æœ</summary>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>æµ‹è¯•1
<span class="token number">5</span> 0xc0000180b8 
<span class="token number">4</span> 0xc0000180b8 
<span class="token number">3</span> 0xc0000180b8 
<span class="token number">2</span> 0xc0000180b8 
<span class="token number">1</span> 0xc0000180b8 
<span class="token number">0</span> 0xc0000180b8 
               
æµ‹è¯•2          
<span class="token number">6</span> 0xc0000180f0 
<span class="token number">6</span> 0xc0000180f0 
<span class="token number">6</span> 0xc0000180f0 
<span class="token number">6</span> 0xc0000180f0 
<span class="token number">6</span> 0xc0000180f0 
<span class="token number">6</span> 0xc0000180f0 
               
æµ‹è¯•3          
<span class="token number">5</span> 0xc0000180f8 
<span class="token number">4</span> 0xc000018110 
<span class="token number">3</span> 0xc000018118 
<span class="token number">2</span> 0xc000018120 
<span class="token number">1</span> 0xc000018128 
<span class="token number">0</span> 0xc000018130 
</code></pre></div></details>
</li>
<li>
<p><span style="color: red;font-weight: bold;">deferå’Œreturnæ‰§è¡Œé¡ºåºçš„é—®é¢˜</span></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// åœ¨deferä¸­ä¿®æ”¹è¿”å›å€¼æˆåŠŸï¼Œå‰ææ˜¯å¿…é¡»æå‰å£°æ˜è¿”å›å€¼</span>
<span class="token keyword">func</span> <span class="token function">add1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result <span class="token operator">+=</span> <span class="token number">10</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨deferä¸­ä¿®æ”¹è¿”å›å€¼å¤±è´¥ï¼Œå¹¶æœªæå‰å£°æ˜è¿”å›å€¼</span>
<span class="token comment">// åŸå› æ˜¯ï¼š</span>
<span class="token comment">// 		returnå¹¶éåŸå­æ“ä½œï¼Œå…±åˆ†ä¸ºä¸¤æ­¥ï¼Œèµ‹å€¼å’Œå‡½æ•°è¿”å›</span>
<span class="token comment">//		èµ‹å€¼ï¼šå°†ç»“æœå†™å…¥åˆ°è¿”å›å€¼ä¸­ï¼Œå¦‚æœæœªæå‰å£°æ˜ï¼Œå°±å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸­</span>
<span class="token comment">//		å‡½æ•°è¿”å›ï¼šå‡½æ•°å¸¦ç€å½“å‰è¿”å›å€¼é€€å‡º</span>
<span class="token comment">// æ‰§è¡Œé¡ºåºï¼šreturnèµ‹å€¼ --> defer --> returnå‡½æ•°è¿”å›</span>

<span class="token keyword">func</span> <span class="token function">add2</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	result <span class="token operator">:=</span> x <span class="token operator">+</span> y <span class="token comment">// resultå¿…é¡»å®šä¹‰åœ¨å‰é¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span>
	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result <span class="token operator">+=</span> <span class="token number">10</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 13</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 9</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
</li>
<li>
<p>deferå¯ä»¥æ•æ‰<code v-pre>panic</code></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// recoverå‡½æ•°åªèƒ½ç”¨åœ¨deferä¸­</span>
	<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"panic: "</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Close success!"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NonPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">WithPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">NonPanic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// panic:  1</span>
<span class="token comment">// Close success!</span>
</code></pre></div></details>
</li>
<li>
<p>derferä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿ</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"defer called"</span><span class="token punctuation">)</span>
	os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¿è¡Œä¹‹åï¼Œå‘ç°ä»€ä¹ˆéƒ½æ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜deferæ²¡æœ‰æ­£å¸¸æ‰§è¡Œ</span>
</code></pre></div></li>
</ul>
<h2 id="-2" tabindex="-1"><a class="header-anchor" href="#-2" aria-hidden="true">#</a> </h2>
<h2 id="åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹" tabindex="-1"><a class="header-anchor" href="#åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹" aria-hidden="true">#</a> åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹</h2>
<h3 id="åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹-1" tabindex="-1"><a class="header-anchor" href="#åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹-1" aria-hidden="true">#</a> åˆ«åå’Œè‡ªå®šä¹‰ç±»å‹</h3>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å®šä¹‰åˆ«åï¼Œ ä½¿ç”¨=ï¼Œ ä¸èƒ½ç»™Counteræ·»åŠ æ–¹æ³•ç­‰</span>
	<span class="token keyword">type</span> Counter <span class="token operator">=</span> <span class="token builtin">int</span>

	<span class="token comment">// ä½¿ç”¨åˆ«åï¼Œå¯ä»¥ç»§ç»­åƒä½¿ç”¨intä¸€æ ·ä½¿ç”¨ï¼Œæœ¬è´¨ä¸Šå®ƒå°±æ˜¯int</span>
	<span class="token keyword">var</span> a Counter <span class="token operator">=</span> <span class="token number">20</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 21</span>

	<span class="token comment">// ------------------------------------------------------</span>
	<span class="token comment">// è‡ªå®šä¹‰ç±»å‹, è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç±»å‹</span>
	<span class="token keyword">type</span> Number <span class="token builtin">int</span>

	<span class="token comment">// é”™è¯¯ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹</span>
	<span class="token keyword">var</span> b Number <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token comment">//fmt.Println(add(1, b)) // è¿™é‡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºNumberå·²ç»æ˜¯å…¨æ–°çš„ç±»å‹äº†</span>

	<span class="token comment">// ç±»å‹è½¬æ¢</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %#v\n"</span><span class="token punctuation">,</span> <span class="token function">int8</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">int8</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">// int8 100</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T %#v\n"</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// main.Number 20</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä»¿http-handlerå¯¹è±¡è½¬æ¢" tabindex="-1"><a class="header-anchor" href="#ä»¿http-handlerå¯¹è±¡è½¬æ¢" aria-hidden="true">#</a> ä»¿<code v-pre>http handler</code>å¯¹è±¡è½¬æ¢</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main
 
<span class="token keyword">import</span> <span class="token string">"fmt"</span>
 
<span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span>
<span class="token comment">// å¯ä»¥ä½¿ç”¨HandFunc(å‡½æ•°å) å°†å‡½æ•°è½¬ä¸ºHandFuncå¯¹è±¡ï¼Œå‡½æ•°éœ€è¦å’ŒHandFuncä¿æŒç­¾åä¸€è‡´</span>
<span class="token keyword">type</span> HandFunc <span class="token keyword">func</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
 
<span class="token comment">// è‡ªå®šä¹‰ç±»å‹-æ‰©å±•æ–¹æ³•</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>f HandFunc<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
   <span class="token comment">// è¿™é‡Œçš„fæ˜¯HandFuncå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸Šé¢æ‰€è¯´çš„å‡½æ•°å¯¹è±¡</span>
   <span class="token comment">// æ‰€ä»¥è¿™é‡Œè°ƒç”¨f(x, y)å°±ç›¸å½“äºè°ƒç”¨ å‡½æ•°(x, y)</span>
   <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
 
<span class="token comment">// è‡ªå®šä¹‰å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>
 
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// å°†è‡ªå®šä¹‰å‡½æ•°è½¬ä¸ºè‡ªå®šä¹‰ç±»å‹</span>
   add2 <span class="token operator">:=</span> <span class="token function">HandFunc</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> add<span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> add2<span class="token punctuation">)</span>
 
   <span class="token comment">// æ­£å¸¸è°ƒç”¨</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">add2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 
   <span class="token comment">// è‡ªå®šä¹‰ç±»å‹å¯ä»¥è°ƒç”¨æ›´å¤šçš„æ–¹æ³•</span>
   fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>add2<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>func<span class="token punctuation">(</span>int, int<span class="token punctuation">)</span> int
main.HandFunc
<span class="token number">3</span>            
<span class="token number">3</span>            
<span class="token number">3</span>        
</code></pre></div><h2 id="-3" tabindex="-1"><a class="header-anchor" href="#-3" aria-hidden="true">#</a> </h2>
<h2 id="ç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“" aria-hidden="true">#</a> ç»“æ„ä½“</h2>
<p>Goè¯­è¨€çš„ç»“æ„ä½“å…¶å®å°±ç›¸å½“äºå…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç±»</p>
<h3 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€" aria-hidden="true">#</a> åŸºç¡€</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token comment">// ç»“æ„ä½“å®šä¹‰è¯­æ³•</span>
<span class="token comment">//     è¯­æ³•1ï¼š type ç»“æ„ä½“åç§° struct {}</span>
<span class="token comment">//     è¯­æ³•2ï¼š è¿˜å¯ä»¥å®šä¹‰åŒ¿åç»“æ„ä½“ï¼Œå‚è€ƒä¸‹æ–¹ä»£ç </span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	id      <span class="token builtin">int</span>
	name    <span class="token builtin">string</span>
	address <span class="token builtin">string</span>
	phone   <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–ç©ºç»“æ„ä½“</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// {0   }</span>

	<span class="token comment">//ä½¿ç”¨å­—é¢é‡åˆå§‹åŒ–</span>
	user1 <span class="token operator">:=</span> User<span class="token punctuation">{</span>
		id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">"Serry"</span><span class="token punctuation">,</span> address<span class="token punctuation">:</span> <span class="token string">"å¹¿ä¸œçœ"</span><span class="token punctuation">,</span> phone<span class="token punctuation">:</span> <span class="token string">"19111111111"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span> <span class="token comment">// {1 Serry å¹¿ä¸œçœ 19111111111}</span>

	<span class="token comment">// ä½¿ç”¨å±æ€§åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> user2 User
	user2<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span>
	user2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Bob"</span>
	user2<span class="token punctuation">.</span>address <span class="token operator">=</span> <span class="token string">"æ²³åŒ—çœä¿å®šå¸‚"</span>
	user2<span class="token punctuation">.</span>phone <span class="token operator">=</span> <span class="token string">"13788888888"</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span> <span class="token comment">// {1 Bob æ²³åŒ—çœä¿å®šå¸‚ 13788888888}</span>

	<span class="token comment">// ä½¿ç”¨newå‡½æ•°åˆå§‹åŒ–ã€æŒ‡é’ˆç±»å‹ç»“æ„ä½“ã€‘</span>
	<span class="token keyword">var</span> user3 <span class="token operator">*</span>User <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span> <span class="token comment">// &amp;{0   }</span>

	<span class="token comment">// å®šä¹‰åŒ¿åç»“æ„ä½“å¹¶åˆå§‹åŒ–</span>
	user4 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		id    <span class="token builtin">int</span>
		phone <span class="token builtin">string</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		id<span class="token punctuation">:</span>    <span class="token number">1</span><span class="token punctuation">,</span>
		phone<span class="token punctuation">:</span> <span class="token string">"12345678910"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user4<span class="token punctuation">)</span> <span class="token comment">// {1 12345678910}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="è‡ªå®šä¹‰tag" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰tag" aria-hidden="true">#</a> è‡ªå®šä¹‰Tag</h3>
<p>å·²çŸ¥ä½¿ç”¨äº†ç»“æ„ä½“<code v-pre>Tag</code>çš„åº“ï¼š<a href="https://github.com/golang/go/wiki/Well-known-struct-tags" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/wiki/Well-known-struct-tags<ExternalLinkIcon/></a></p>
<p><code v-pre>Tag</code>ä½¿ç”¨è¯­æ³•</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token string">`key1:"value1" key2:"value2" key3:"value3"...`</span> <span class="token comment">// é”®å€¼å¯¹ç”¨ç©ºæ ¼åˆ†éš”</span>
</code></pre></div><details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"reflect"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name     <span class="token builtin">string</span> <span class="token string">`my:"username"`</span>
	Age      <span class="token builtin">uint8</span>
	Password <span class="token builtin">string</span> <span class="token string">`my:"min=6,max=10"`</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">GetTag</span><span class="token punctuation">(</span>u User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// é€šè¿‡åå°„è·å–ç±»å‹</span>
	t <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>

	<span class="token comment">// ä»£ç 						ç±»å‹							è¯´æ˜</span>
	<span class="token comment">// t.NumField()											ç»“æ„ä½“å­—æ®µæ•°é‡</span>
	<span class="token comment">// t.Field(0)											ç¬¬1ä¸ªå­—æ®µ</span>
	<span class="token comment">//	t.Field(1).Name 		å­—ç¬¦ä¸²						å­—æ®µåï¼Œè¿™é‡Œæ˜¯ Name</span>
	<span class="token comment">// 	t.Field(1).Tag  		StructTag(è‡ªå®šä¹‰å­—ç¬¦ä¸²ç±»å‹)	Tagï¼Œè¿™é‡Œæ˜¯ my:"username"</span>
	<span class="token comment">//  t.Field(1).Tag.Get()	æ–¹æ³•							æ ¹æ®keyè·å–value, keyä¸å­˜åœ¨è¿”å›ç©ºå­—ç¬¦ä¸²</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%-10s   %-s\n"</span><span class="token punctuation">,</span> <span class="token string">"Struct Key"</span><span class="token punctuation">,</span> <span class="token string">"Tag Value"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		field <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Field</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
		key <span class="token operator">:=</span> field<span class="token punctuation">.</span>Name
		value <span class="token operator">:=</span> field<span class="token punctuation">.</span>Tag<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">"my"</span><span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%-10s   %-s\n"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	user <span class="token operator">:=</span> User<span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span>     <span class="token string">"Jack"</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>      <span class="token number">5</span><span class="token punctuation">,</span>
		Password<span class="token punctuation">:</span> <span class="token string">"123456"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	<span class="token function">GetTag</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>Struct Key   Tag Value
Name         username    
Age                      
Password     <span class="token assign-left variable">min</span><span class="token operator">=</span><span class="token number">6</span>,max<span class="token operator">=</span><span class="token number">10</span>
</code></pre></div><h3 id="ç©ºç»“æ„ä½“" tabindex="-1"><a class="header-anchor" href="#ç©ºç»“æ„ä½“" aria-hidden="true">#</a> ç©ºç»“æ„ä½“</h3>
<p><strong>ç©ºç»“æ„ä½“å ç”¨å†…å­˜ä¸º0</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"unsafe"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Empty <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ä½¿ç”¨unsafe.Sizeofå¯ä»¥æŸ¥çœ‹å ç”¨å†…å­˜å¤§å°,å•ä½å­—èŠ‚</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>Empty<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 0</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>ç©ºç»“æ„ä½“çš„åº”ç”¨åœºæ™¯</strong></p>
<ul>
<li>
<p>æ–¹æ³•åˆ†ç»„</p>
<p>å°†ç›¸åŒç±»å‹çš„æ–¹æ³•ç»„åˆåœ¨ä¸€èµ·ï¼Œä¾¿äºåç»­æ‰©å±•å’Œç»´æŠ¤</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"runtime"</span>
	<span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Platform <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>Platform<span class="token punctuation">)</span> <span class="token function">GetOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> runtime<span class="token punctuation">.</span>GOOS
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>Platform<span class="token punctuation">)</span> <span class="token function">GetOSBit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> strconv<span class="token punctuation">.</span>IntSize
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> platform Platform
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s %dbits\n"</span><span class="token punctuation">,</span> platform<span class="token punctuation">.</span><span class="token function">GetOS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> platform<span class="token punctuation">.</span><span class="token function">GetOSBit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// windows 64bits</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
</li>
<li>
<p>å®ç°<code v-pre>set</code>ç±»å‹</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Set <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Add</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Remove</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Set<span class="token punctuation">)</span> <span class="token function">Exist</span><span class="token punctuation">(</span>item <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> ok <span class="token operator">:=</span> s<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
	<span class="token keyword">return</span> ok
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	set <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span>Set<span class="token punctuation">)</span>
	set<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
	set<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"456"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">Exist</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
	set<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token function">Exist</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
</li>
<li>
<p>ç©ºé€šé“</p>
<p>å®ç°é€šçŸ¥å‹<code v-pre>channel</code>ï¼Œå…¶ä¸éœ€è¦å‘é€ä»»ä½•æ•°æ®ï¼Œåªæ˜¯ç”¨äºåè°ƒ<code v-pre>Goroutine</code>è¿è¡Œ</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
	<span class="token operator">&lt;-</span>ch
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
</li>
</ul>
<h3 id="ç»“æ„ä½“ç»„åˆ" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“ç»„åˆ" aria-hidden="true">#</a> ç»“æ„ä½“ç»„åˆ</h3>
<p>ç±»ä¼¼äºç±»çš„ç»§æ‰¿</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Addr <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	province <span class="token builtin">string</span>
	street   <span class="token builtin">string</span>
	number   <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	id    <span class="token builtin">int</span>
	name  <span class="token builtin">string</span>
	addr  Addr
	phone <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> addr <span class="token operator">=</span> Addr<span class="token punctuation">{</span>
		province<span class="token punctuation">:</span> <span class="token string">"Hebei"</span><span class="token punctuation">,</span>
		street<span class="token punctuation">:</span>   <span class="token string">"å¤©å¨è·¯"</span><span class="token punctuation">,</span>
		number<span class="token punctuation">:</span>   <span class="token string">"10"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> user <span class="token operator">=</span> User<span class="token punctuation">{</span>
		id<span class="token punctuation">:</span>    <span class="token number">1</span><span class="token punctuation">,</span>
		name<span class="token punctuation">:</span>  <span class="token string">"bob"</span><span class="token punctuation">,</span>
		addr<span class="token punctuation">:</span>  addr<span class="token punctuation">,</span>
		phone<span class="token punctuation">:</span> <span class="token string">"137111111111"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p><strong>K-VåŒåç®€å†™</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Basic <span class="token comment">// Basic Basicçš„ç®€å†™å½¢å¼,ä½†ä¸ç›´æ¥å†™Basic Basicæœ‰åŒºåˆ«</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Basic <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>b <span class="token operator">*</span>Basic<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> b<span class="token punctuation">.</span>Name
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	u <span class="token operator">:=</span> User<span class="token punctuation">{</span>
		Basic<span class="token punctuation">{</span>
			Name<span class="token punctuation">:</span> <span class="token string">"July"</span><span class="token punctuation">,</span>
			Age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> u<span class="token punctuation">)</span>   <span class="token comment">// main.User{Basic:main.Basic{Name:"July", Age:18}}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// July, Userç»“æ„ä½“å®ä¾‹å¯ä»¥ç›´æ¥ä½¿ç”¨Basicç»“æ„ä½“çš„æ–¹æ³•,å¦‚æœæ˜¯éç®€å†™å½¢å¼åˆ™ä¸å¯ä»¥ç›´æ¥è°ƒç”¨</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="ç»“æ„ä½“æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“æ–¹æ³•" aria-hidden="true">#</a> ç»“æ„ä½“æ–¹æ³•</h3>
<p><strong>è¯­æ³•</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// å®šä¹‰ç»“æ„ä½“</span>
<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä¸€èˆ¬æˆ‘ä»¬ä¼šä¸ºç»“æ„ä½“å®šä¹‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼ˆè¿™ä¸æ˜¯å¿…é¡»çš„ï¼‰</span>
<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šä¹‰ç»“æ„ä½“æ–¹æ³•</span>
<span class="token comment">// è¯­æ³•ï¼šfunc (æ¥æ”¶è€…å˜é‡ æ¥æ”¶è€…ç±»å‹) æ–¹æ³•å(å‚æ•°åˆ—è¡¨) (è¿”å›å‚æ•°)</span>
<span class="token comment">//      æ¥æ”¶è€…å˜é‡: å»ºè®®ä½¿ç”¨æ¥æ”¶è€…ç±»å‹åç§°é¦–å­—æ¯çš„å°å†™ï¼Œè€Œä¸æ˜¯selfã€thisä¹‹ç±»çš„å‘½å</span>
<span class="token comment">//      æ¥æ”¶è€…ç±»å‹ï¼šå€¼ç±»å‹å’ŒæŒ‡é’ˆç±»å‹</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
</code></pre></div><p><strong>å€¼æ¥æ”¶è€…ä¼šè¿›è¡Œç»“æ„ä½“æ‹·è´</strong></p>
<p>æµ‹è¯•1ï¼šå€¼æ¥æ”¶è€…ä¼šå°†ç»“æ„ä½“æ‹·è´ä¸€ä»½åˆ°æ–¹æ³•å†…</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Person <span class="token punctuation">{</span>
	<span class="token keyword">return</span> Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"SetName: %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span>
	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	bob <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"bob"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"main: %p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>bob<span class="token punctuation">)</span>

	bob<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bob<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// è¾“å‡ºç»“æœ</span>
	<span class="token comment">// main: 0xc00004a250</span>
	<span class="token comment">// SetName: 0xc00004a260</span>
	<span class="token comment">// bob</span>
    <span class="token comment">// æ€»ç»“ï¼šå€¼æ¥æ”¶è€…ä¼šå°†ç»“æ„ä½“æ‹·è´ä¸€ä»½åˆ°æ–¹æ³•å†…ï¼Œæ‰€ä»¥å¯¼è‡´å¹¶æ²¡æœ‰å¯¹ç»“æ„ä½“ä¿®æ”¹æˆåŠŸ</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>æµ‹è¯•2ï¼šæŒ‡é’ˆæ¥æ”¶è€…ä¸ä¼šæ‹·è´ç»“æ„ä½“</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šä¸º return (*p).name</span>
	<span class="token keyword">return</span> p<span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span> <span class="token function">SetName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"SetName: %p\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span>
	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	bob <span class="token operator">:=</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"bob"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"main: %p\n"</span><span class="token punctuation">,</span> bob<span class="token punctuation">)</span>

	bob<span class="token punctuation">.</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>bob<span class="token punctuation">.</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// è¾“å‡ºç»“æœ</span>
	<span class="token comment">// main: 0xc00010e110</span>
	<span class="token comment">// SetName: 0xc00010e110</span>
	<span class="token comment">// jack</span>
    <span class="token comment">// æ€»ç»“ï¼šæŒ‡é’ˆæ¥æ”¶è€…ä¸ä¼šæ‹·è´ç»“æ„ä½“ï¼Œæ‰€ä»¥å¯¹ç»“æ„ä½“ä¿®æ”¹æˆåŠŸ</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p><strong>ç»“æ„ä½“æ˜¯map-vçš„æ€ªå¼‚è¡Œä¸º</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Sex  <span class="token builtin">string</span>
	Age  <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">uint</span><span class="token punctuation">]</span>Person<span class="token punctuation">{</span>
		<span class="token number">0</span><span class="token punctuation">:</span> Person<span class="token punctuation">{</span><span class="token string">"å¼ æ— å¿Œ"</span><span class="token punctuation">,</span> <span class="token string">"ç”·"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token number">1</span><span class="token punctuation">:</span> Person<span class="token punctuation">{</span><span class="token string">"èµµæ•"</span><span class="token punctuation">,</span> <span class="token string">"å¥³"</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æµ‹è¯•1ï¼šè¿™ä¼šæŠ¥é”™ cannot assign to struct field m[0].Age in map</span>
	m<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Age <span class="token operator">+=</span> <span class="token number">1</span>

	<span class="token comment">// æµ‹è¯•2ï¼šè¿‚å›è§£å†³</span>
	<span class="token comment">//tmp := m[0]</span>
	<span class="token comment">//tmp.Age += 1</span>
	<span class="token comment">//m[0] = tmp</span>
	<span class="token comment">//fmt.Println(m[0].Age)</span>

	<span class="token comment">// æµ‹è¯•3ï¼šå®šä¹‰mapä¸ºæŒ‡é’ˆç±»å‹åè§£å†³</span>
	<span class="token comment">//m2 := map[uint]*Person{</span>
	<span class="token comment">//	0: &amp;Person{"å¼ æ— å¿Œ", "ç”·", 20},</span>
	<span class="token comment">//	1: &amp;Person{"èµµæ•", "å¥³", 21},</span>
	<span class="token comment">//}</span>
	<span class="token comment">//</span>
	<span class="token comment">//m2[0].Age += 1</span>
	<span class="token comment">//fmt.Println(m2[0].Age)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="å‡½æ•°å¼é€‰é¡¹æ¨¡å¼âœ¨" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å¼é€‰é¡¹æ¨¡å¼âœ¨" aria-hidden="true">#</a> å‡½æ•°å¼é€‰é¡¹æ¨¡å¼âœ¨</h3>
<p>è¯¥æ¨¡å¼è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•æ›´åŠ¨æ€çµæ´»åœ°ä¸ºå¯¹è±¡é…ç½®å‚æ•°</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// å®šä¹‰ç»“æ„ä½“</span>
<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span> <span class="token comment">// å¿…é¡»å­—æ®µ</span>
	Age  <span class="token builtin">uint8</span>  <span class="token comment">// éå¿…é¡»</span>
	Sex  <span class="token builtin">string</span> <span class="token comment">// éå¿…é¡»</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šä¹‰å„ç§é€‰é¡¹</span>
<span class="token keyword">type</span> Option <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">WithAge</span><span class="token punctuation">(</span>age <span class="token builtin">uint8</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>user <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		user<span class="token punctuation">.</span>Age <span class="token operator">=</span> age
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">WithSex</span><span class="token punctuation">(</span>sex <span class="token builtin">string</span><span class="token punctuation">)</span> Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>user <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		user<span class="token punctuation">.</span>Sex <span class="token operator">=</span> sex
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">DefaultOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Option <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Option<span class="token punctuation">{</span><span class="token function">WithAge</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">"superman"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ„é€ æ–¹æ³•</span>
<span class="token keyword">func</span> <span class="token function">NewUser</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> options <span class="token operator">...</span>Option<span class="token punctuation">)</span> <span class="token operator">*</span>User <span class="token punctuation">{</span>
	<span class="token comment">// (1) å¿…é¡»æœ‰çš„å­—æ®µç›´æ¥å†™åˆ°å‡½æ•°ç­¾åä¸­ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªname</span>
	<span class="token comment">// (2) å¯æœ‰å¯æ— çš„é€šè¿‡optionsåŠ¨æ€ä¼ é€’</span>
	<span class="token comment">// (3) ä»¥åè‹¥å¢åŠ æ–°çš„é€‰é¡¹ï¼Œä¹Ÿä¸éœ€è¦æ”¹æ„é€ å‡½æ•°</span>

	<span class="token comment">// å®ä¾‹åŒ–ç»“æ„ä½“</span>
	user <span class="token operator">:=</span> <span class="token operator">&amp;</span>User<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> name<span class="token punctuation">}</span>

	<span class="token comment">// è®¾ç½®é»˜è®¤å‚æ•°</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> option <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token function">DefaultOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">option</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è‡ªå®šä¹‰å‚æ•°</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> option <span class="token operator">:=</span> <span class="token keyword">range</span> options <span class="token punctuation">{</span>
		<span class="token function">option</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> user
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	bob <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">"bob"</span><span class="token punctuation">)</span>
	jack <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">,</span> <span class="token function">WithAge</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">"man"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	julie <span class="token operator">:=</span> <span class="token function">NewUser</span><span class="token punctuation">(</span><span class="token string">"julie"</span><span class="token punctuation">,</span> <span class="token function">WithSex</span><span class="token punctuation">(</span><span class="token string">"woman"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> bob<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> jack<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> julie<span class="token punctuation">)</span>

	<span class="token comment">//&amp;main.User{Name:"bob", Age:0xa, Sex:"superman"}</span>
	<span class="token comment">//&amp;main.User{Name:"jack", Age:0x14, Sex:"man"}  </span>
	<span class="token comment">//&amp;main.User{Name:"julie", Age:0xa, Sex:"woman"}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ç»“æ„ä½“å†…å­˜å¤§å°è®¡ç®—" tabindex="-1"><a class="header-anchor" href="#ç»“æ„ä½“å†…å­˜å¤§å°è®¡ç®—" aria-hidden="true">#</a> ç»“æ„ä½“å†…å­˜å¤§å°è®¡ç®—</h3>
<p><strong>ç»“è®ºå…ˆè¡Œ</strong></p>
<p>ç»“æ„ä½“å†…å­˜å ç”¨å¤§å°æ˜¯<span style="color: red; font-weight: bold;">æ¯ä¸ªå­—æ®µå†…å­˜å¯¹é½ä¹‹åå ç”¨ä¹‹å’Œ</span>ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªå­—æ®µå ç”¨ä¹‹å’Œ</p>
<p><strong>ï¼ˆ1ï¼‰ç»“æ„ä½“å†…å­˜å¯¹é½è§„åˆ™</strong></p>
<ul>
<li>ç¬¬ä¸€ä¸ªå­—æ®µåœ¨ä¸ç»“æ„ä½“åç§»é‡ä¸º0çš„åœ°å€å¤„</li>
<li>å…¶ä»–å­—æ®µè¦å¯¹é½åˆ°å¯¹é½æ•°çš„æ•´æ•°å€çš„åœ°å€å¤„</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰æŸ¥çœ‹æ¯ç§æ•°æ®ç±»å‹å ç”¨å¤§å°å’Œå¯¹é½æ•°</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"unsafe"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"bool  : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">bool</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int8  : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int16 : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int32 : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"int64 : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"byte  : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"rune  : Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"string: Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"struct: Size %2d, Alignment %d\n"</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Alignof</span><span class="token punctuation">(</span><span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token builtin">bool</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span>
<span class="token builtin">int8</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span>
<span class="token builtin">int16</span> <span class="token punctuation">:</span> Size  <span class="token number">2</span><span class="token punctuation">,</span> Alignment <span class="token number">2</span>
<span class="token builtin">int32</span> <span class="token punctuation">:</span> Size  <span class="token number">4</span><span class="token punctuation">,</span> Alignment <span class="token number">4</span>
<span class="token builtin">int64</span> <span class="token punctuation">:</span> Size  <span class="token number">8</span><span class="token punctuation">,</span> Alignment <span class="token number">8</span>
<span class="token builtin">byte</span>  <span class="token punctuation">:</span> Size  <span class="token number">1</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span>
<span class="token builtin">rune</span>  <span class="token punctuation">:</span> Size  <span class="token number">4</span><span class="token punctuation">,</span> Alignment <span class="token number">4</span>
<span class="token builtin">string</span><span class="token punctuation">:</span> Size <span class="token number">16</span><span class="token punctuation">,</span> Alignment <span class="token number">8</span>
<span class="token keyword">struct</span><span class="token punctuation">:</span> Size  <span class="token number">0</span><span class="token punctuation">,</span> Alignment <span class="token number">1</span>

<span class="token comment">// Sizeä»£è¡¨å ç”¨å†…å­˜å¤§å°ï¼ˆå•ä½å­—èŠ‚ï¼‰</span>
<span class="token comment">// Alignmentä»£è¡¨å†…å­˜å¯¹é½æ•°å­—ï¼ˆå•ä½å­—èŠ‚ï¼‰</span>
</code></pre></div><p><strong>ï¼ˆ3ï¼‰å¯¹é½è§„åˆ™éªŒè¯</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"unsafe"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> P1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	a <span class="token builtin">bool</span>   <span class="token comment">// åç§»é‡ä¸º0, è‡ªèº«å ç”¨1ä¸ªå­—èŠ‚</span>
	b <span class="token builtin">int32</span>  <span class="token comment">// ä¸aåšå†…å­˜å¯¹é½,int32ç±»å‹çš„å¯¹é½å€æ•°ä¸º4,å¯¼è‡´åç§»é‡ä¸º4,è‡ªèº«åˆå ç”¨4ä¸ªå­—èŠ‚,æ‰€ä»¥æœ¬å­—æ®µç»“æŸä½ç½®åœ¨åç§»é‡ä¸º8çš„ä½ç½®</span>
	c <span class="token builtin">byte</span>   <span class="token comment">// ä¸båšå†…å­˜å¯¹é½,åç§»é‡ä¸º9çš„ä½ç½®</span>
	d <span class="token builtin">string</span> <span class="token comment">// ä¸cåšå†…å­˜å¯¹é½,åç§»é‡å¼€å§‹ä½ç½®åœ¨16,è‡ªèº«å ç”¨16,æœ€ç»ˆä½ç½®åœ¨32</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> P2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	a <span class="token builtin">bool</span>   <span class="token comment">// åç§»é‡ä¸º0,æœ€ç»ˆä½ç½®1</span>
	c <span class="token builtin">byte</span>   <span class="token comment">// åç§»é‡ä¸º1,æœ€ç»ˆä½ç½®2</span>
	b <span class="token builtin">int32</span>  <span class="token comment">// åç§»é‡å¼€å§‹ä¸º4,ç»“æŸä¸º8</span>
	d <span class="token builtin">string</span> <span class="token comment">// åç§»é‡å¼€å§‹ä¸º8,ç»“æŸä¸º 8 + 16 = 24</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>P1<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 32</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>P2<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 24</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="-4" tabindex="-1"><a class="header-anchor" href="#-4" aria-hidden="true">#</a> </h2>
<h2 id="æ¥å£" tabindex="-1"><a class="header-anchor" href="#æ¥å£" aria-hidden="true">#</a> æ¥å£</h2>
<h3 id="æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#æ¦‚å¿µ" aria-hidden="true">#</a> æ¦‚å¿µ</h3>
<p>æ¥å£æ˜¯ä¸€ä¸ªç±»å‹ï¼Œå°±å’Œ<code v-pre>int</code>ã€<code v-pre>string</code>ã€<code v-pre>map</code>ç­‰ä¸€æ ·ï¼Œæ˜¯ç±»å‹ï¼Œä¸æ˜¯å€¼</p>
<p>æ¥å£æ˜¯ä¸€ç³»åˆ—æ–¹æ³•çš„é›†åˆï¼Œæ¯”å¦‚<code v-pre>io.Writer</code>å°±æ˜¯ä¸€ä¸ªæ¥å£</p>
<p>æŸä¸ªå€¼å®ç°äº†æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°å®ƒå®ç°äº†æŸä¸ªæ¥å£ï¼Œæ¯”å¦‚<code v-pre>os.Stdout</code>å®ç°äº†<code v-pre>io.Writer</code>æ¥å£</p>
<p>ä¸‹é¢ç”¨ä»£ç æ¼”ç¤ºä¸€ä¸‹</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"io"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å˜é‡w,ç±»å‹ä¸º io.Writer, è¿™æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹çš„å˜é‡</span>
	<span class="token keyword">var</span> w io<span class="token punctuation">.</span>Writer

	<span class="token comment">// ç»™æ¥å£ç±»å‹å˜é‡èµ‹å€¼</span>
	w <span class="token operator">=</span> os<span class="token punctuation">.</span>Stdout

	<span class="token comment">// è°ƒç”¨</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">// hello</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª" tabindex="-1"><a class="header-anchor" href="#æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª" aria-hidden="true">#</a> æ¥å£ç±»å‹éƒ½å¯ä»¥ç”¨åœ¨å“ª</h3>
<p>æ¥å£æ˜¯ä¸€ç§ç±»å‹ï¼Œé‚£ä¹ˆéƒ½å¯ä»¥ç”¨åœ¨å“ªå‘¢ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰å£°æ˜å˜é‡ä¸ºæ¥å£ç±»å‹</p>
<p>ï¼ˆ2ï¼‰å‡½æ•°å½¢å‚æŒ‡å®šä¸ºæ¥å£ç±»å‹</p>
<p>ï¼ˆ3ï¼‰ç»“æ„ä½“å­—æ®µæŒ‡å®šä¸ºæ¥å£ç±»å‹</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">WriteString</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	io<span class="token punctuation">.</span>Writer
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åº”ç”¨1: å£°æ˜ä¸ºæ¥å£å˜é‡</span>
	<span class="token keyword">var</span> w io<span class="token punctuation">.</span>Writer
	w <span class="token operator">=</span> os<span class="token punctuation">.</span>Stdout
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"hello "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// åº”ç”¨2: å‡½æ•°å½¢å‚ä¸ºæ¥å£ç±»å‹</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">WriteString</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// åº”ç”¨3: ç»“æ„ä½“å­—æ®µä¸ºæ¥å£ç±»å‹</span>
	user <span class="token operator">:=</span> User<span class="token punctuation">{</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> user<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"!\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœï¼š</span>
<span class="token comment">// hello world!</span>
</code></pre></div></details>
<h3 id="æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> æ¥å£ç±»å‹å€¼éƒ½å¯ä»¥æ˜¯ä»€ä¹ˆ</h3>
<p>å‡¡æ˜¯å®ç°äº†æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•çš„å¯¹è±¡éƒ½å¯ä»¥æ˜¯æ¥å£å€¼ï¼Œéƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ</p>
<p>ï¼ˆ1ï¼‰ç»“æ„ä½“ï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰</p>
<p>ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ï¼ˆä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ä½œä¸ºæ¥å£ç±»å‹çš„å€¼ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªå“ˆ~ï¼‰</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token comment">// å®šä¹‰æ¥å£</span>
<span class="token keyword">type</span> Writer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è‡ªå®šä¹‰ç±»å‹</span>
<span class="token keyword">type</span> Stdout <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m Stdout<span class="token punctuation">)</span> <span class="token function">Write</span><span class="token punctuation">(</span>w <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> os<span class="token punctuation">.</span>Stdout<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a Stdout <span class="token comment">// å£°æ˜å˜é‡aä¸ºè‡ªå®šä¹‰ç±»å‹</span>
	<span class="token keyword">var</span> b Writer <span class="token comment">// å£°æ˜å˜é‡bä¸ºæ¥å£ç±»å‹</span>
	b <span class="token operator">=</span> a        <span class="token comment">// è‡ªå®šä¹‰ç±»å‹å®ç°äº†Readeræ¥å£,æ‰€ä»¥å¯ä»¥å°†aèµ‹å€¼ç»™b</span>

	<span class="token comment">// è°ƒç”¨æ–¹æ³•</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> b<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// hello</span>
</code></pre></div></details>
<h3 id="å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…" tabindex="-1"><a class="header-anchor" href="#å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…" aria-hidden="true">#</a> å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// å®šä¹‰Senderæ¥å£</span>
<span class="token keyword">type</span> Sender <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Send</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šä¹‰å¾®ä¿¡åª’ä»‹</span>
<span class="token keyword">type</span> Weixin <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	User     <span class="token builtin">string</span>
	Password <span class="token builtin">string</span>
	Phone    <span class="token builtin">string</span>
	To       <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>Weixin<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span> <span class="token comment">// æŒ‡é’ˆæ–¹æ³•</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Weixin Send: %s\n"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šä¹‰é‚®ç®±åª’ä»‹</span>
<span class="token keyword">type</span> Email <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Addr     <span class="token builtin">string</span>
	Port     <span class="token builtin">string</span>
	User     <span class="token builtin">string</span>
	Password <span class="token builtin">string</span>
	to       <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e Email<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span> <span class="token comment">// å€¼æ–¹æ³•</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Email Send: %s\n"</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æµ‹è¯•1</span>
	<span class="token keyword">var</span> x Sender    <span class="token comment">// å£°æ˜xä¸ºSenderæ¥å£ç±»å‹</span>
	x <span class="token operator">=</span> <span class="token operator">&amp;</span>Weixin<span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// ç»™xèµ‹å€¼, æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„,æ‰€ä»¥è¿™é‡Œå¿…é¡»ä½¿ç”¨æŒ‡é’ˆç±»å‹</span>
	x<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•</span>

	<span class="token comment">// æµ‹è¯•2</span>
	<span class="token keyword">var</span> y<span class="token punctuation">,</span> z Sender <span class="token comment">// å£°æ˜Senderæ¥å£ç±»å‹</span>
	y <span class="token operator">=</span> Email<span class="token punctuation">{</span><span class="token punctuation">}</span>     <span class="token comment">// èµ‹å€¼</span>
	z <span class="token operator">=</span> <span class="token operator">&amp;</span>Email<span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">// èµ‹å€¼</span>
	y<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•</span>
	z<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span> <span class="token comment">// è°ƒç”¨æ–¹æ³•,æŒ‡é’ˆå¯¹è±¡è°ƒç”¨çš„æœ¬è´¨è¿˜æ˜¯å€¼å¯¹è±¡è°ƒç”¨,åªæ˜¯è¯­æ³•ç³–</span>

	<span class="token comment">// è¾“å‡ºç»“æœ</span>
	<span class="token comment">// Weixin Send: hello</span>
	<span class="token comment">// Email Send: hello</span>
	<span class="token comment">// Email Send: hello</span>
	<span class="token comment">// æ€»ç»“:</span>
	<span class="token comment">// (1) æŒ‡é’ˆç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•å¿…é¡»ä½¿ç”¨æŒ‡é’ˆå¯¹è±¡æ¥è°ƒç”¨</span>
	<span class="token comment">// (2) å€¼ç±»å‹æ¥æ”¶è€…çš„æ–¹æ³•æ—¢å¯ä»¥ç”¨å€¼å¯¹è±¡è°ƒç”¨,ä¹Ÿå¯ä»¥ç”¨æŒ‡é’ˆå¯¹è±¡è°ƒç”¨</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="ç©ºæ¥å£" tabindex="-1"><a class="header-anchor" href="#ç©ºæ¥å£" aria-hidden="true">#</a> ç©ºæ¥å£</h3>
<p><span style="color: red; font-weight: bold;">ç©ºæ¥å£æ„ä¸ºç€å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„å€¼</span>ï¼Œ</p>
<p><span style="color: blue; font-weight: bold;">ä¹Ÿæ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ç¡®å®šå€¼æ˜¯ä»€ä¹ˆç±»å‹</span></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// å®šä¹‰ç©ºæ¥å£</span>
<span class="token keyword">type</span> Empty <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> a Empty
	a <span class="token operator">=</span> <span class="token number">1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>	<span class="token comment">// 1</span>
	a <span class="token operator">=</span> <span class="token string">"Hello"</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>	<span class="token comment">// Hello</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ–­è¨€å’ŒæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#æ–­è¨€å’ŒæŸ¥è¯¢" aria-hidden="true">#</a> æ–­è¨€å’ŒæŸ¥è¯¢</h3>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token comment">//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</span>
<span class="token keyword">type</span> EmailSender <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Addr     <span class="token builtin">string</span>
	Port     <span class="token builtin">string</span>
	User     <span class="token builtin">string</span>
	Password <span class="token builtin">string</span>
	to       <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>EmailSender<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">//å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</span>
<span class="token keyword">type</span> WeiChartSender <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	User     <span class="token builtin">string</span>
	Password <span class="token builtin">string</span>
	to       <span class="token builtin">string</span>
	Phone    <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s <span class="token operator">*</span>WeiChartSender<span class="token punctuation">)</span> <span class="token function">Send</span><span class="token punctuation">(</span>msg <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token comment">//å®šä¹‰ä¸€ä¸ªæ¥å£</span>
<span class="token keyword">type</span> Sender <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Send</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> a Sender <span class="token operator">=</span> <span class="token operator">&amp;</span>WeiChartSender<span class="token punctuation">{</span>User<span class="token punctuation">:</span> <span class="token string">"æˆ‘æ˜¯å°a"</span><span class="token punctuation">}</span> <span class="token comment">// å®šä¹‰senderä¸ºSenderæ¥å£ç±»å‹; å¦‚æœç”¨newåˆå§‹åŒ–,ç›´æ¥èµ‹å€¼å°±ä¼šæŠ¥é”™äº†</span>
	b <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>WeiChartSender<span class="token punctuation">)</span>                     <span class="token comment">// å®šä¹‰bä¸ºWeiChartSenderç»“æ„ä½“æŒ‡é’ˆç±»å‹</span>
	b<span class="token punctuation">.</span>User <span class="token operator">=</span> <span class="token string">"æˆ‘æ˜¯å°b"</span>

	<span class="token comment">// æ­£å¸¸è°ƒç”¨æ–¹æ³•</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ­£å¸¸æ–¹æ³•è°ƒç”¨:"</span><span class="token punctuation">)</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">)</span> <span class="token comment">// Hello world!</span>
	<span class="token boolean">_</span> <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">)</span> <span class="token comment">// Hello world!</span>

	<span class="token comment">// æŸ¥çœ‹å„ä¸ªç±»å‹,çœ‹èµ·æ¥ä¸¤ä¸ªç±»å‹éƒ½ä¸€æ ·</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næŸ¥çœ‹ç±»å‹:"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// *main.WeiChartSender</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">// *main.WeiChartSender</span>

	<span class="token comment">// è°ƒç”¨å±æ€§, æ¥å£ç±»å‹çš„ä¸èƒ½è°ƒç”¨,å› ä¸ºæ¥å£åªèƒ½è¦æ±‚å‡½æ•°, å®šä¹‰ä¸äº†å±æ€§,å½“ç„¶ä¹Ÿæ²¡æœ‰å®ç°</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næŸ¥çœ‹å±æ€§:"</span><span class="token punctuation">)</span>
	<span class="token comment">//fmt.Println(a.User) // è¿™ä¸ªä¼šæŠ¥é”™ a.User undefined (type Sender has no field or method User)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"b.User=%s\n"</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>User<span class="token punctuation">)</span>

	<span class="token comment">// æ¥å£ç±»å‹è½¬æ¢ä¸ºç»“æ„ä½“ -- æ–­è¨€æ–¹å¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næ–­è¨€æ–¹å¼:"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> obj<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>WeiChartSender<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ–­è¨€æˆåŠŸ: %#v\n"</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"a.User=%s\n"</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>User<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ–­è¨€å¤±è´¥"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// æ¥å£ç±»å‹è½¬æ¢ä¸ºç»“æ„ä½“ -- æŸ¥è¯¢æ–¹å¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\næŸ¥è¯¢æ–¹å¼:"</span><span class="token punctuation">)</span>
	<span class="token keyword">switch</span> obj <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token operator">*</span>WeiChartSender<span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢æˆåŠŸ: %#v\n"</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"a.User=%s\n"</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>User<span class="token punctuation">)</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æŸ¥è¯¢å¤±è´¥\n"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>æ­£å¸¸æ–¹æ³•è°ƒç”¨:
Hello world<span class="token operator">!</span>                                                                
Hello world<span class="token operator">!</span>                                                                
                                                                            
æŸ¥çœ‹ç±»å‹:                                                                   
*main.WeiChartSender                                                        
*main.WeiChartSender                                                        
                                                                            
æŸ¥çœ‹å±æ€§:                                                                   
b.User<span class="token operator">=</span>æˆ‘æ˜¯å°b                                                              
                                                                            
æ–­è¨€æ–¹å¼:                                                                   
æ–­è¨€æˆåŠŸ: <span class="token operator">&amp;</span>main.WeiChartSender<span class="token punctuation">{</span>User:<span class="token string">"æˆ‘æ˜¯å°a"</span>, Password:<span class="token string">""</span>, to:<span class="token string">""</span>, Phone:<span class="token string">""</span><span class="token punctuation">}</span>
a.User<span class="token operator">=</span>æˆ‘æ˜¯å°a                                                              
                                                                            
æŸ¥è¯¢æ–¹å¼:                                                                   
æŸ¥è¯¢æˆåŠŸ: <span class="token operator">&amp;</span>main.WeiChartSender<span class="token punctuation">{</span>User:<span class="token string">"æˆ‘æ˜¯å°a"</span>, Password:<span class="token string">""</span>, to:<span class="token string">""</span>, Phone:<span class="token string">""</span><span class="token punctuation">}</span>
a.User<span class="token operator">=</span>æˆ‘æ˜¯å°a
</code></pre></div><h3 id="å¸¸ç”¨æ¥å£" tabindex="-1"><a class="header-anchor" href="#å¸¸ç”¨æ¥å£" aria-hidden="true">#</a> å¸¸ç”¨æ¥å£</h3>
<h4 id="stringer" tabindex="-1"><a class="header-anchor" href="#stringer" aria-hidden="true">#</a> Stringer</h4>
<p>å­—ç¬¦ä¸²åŠŸèƒ½æ¥å£</p>
<p>å®šä¹‰å¦‚ä¸‹</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// fmt.print.go</span>
<span class="token keyword">type</span> Stringer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æµ‹è¯•ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> A <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
	Age  <span class="token builtin">uint</span>
	Sex  <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"String: å¤§å®¶å¥½, æˆ‘æ˜¯%s, æ€§åˆ«%s, å¹´é¾„%d"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Sex<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">GoString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"GoString: å¤§å®¶å¥½, æˆ‘æ˜¯%s, æ€§åˆ«%s, å¹´é¾„%d"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Sex<span class="token punctuation">,</span> a<span class="token punctuation">.</span>Age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a <span class="token operator">:=</span> <span class="token operator">&amp;</span>A<span class="token punctuation">{</span>
		Name<span class="token punctuation">:</span> <span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span>
		Age<span class="token punctuation">:</span>  <span class="token number">18</span><span class="token punctuation">,</span>
		Sex<span class="token punctuation">:</span>  <span class="token string">"ç”·"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%v\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%+v\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// GoString</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%q\n"</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18
String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  
String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  
GoString: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18
String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18  
<span class="token string">"String: å¤§å®¶å¥½, æˆ‘æ˜¯å¼ ä¸‰, æ€§åˆ«ç”·, å¹´é¾„18"</span>
</code></pre></div><h2 id="-5" tabindex="-1"><a class="header-anchor" href="#-5" aria-hidden="true">#</a> </h2>
<h2 id="å¹¶å‘ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘ç¼–ç¨‹" aria-hidden="true">#</a> å¹¶å‘ç¼–ç¨‹</h2>
<h3 id="goroutine" tabindex="-1"><a class="header-anchor" href="#goroutine" aria-hidden="true">#</a> <code v-pre>Goroutine</code></h3>
<h4 id="åŸºç¡€-1" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€-1" aria-hidden="true">#</a> åŸºç¡€</h4>
<p>Goè¯­è¨€ä¸­æ¯ä¸ªå¹¶å‘æ‰§è¡Œçš„å•å…ƒå«<code v-pre>Goroutine</code>ï¼ˆåç¨‹ï¼‰ï¼Œä½¿ç”¨<code v-pre>go</code>å…³é”®å­—åæ¥å‡½æ•°è°ƒç”¨æ¥åˆ›å»ºä¸€ä¸ª<code v-pre>Goroutine</code></p>
<p><code v-pre>Goroutine</code>æ˜¯å¹¶å‘å®‰å…¨çš„</p>
<details class="custom-container details"><summary>æµ‹è¯•åç¨‹ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"runtime"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">'A'</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// start</span>
<span class="token comment">// end</span>

<span class="token comment">// é—®ï¼šåç¨‹å‡½æ•°æ²¡æœ‰æ‰§è¡Œå—ï¼Ÿ</span>
<span class="token comment">// ç­”ï¼šåŸå› æ˜¯main()å‡½æ•°å¹¶ä¸ä¼šç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œåå†é€€å‡º,è¿™é‡Œmainå‡½æ•°å·²ç»æ‰§è¡Œå®Œäº†ï¼Œåç¨‹è¿˜æ²¡æ‰§è¡Œåˆ°forå¾ªç¯ï¼Œæ‰€ä»¥é€ æˆåç¨‹æ²¡æœ‰æ‰§è¡Œçš„å‡è±¡</span>
</code></pre></div></details>
<h4 id="ç­‰å¾…goroutineæ‰§è¡Œå®Œæˆ" tabindex="-1"><a class="header-anchor" href="#ç­‰å¾…goroutineæ‰§è¡Œå®Œæˆ" aria-hidden="true">#</a> ç­‰å¾…Goroutineæ‰§è¡Œå®Œæˆ</h4>
<details class="custom-container details"><summary>ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡º-ä½¿ç”¨WaitGroup-æ–¹å¼1</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token comment">// å£°æ˜WaitGroup</span>
<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

<span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">'A'</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// start</span>
<span class="token comment">// A</span>
<span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span>
<span class="token comment">// 10</span>
<span class="token comment">// end</span>
</code></pre></div></details>
<details class="custom-container details"><summary>ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡º-ä½¿ç”¨WaitGroup-æ–¹å¼2ï¼ˆæ¨èï¼‰</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">'A'</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span>

	<span class="token comment">// å¦‚æœéœ€è¦ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’wgï¼Œåˆ™wgå¿…é¡»æ˜¯å¼•ç”¨ç±»å‹</span>
	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span>

	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// start</span>
<span class="token comment">// A</span>
<span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span>
<span class="token comment">// 10</span>
<span class="token comment">// end</span>
</code></pre></div></details>
<details class="custom-container details"><summary>ç­‰å¾…æ‰€æœ‰åç¨‹æ‰§è¡Œå®Œå†é€€å‡º-ä½¿ç”¨ Channel</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">taskA</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">taskB</span><span class="token punctuation">(</span>ch <span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token char">'A'</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token char">'Z'</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span>

	<span class="token comment">// åˆå§‹åŒ–channel</span>
	n <span class="token operator">:=</span> <span class="token number">2</span> <span class="token comment">// ä»£è¡¨å¯åŠ¨å‡ ä¸ªgroutine</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">taskA</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token function">taskB</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token comment">// å¯åŠ¨å¦ä¸€ä¸ªåç¨‹</span>

	<span class="token comment">// é˜»å¡</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token operator">&lt;-</span>ch
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// start</span>
<span class="token comment">// A</span>
<span class="token comment">// å†…å®¹å¤ªå¤šçœç•¥...	</span>
<span class="token comment">// 10</span>
<span class="token comment">// end</span>
</code></pre></div></details>
<h4 id="goroutineç›¸å…³å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#goroutineç›¸å…³å‡½æ•°" aria-hidden="true">#</a> Goroutineç›¸å…³å‡½æ•°</h4>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>runtime.NumGoroutine()</code></td>
<td>è¿”å›å½“å‰å­˜åœ¨çš„<code v-pre>Goroutine</code>æ•°é‡</td>
</tr>
<tr>
<td><code v-pre>runtime.Gosched()</code></td>
<td>æš‚åœå½“å‰<code v-pre>Goroutine</code>ï¼Œç”±Goè‡ªåŠ¨è°ƒåº¦å…¶ä»–<code v-pre>Goroutine</code>æ‰§è¡Œ</td>
</tr>
<tr>
<td><code v-pre>runtime.Goexit()</code></td>
<td>é€€å‡ºå½“å‰<code v-pre>Goroutine</code></td>
</tr>
<tr>
<td><code v-pre>runtime.GOMAXPROCS(n)</code></td>
<td>è®¾ç½®å¯ä»¥ä½¿ç”¨çš„æœ€å¤§CPUæ•°é‡ï¼Œé»˜è®¤å€¼ä¸º<code v-pre>runtime.NumCPU()</code>ï¼›è¿”å›ä¸Šä¸€æ¬¡è®¾ç½®çš„å€¼</td>
</tr>
</tbody>
</table>
<h3 id="channel" tabindex="-1"><a class="header-anchor" href="#channel" aria-hidden="true">#</a> Channel</h3>
<h4 id="åŸºç¡€-2" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€-2" aria-hidden="true">#</a> åŸºç¡€</h4>
<p><code v-pre>Channel</code>ç”¨äº<code v-pre>Goroutine</code>ä¹‹é—´çš„é€šä¿¡ï¼Œä¸­æ–‡å¯ä»¥ç§°ä¸ºâ€ç®¡é“&quot;æˆ–&quot;é€šé“&quot;</p>
<p><strong>æ ¹æ®çŠ¶æ€å¯ä»¥åˆ†ä¸º</strong></p>
<ul>
<li><code v-pre>nil</code>ï¼Œåªå£°æ˜æœªåˆå§‹åŒ–çš„<code v-pre>Channel</code></li>
<li>æ­£å¸¸ï¼Œå£°æ˜å¹¶åˆå§‹åŒ–çš„<code v-pre>Channel</code></li>
<li>å…³é—­ï¼Œä½¿ç”¨<code v-pre>close(Channel)</code></li>
</ul>
<p><strong>æ ¹æ®ç¼“å†²æ–¹å¼å¯ä»¥åˆ†ä¸º</strong></p>
<ul>
<li>æ— ç¼“å†²åŒº<code v-pre>Channel</code></li>
<li>å¸¦ç¼“å†²åŒº<code v-pre>Channel</code></li>
</ul>
<p><strong>æ ¹æ®è¯»å†™æ–¹å¼å¯ä»¥åˆ†ä¸º</strong></p>
<ul>
<li>
<p>è¯»å†™<code v-pre>Channel</code></p>
</li>
<li>
<p>åªè¯»<code v-pre>Channel</code></p>
</li>
<li>
<p>åªå†™<code v-pre>Channel</code></p>
</li>
</ul>
<p><strong>å®šä¹‰</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// å£°æ˜ä¸€ä¸ªintç±»å‹çš„channel</span>
<span class="token keyword">var</span> channel <span class="token keyword">chan</span> <span class="token builtin">int</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%T\n"</span><span class="token punctuation">,</span> channel<span class="token punctuation">)</span> <span class="token comment">// chan int</span>

<span class="token comment">// chèµ‹å€¼</span>
channel <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v\n"</span><span class="token punctuation">,</span> channel<span class="token punctuation">)</span> <span class="token comment">// (chan int)(0xc00005a060)</span>

<span class="token comment">// ä»¥ä¸Šä¸¤å¥å¯ä»¥ç®€å†™æˆå¦‚ä¸‹å½¢å¼ï¼ˆæ¨èè¿™ç§å†™æ³•ï¼‰</span>
ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>è¯»å’Œå†™</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// å†™æ•°æ®ï¼šå°†100å†™å…¥åˆ°channelä¸­</span>
ch <span class="token operator">&lt;-</span> <span class="token number">100</span>

<span class="token comment">// è¯»æ•°æ®-æ–¹å¼1ï¼Œ vä»£è¡¨è¯»åˆ°çš„å€¼</span>
v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch

<span class="token comment">// è¯»æ•°æ®-æ–¹å¼2ï¼Œ vä»£è¡¨è¯»åˆ°çš„å€¼, okä»£è¡¨channelçš„çŠ¶æ€ï¼Œtrueä¸ºchannelæ­£å¸¸ï¼Œfalseä¸ºchannelå·²ç»å…³é—­</span>
v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch

<span class="token comment">// è¯»å–ç®¡é“-æ–¹å¼3, ä½¿ç”¨rangeéå†ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œè‹¥Channelå…³é—­åˆ™forå¾ªç¯ä¹Ÿéšä¹‹ç»“æŸ</span>
<span class="token keyword">for</span> v<span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…³é—­channel</span>
<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>

<span class="token comment">// è®°å¿†æŠ€å·§ï¼šç®­å¤´ä»£è¡¨æ•°æ®æµå‘</span>
</code></pre></div><h4 id="æ— ç¼“å†²åŒºchannel" tabindex="-1"><a class="header-anchor" href="#æ— ç¼“å†²åŒºchannel" aria-hidden="true">#</a> æ— ç¼“å†²åŒº<code v-pre>Channel</code></h4>
<p><strong>å®šä¹‰</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>	<span class="token comment">// æ— ç¼“å†²åŒºchannel, ç­‰åŒäºmake(chan int, 0)ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨å¯ç¼“å†²æ•°æ®ä¸ªæ•°</span>
</code></pre></div><p><strong>ç‰¹æ€§</strong></p>
<ul>
<li>è¯»å’Œå†™ä¸èƒ½åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</li>
<li>è¯»å†™æ¬¡æ•°ä¸ä¸€è‡´ä¼šå‘ç”Ÿæ­»é”ï¼š<code v-pre>fatal error: all goroutines are asleep - deadlock!</code></li>
<li>ç®¡é“å…³é—­åï¼š
<ul>
<li>å‡å¦‚ç»§ç»­è¯»ï¼Œä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¼šè¯»å–åˆ°é›¶å€¼</li>
<li>å‡å¦‚ç»§ç»­å†™ï¼Œä¼šæŠ¥é”™ï¼š<code v-pre>panic: send on closed channel</code></li>
</ul>
</li>
<li>å¦‚æœç®¡é“ä¸€åˆ‡éƒ½æ­£å¸¸ï¼Œæœªè¯»å–ä¹‹å‰å†™å…¥ä¼šé˜»å¡ï¼Œæœªå†™å…¥ä¹‹å‰è¯»å–ä¹Ÿä¼šé˜»å¡</li>
</ul>
<details class="custom-container details"><summary>æµ‹è¯•1: åŸºç¡€ä½¿ç”¨</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> curTime <span class="token operator">:=</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			second <span class="token operator">:=</span> curTime<span class="token punctuation">.</span><span class="token function">Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			ch <span class="token operator">&lt;-</span> second
			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Write to Channel  %d\n"</span><span class="token punctuation">,</span> second<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»æ•°æ®</span>
	<span class="token keyword">for</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> ch <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Read from Channel %d\n\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:32 Write to Channel  <span class="token number">32</span>
<span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:32 Read from Channel <span class="token number">32</span>

<span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:33 Write to Channel  <span class="token number">33</span>
<span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:33 Read from Channel <span class="token number">33</span>

<span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:34 Write to Channel  <span class="token number">34</span>
<span class="token number">2022</span>/04/17 <span class="token number">11</span>:51:34 Read from Channel <span class="token number">34</span>
</code></pre></div><h4 id="å¸¦ç¼“å†²åŒºchannel" tabindex="-1"><a class="header-anchor" href="#å¸¦ç¼“å†²åŒºchannel" aria-hidden="true">#</a> å¸¦ç¼“å†²åŒº<code v-pre>Channel</code></h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code>ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>	<span class="token comment">// ä»£è¡¨ç¼“å†²åŒºé•¿åº¦ä¸º3ï¼Œå¯ä»¥æ”¾3ä¸ªæ•°æ®</span>
</code></pre></div><p><strong>ç‰¹æ€§</strong></p>
<ul>
<li>
<p>è¯»å’Œå†™å¯ä»¥åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</p>
</li>
<li>
<p>è¯»å†™æ¬¡æ•°å¯ä»¥ä¸ä¸€è‡´ï¼Œæœ€å¤§å·®ä¸èƒ½è¶…è¿‡ç¼“å†²åŒºé•¿åº¦ï¼Œå¦åˆ™åŒæ ·ä¼šå¼•å‘æ­»é”ï¼š<code v-pre>fatal error: all goroutines are asleep - deadlock!</code></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œç¼“å†²åŒºå¤§å°ä¸º1ï¼Œåˆ™å†™å…¥1æ¬¡è¯»å–0æ¬¡æ²¡æœ‰é—®é¢˜ï¼Œå†™å…¥2æ¬¡è¯»å–0æ¬¡å°±ä¼šå¼•å‘æ­»é”</p>
</li>
<li>
<p>ç®¡é“å…³é—­åï¼š</p>
<ul>
<li>å‡å¦‚ç»§ç»­è¯»ï¼Œä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¼šå…ˆè¯»å–ç¼“å†²åŒºï¼Œè‹¥ç¼“å†²åŒºè¯»å®Œä¼šè¯»åˆ°é›¶å€¼</li>
<li>å‡å¦‚ç»§ç»­å†™ï¼Œä¼šæŠ¥é”™ï¼š<code v-pre>panic: send on closed channel</code></li>
</ul>
</li>
<li>
<p>å¦‚æœç®¡é“ä¸€åˆ‡éƒ½æ­£å¸¸ï¼Œ</p>
<ul>
<li>åªæœ‰1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code v-pre>mainå‡½æ•°</code>ï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šæŠ¥é”™ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šæŠ¥é”™</li>
<li>è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ<code v-pre>go</code>å…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šé˜»å¡ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šé˜»å¡</li>
</ul>
</li>
</ul>
<details class="custom-container details"><summary>æµ‹è¯•1: è¯»å’Œå†™å¯ä»¥åœ¨åŒä¸€ä¸ªåç¨‹ä¸­</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math/rand"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–éšæœºæ•°ç§å­</span>
	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥æ•°æ®ï¼ˆ0-99ä¹‹é—´çš„éšæœºæ•°ï¼‰</span>
	ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ•°æ®: "</span><span class="token punctuation">,</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•2: è¯»å†™æ¬¡æ•°å¯ä»¥ä¸ä¸€è‡´</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"math/rand"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–éšæœºæ•°ç§å­</span>
	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º10</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥æ•°æ®æ¬¡æ•°, å†™å…¥10æ¬¡è¯»å–0æ¬¡æ²¡é—®é¢˜ï¼Œå†™å…¥11æ¬¡è¯»å–0æ¬¡å°±ä¼šå‘ç”Ÿæ­»é”ï¼Œå› ä¸ºç¼“å†²åŒºå†™æ»¡äº†</span>
	n <span class="token operator">:=</span> <span class="token number">10</span>

	<span class="token comment">// å†™å…¥æ•°æ®ï¼ˆ0-99ä¹‹é—´çš„éšæœºæ•°ï¼‰</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•3: Channelå…³é—­åå†è¯»å–ï¼Œä¼šè¯»å®Œç¼“å†²åŒºåè¯»å–åˆ°é›¶å€¼</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™ç¼“å†²åŒº</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">200</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">300</span>

	<span class="token comment">// å…³é—­channel</span>
	<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// 100</span>
<span class="token comment">// 200</span>
<span class="token comment">// 300</span>
<span class="token comment">// 0</span>
<span class="token comment">// 0</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•4: Channelå…³é—­åå†å†™å…¥ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œä¸æ˜¯å†™å…¥åˆ°ç¼“å†²åŒº</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å…³é—­channel</span>
	<span class="token function">close</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®ï¼Œchannelå·²ç»å…³é—­äº†ï¼Œä¸èƒ½å†™å…¥åˆ°ç¼“å†²åŒºï¼Œä¼šç›´æ¥æŠ¥é”™ï¼Œè¿™å’Œæ— ç¼“å†²channelè¡¨ç°ä¸€è‡´</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•5: 1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ`mainå‡½æ•°`ï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šæŠ¥é”™</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span> <span class="token comment">// è¿™é‡Œç›´æ¥æŠ¥é”™</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•6: 1ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆ`mainå‡½æ•°`ï¼‰ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šæŠ¥é”™</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>

	<span class="token comment">// è¯»å–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// æ­£å¸¸è¯»å–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>ch<span class="token punctuation">)</span> <span class="token comment">// æŠ¥é”™</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•7: è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆgoå…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œå†™æ»¡ç¼“å†²åŒºå†å†™å…¥ä¼šé˜»å¡</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"runtime"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å¼€å¯ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åç¨‹è¿è¡Œç»“æŸ"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥</span>
	<span class="token comment">// 		å¾ªç¯æ¬¡æ•°ï¼šç¼“å†²åŒº+1æ¬¡</span>
	<span class="token comment">//		åç¨‹æœªè¿è¡Œå®Œä¹‹å‰ï¼Œç¬¬4æ¬¡å†™å…¥ä¼šå¡ä½ï¼Œç­‰åç¨‹è¿è¡Œå®Œï¼Œç¬¬4æ¬¡å†™å…¥å°±ä¼šæŠ¥é”™</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token function">cap</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ã€å¼€å§‹ã€‘ç¬¬%dæ¬¡å†™å…¥æ•°æ® | å½“å‰åç¨‹æ•°é‡: %d\n"</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ã€ç»“æŸã€‘ç¬¬%dæ¬¡å†™å…¥æ•°æ® | å½“å‰åç¨‹æ•°é‡: %d\n\n"</span><span class="token punctuation">,</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬1æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>
<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬1æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>

<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬2æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>
<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬2æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>

<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬3æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>
<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€ç»“æŸã€‘ç¬¬3æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>

<span class="token number">2022</span>/04/17 <span class="token number">13</span>:28:40 ã€å¼€å§‹ã€‘ç¬¬4æ¬¡å†™å…¥æ•°æ® <span class="token operator">|</span> å½“å‰åç¨‹æ•°é‡: <span class="token number">2</span>
<span class="token number">2022</span>/04/17 <span class="token number">13</span>:29:40 åç¨‹è¿è¡Œç»“æŸ
fatal error: all goroutines are asleep - deadlock<span class="token operator">!</span>

goroutine <span class="token number">1</span> <span class="token punctuation">[</span>chan send<span class="token punctuation">]</span>:
main.main<span class="token punctuation">(</span><span class="token punctuation">)</span>
        C:/Users/Administrator/GolandProjects/learn/main.go:24 +0x18d

Process finished with the <span class="token builtin class-name">exit</span> code <span class="token number">2</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•8: è‡³å°‘2ä¸ªåç¨‹æƒ…å†µä¸‹ï¼ˆgoå…³é”®å­—è‡³å°‘å¯åŠ¨1ä¸ªï¼‰ï¼Œè¯»å®Œç¼“å†²åŒºå†è¯»å–ä¹Ÿä¼šé˜»å¡</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼Œç¼“å†²åŒºå¤§å°ä¸º3</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å¼€å¯ä¸€ä¸ªåç¨‹</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åç¨‹è¿è¡Œç»“æŸ"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹è¯»å–"</span><span class="token punctuation">)</span>
	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–ç»“æŸ"</span><span class="token punctuation">,</span> v<span class="token punctuation">,</span> ok<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/17 <span class="token number">13</span>:36:51 å¼€å§‹è¯»å–
<span class="token number">2022</span>/04/17 <span class="token number">13</span>:37:51 åç¨‹è¿è¡Œç»“æŸ
fatal error: all goroutines are asleep - deadlock<span class="token operator">!</span>

goroutine <span class="token number">1</span> <span class="token punctuation">[</span>chan receive<span class="token punctuation">]</span>:
main.main<span class="token punctuation">(</span><span class="token punctuation">)</span>
        C:/Users/Administrator/GolandProjects/learn/main.go:20 +0x79
</code></pre></div></details>
<h4 id="åªè¯»å’Œåªå†™é™åˆ¶" tabindex="-1"><a class="header-anchor" href="#åªè¯»å’Œåªå†™é™åˆ¶" aria-hidden="true">#</a> åªè¯»å’Œåªå†™é™åˆ¶</h4>
<p>åªæ˜¯åœ¨åŸæœ‰çš„<code v-pre>Channel</code>ä¸ŠåŠ äº†ä¸€å±‚é™åˆ¶ï¼Œåªèƒ½è¯»æˆ–åªèƒ½å†™ï¼Œé»˜è®¤çš„<code v-pre>Channel</code>æ˜¯è¯»å†™éƒ½æ”¯æŒçš„</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">chanReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¸¦ç¼“å†²åŒºçš„channelï¼Œé»˜è®¤æ˜¯æ”¯æŒè¯»å†™çš„</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">200</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">300</span>

	<span class="token comment">// å£°æ˜ä¸ºåªè¯»channel</span>
	<span class="token keyword">var</span> chReadOnly <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span>
	chReadOnly <span class="token operator">=</span> ch

	<span class="token comment">// è¯»æ•°æ®</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>chReadOnly<span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®ä¼šæŠ¥é”™</span>
	<span class="token comment">//chReadOnly &lt;- 400</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">chanWriteOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜åªå†™channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">100</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">200</span>
	ch <span class="token operator">&lt;-</span> <span class="token number">300</span>

	<span class="token comment">// è¯»æ•°æ®ä¼šæŠ¥é”™</span>
	<span class="token comment">//fmt.Println(&lt;-ch)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">chanReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">chanWriteOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="å¤šè·¯å¤ç”¨select" tabindex="-1"><a class="header-anchor" href="#å¤šè·¯å¤ç”¨select" aria-hidden="true">#</a> å¤šè·¯å¤ç”¨select</h4>
<p><strong>è¯´æ˜</strong></p>
<p><code v-pre>select</code>æ˜¯ä¸“é—¨ä¸º<code v-pre>Goroutine</code>è®¾è®¡çš„ï¼Œç±»ä¼¼äº<code v-pre>switch..case</code>è¯­æ³•</p>
<ul>
<li>æ¯ä¸ª<code v-pre>case </code>è¡¨è¾¾å¼ä¸­éƒ½åªèƒ½åŒ…å«æ“ä½œ<code v-pre>Channel</code>çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚è¯»æˆ–å†™</li>
<li>å¦‚æœæœ‰å¤šä¸ª<code v-pre>case </code>éƒ½å¯ä»¥è¿è¡Œï¼Œ<code v-pre>select</code>ä¼šéšæœºå…¬å¹³åœ°é€‰å‡ºä¸€ä¸ªæ‰§è¡Œï¼Œå…¶ä»–ä¸ä¼šæ‰§è¡Œ</li>
<li>å¦‚æœå¤šä¸ª<code v-pre>case </code>éƒ½ä¸èƒ½è¿è¡Œï¼Œè‹¥æœ‰<code v-pre>default </code>å­å¥ï¼Œåˆ™æ‰§è¡Œè¯¥è¯­å¥ï¼Œåä¹‹ï¼Œ<code v-pre>select </code>å°†é˜»å¡ï¼Œç›´åˆ°æŸä¸ª<code v-pre>case </code>å¯ä»¥è¿è¡Œ</li>
<li>ç©º<code v-pre>select</code>ä¼šä¸€ç›´é˜»å¡</li>
</ul>
<p><strong>ç¤ºä¾‹ä»£ç </strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c1 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
	c2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// æµ‹è¯•1ï¼šç›´æ¥æ‰§è¡Œä¼šæ‰§è¡Œdefaultè¯­å¥</span>

	<span class="token comment">// æµ‹è¯•2: ç»™C1ç®¡é“å†™å…¥æ•°æ®ï¼›ç»“æœï¼šåœ¨C1ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š 1</span>
	<span class="token comment">//c1 &lt;- 1</span>

	<span class="token comment">// æµ‹è¯•3ï¼Œç›´æ¥å…³é—­ç®¡é“ï¼›ç»“æœï¼šC1ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼:  0</span>
	<span class="token comment">//close(c1)</span>

	<span class="token comment">// æµ‹è¯•4ï¼Œä¸¤ä¸ªç®¡é“éƒ½å…³é—­ï¼Œé‚£ä¹ˆselectä¼šéšæœºå–ä¸€ä¸ªï¼Œç„¶åæ‰§è¡Œselectåé¢çš„é€»è¾‘</span>
	<span class="token comment">//close(c1)</span>
	<span class="token comment">//close(c2)</span>

	<span class="token comment">// åœ¨å¤šä¸ªç®¡é“ä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œæˆåŠŸå°±æ‰§è¡Œç›¸åº”é€»è¾‘</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c1<span class="token punctuation">:</span>
		<span class="token keyword">if</span> ok <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åœ¨C1ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"C1ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>c2<span class="token punctuation">:</span>
		<span class="token keyword">if</span> ok <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"åœ¨C2ç®¡é“ä¸­è¯»å–åˆ°å€¼ï¼š"</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"C2ç®¡é“ä¸­çš„æ•°æ®ä¸ºé›¶å€¼: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"select defaultè¿è¡Œ"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p><strong>for{ select }é—®é¢˜</strong></p>
<p>å½“éœ€è¦å¾ªç¯æ“ä½œæ—¶éœ€è¦ä¸<code v-pre>for</code>è¿ç”¨ï¼Œè¿™æ—¶å€™å¦‚æœ<code v-pre>select</code>ä¸­å«æœ‰<code v-pre>break</code>ï¼Œé‚£ä¹ˆåªèƒ½è·³å‡º<code v-pre>select</code>å±‚è€Œä¸èƒ½è·³å‡º<code v-pre>for</code>å¾ªç¯ï¼Œä¸‹é¢æ¼”ç¤ºä¸€ä¸‹</p>
<details class="custom-container details"><summary>é—®é¢˜ä»£ç ï¼šfor{ select }ä¸­åªèƒ½è·³å‡ºselectä¸èƒ½è·³å‡ºforå¾ªç¯</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math/rand"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
			<span class="token keyword">if</span> v <span class="token operator">>=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–"</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// é¢†å¥–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹..."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>ä¿®æ­£-æ–¹å¼1ï¼šä½¿ç”¨break æ ‡ç­¾</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math/rand"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span>
ForEnd<span class="token punctuation">:</span>		<span class="token comment">// æ·»åŠ ä¸€ä¸ªæ ‡ç­¾</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
			<span class="token keyword">if</span> v <span class="token operator">>=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–"</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span> ForEnd	<span class="token comment">// è·³å‡ºæ­¤æ ‡ç­¾</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// é¢†å¥–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹..."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>ä¿®æ­£-æ–¹å¼2ï¼šä½¿ç”¨goto æ ‡ç­¾</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"math/rand"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// æŠ½å¥–ï¼Œè·å¥–çš„IDæ”¾å…¥channelä¸­</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ch <span class="token operator">&lt;-</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å¼€å¥–ï¼Œä»channelä¸­è¯»æ•°æ®</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> v <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
			<span class="token keyword">if</span> v <span class="token operator">>=</span> <span class="token number">100</span> <span class="token operator">&amp;&amp;</span> v <span class="token operator">&lt;=</span> <span class="token number">400</span> <span class="token punctuation">{</span> <span class="token comment">// ä¸ºäº†æé«˜ä¸­å¥–å‡ ç‡..</span>
				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ­å–œä½ ä¸­å¥–äº†ï¼Œè¯·å»é¢†å¥–"</span><span class="token punctuation">)</span>
				<span class="token keyword">goto</span> ForEnd	<span class="token comment">// è·³åˆ°æŒ‡å®šæ ‡ç­¾</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
ForEnd<span class="token punctuation">:</span> <span class="token comment">// å®šä¹‰æ ‡ç­¾</span>

	<span class="token comment">// é¢†å¥–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ„Ÿè°¢CCTV, æ„Ÿè°¢MTV, æ„Ÿè°¢å…šå’Œäººæ°‘çš„æ ½åŸ¹..."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="ç»ƒä¹ -select-è®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ -select-è®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´" aria-hidden="true">#</a> ç»ƒä¹ :select:è®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´</h4>
<details class="custom-container details"><summary>è®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆæœ‰é—®é¢˜ç‰ˆæœ¬ï¼Œä¸»è¦æ˜¯å­¦ä¹ è¶…æ—¶æ ¸å¿ƒé€»è¾‘ï¼‰</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// æ¨¡æ‹Ÿå‡½æ•°è€—æ—¶æ“ä½œ</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>

	<span class="token comment">// æ‰§è¡Œåç¨‹</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		ret <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> <span class="token number">222</span><span class="token punctuation">)</span> <span class="token comment">// è¿™ä¸ªæ˜¯æˆ‘ä»¬åŸæœ‰çš„å‡½æ•°,å¹¶ä¸åšä»»ä½•ä¿®æ”¹ï¼Œéä¾µå…¥å¼åšè¶…æ—¶æ§åˆ¶</span>
		ch <span class="token operator">&lt;-</span> ret
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¶…æ—¶æ§åˆ¶</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œè¶…æ—¶"</span><span class="token punctuation">)</span>
	<span class="token keyword">case</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
		<span class="token keyword">if</span> ok <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡ŒæˆåŠŸ: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡ŒæŠ¥é”™: "</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// éƒ½æœ‰å“ªäº›é—®é¢˜ï¼Ÿ</span>
<span class="token comment">// (1) mainå†…ä»£ç å¤ªå¤šäº†ï¼Œå°†è¶…æ—¶æ§åˆ¶çš„ä»£ç å•ç‹¬å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­</span>
<span class="token comment">// (2) Goroutineæ³„æ¼ï¼šå‡è®¾è¶…æ—¶ä»¥åï¼Œåç¨‹ä¸­è¿˜ä¼šå†™æ•°æ®åˆ°channelä¸­ï¼Œè€Œå¤–è¾¹å·²ç»æ²¡æœ‰è¯»çš„äº†ï¼Œä¼šä¸€ç›´é˜»å¡ï¼Œé€ æˆGoroutineæ³„æ¼</span>
<span class="token comment">// (3) è¯¥å‡½æ•°Addè¿”å›å€¼æ²¡æœ‰åŒ…å«é”™è¯¯ï¼Œåœ¨å®é™…åœºæ™¯ä¸­æœ‰äº›å‡½æ•°ä¼šæœ‰é”™è¯¯ï¼Œé”™è¯¯å¦‚ä½•ä¼ é€’ï¼Ÿ</span>
</code></pre></div></details>
<details class="custom-container details"><summary>è®¾ç½®å‡½æ•°æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆä¼˜åŒ–åç‰ˆæœ¬ï¼Œè¿˜ç®—å®Œç¾ï¼‰</summary>
<ul>
<li>
<p>å•ç‹¬å°è£…äº†ä¸€ä¸ªå‡½æ•°</p>
</li>
<li>
<p><code v-pre>Goroutine</code>æ³„æ¼é—®é¢˜å°†æ— ç¼“å†²çš„<code v-pre>channel</code>æ”¹ä¸ºå¸¦ç¼“å†²åŒºçš„<code v-pre>channel</code>ï¼Œä½†ä»éœ€è¦åŸæœ¬çš„<code v-pre>Add</code>å‡½æ•°æ‰§è¡Œå®Œæˆåæ‰ä¼šé€€å‡º<code v-pre>AddWithTimeout</code>å†…éƒ¨å¯åŠ¨çš„åç¨‹ã€‚</p>
<p>Goä¸æ”¯æŒå¤–éƒ¨æ€æ­»ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„åç¨‹ï¼Œå‚è€ƒï¼š<a href="https://github.com/golang/go/issues/32610" target="_blank" rel="noopener noreferrer">https://github.com/golang/go/issues/32610<ExternalLinkIcon/></a></p>
</li>
<li>
<p>æ·»åŠ ä¼ é€’é”™è¯¯ï¼Œ<code v-pre>channel</code>ä¿®æ”¹ä¸ºé€šçŸ¥å‹</p>
</li>
</ul>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"errors"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"log"</span>
	<span class="token string">"runtime"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// æ¨¡æ‹Ÿå‡½æ•°è€—æ—¶æ“ä½œ</span>
	<span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">AddWithTimeout</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> timeout <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>ret <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å£°æ˜å¹¶åˆå§‹åŒ–channel</span>
	ch <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token comment">// æ‰§è¡Œåç¨‹</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		ret<span class="token punctuation">,</span> err <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// è¿™ä¸ªæ˜¯æˆ‘ä»¬åŸæœ‰çš„å‡½æ•°,å¹¶ä¸åšä»»ä½•ä¿®æ”¹</span>
		ch <span class="token operator">&lt;-</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¶…æ—¶æ§åˆ¶</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> time<span class="token punctuation">.</span><span class="token function">Duration</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		err <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"Function executed for more than %d seconds: AddWithTimeout(%d, %d)"</span><span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ch<span class="token punctuation">:</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¼€å¯å¤šä¸ªåç¨‹</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">AddWithTimeout</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>
			ret <span class="token operator">=</span> ret
			err <span class="token operator">=</span> err
			<span class="token comment">//fmt.Printf("æ‰§è¡Œç»“æœ: %d, %v\n", ret, err)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

    <span class="token comment">// æ¯éš”1ç§’è¾“å‡ºå½“å‰Goroutineæ•°é‡</span>
	<span class="token keyword">for</span> <span class="token keyword">range</span> time<span class="token punctuation">.</span><span class="token function">Tick</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		g <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">NumGoroutine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰Goroutineæ•°é‡: %d\n"</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span>
		<span class="token keyword">if</span> g <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="ç»ƒä¹ -channel-å¤šä¸ªåç¨‹é¡ºåºæ‰“å°æ•°å­—" tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ -channel-å¤šä¸ªåç¨‹é¡ºåºæ‰“å°æ•°å­—" aria-hidden="true">#</a> ç»ƒä¹ :channel:å¤šä¸ªåç¨‹é¡ºåºæ‰“å°æ•°å­—</h4>
<p>æœ‰4ä¸ª<code v-pre>goroutine</code>ï¼Œæ¯ä¸ª<code v-pre>goroutine</code>æ‰“å°ä¸€ä¸ªæ•°å­—ï¼Œè¦æ±‚æŒ‰ç…§1<code v-pre>/2/3/4</code>è¿™æ ·çš„é¡ºåºæ‰“å°è¾“å‡º</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Token <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">newWorker</span><span class="token punctuation">(</span>id <span class="token builtin">int</span><span class="token punctuation">,</span> ch <span class="token keyword">chan</span> Token<span class="token punctuation">,</span> nextCh <span class="token keyword">chan</span> Token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		token <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ch
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		nextCh <span class="token operator">&lt;-</span> token
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	chs <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">chan</span> Token<span class="token punctuation">{</span>
		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> Token<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// å¯åŠ¨4ä¸ªåç¨‹</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token keyword">go</span> <span class="token function">newWorker</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> chs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> chs<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// ç»™ç¬¬ä¸€ä¸ªchanå‘é€æ•°æ®</span>
	chs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> Token<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// ä¼šä¸€ç›´é˜»å¡</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="context" tabindex="-1"><a class="header-anchor" href="#context" aria-hidden="true">#</a> Context</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/context" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/context<ExternalLinkIcon/></a></p>
<p><code v-pre>context</code>æ˜¯Goçš„æ ‡å‡†åº“ï¼Œç”¨æ¥ç®¡ç†<code v-pre>Goroutine</code>çš„ä¸Šä¸‹æ–‡ï¼Œ<code v-pre>context</code>æ˜¯å¹¶å‘å®‰å…¨çš„</p>
<p>ä½¿ç”¨ä¸Šä¸‹æ–‡çš„ç¨‹åºåº”éµå¾ªä»¥ä¸‹è§„åˆ™</p>
<ul>
<li>ä¸è¦åœ¨ç»“æ„ç±»å‹ä¸­å­˜å‚¨ä¸Šä¸‹æ–‡ï¼›ç›¸åï¼Œå°†ä¸Šä¸‹æ–‡æ˜¾å¼åœ°ä¼ é€’ç»™æ¯ä¸ªéœ€è¦å®ƒçš„å‡½æ•°</li>
<li>ä¸Šä¸‹æ–‡åº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé€šå¸¸å‘½åä¸º<code v-pre>ctx</code></li>
<li>å³ä½¿å‡½æ•°å…è®¸ï¼Œä¹Ÿä¸è¦ä¼ é€’nilä¸Šä¸‹æ–‡ã€‚å¦‚æœæ‚¨ä¸ç¡®å®šè¦ä½¿ç”¨å“ªä¸ªä¸Šä¸‹æ–‡ï¼Œè¯·ä½¿ç”¨<code v-pre>context.TODO()</code></li>
</ul>
<br />
<h4 id="withcancel" tabindex="-1"><a class="header-anchor" href="#withcancel" aria-hidden="true">#</a> <code v-pre>WithCancel</code></h4>
<p>ç”¨æ¥å–æ¶ˆå­åç¨‹ï¼Œä»¥åŠå­™å­åç¨‹ï¼Œä»¥åŠå­™å­çš„å­™å­åç¨‹ç­‰</p>
<p>å‡½æ•°ç­¾å</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithCancel</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">)</span> <span class="token punctuation">(</span>ctx Context<span class="token punctuation">,</span> cancel CancelFunc<span class="token punctuation">)</span>
</code></pre></div><p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>å…ˆçœ‹ä¸€æ®µæ­£å¸¸çš„ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>wg<span class="token punctuation">)</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>å¯¹åç¨‹å‘é€é€€å‡ºä¿¡å·</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
LOOP<span class="token punctuation">:</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		<span class="token comment">// é€€å‡ºä¿¡å·</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			<span class="token keyword">break</span> LOOP
		<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// ä¸šåŠ¡ä»£ç </span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
    <span class="token comment">// Backgroundè¿”å›ä¸€ä¸ªç©ºContextã€‚å®ƒæ°¸è¿œä¸ä¼šè¢«å–æ¶ˆï¼Œæ²¡æœ‰æˆªæ­¢æ—¥æœŸï¼Œä¹Ÿæ²¡æœ‰å€¼ã€‚</span>
	<span class="token comment">// Backgroundæ˜¯æ‰€æœ‰Contextæ ‘çš„æ ¹ã€‚</span>
	ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithCancel</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span>

	<span class="token comment">// å¼€å§‹å·¥ä½œäº†</span>
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span>

	<span class="token comment">// 5ç§’åé€€å‡º</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span>
	<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<br />
<h4 id="withdeadlineå’Œwithtimeout" tabindex="-1"><a class="header-anchor" href="#withdeadlineå’Œwithtimeout" aria-hidden="true">#</a> <code v-pre>WithDeadline</code>å’Œ<code v-pre>WithTimeout</code></h4>
<p><code v-pre>WithDeadline</code>å’Œ<code v-pre>WithTimeout</code>æ˜¯åœ¨<code v-pre>WithCancel</code>çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªè¿‡æœŸæ—¶é—´</p>
<p>å‡½æ•°ç­¾å</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithDeadline</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> d time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>			<span class="token comment">// å¢åŠ ä¸€ä¸ªå…·ä½“çš„è¿‡æœŸæ—¶é—´ç‚¹</span>
<span class="token keyword">func</span> <span class="token function">WithTimeout</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> timeout time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>	<span class="token comment">// å¢åŠ ä¸€ä¸ªç›¸å¯¹çš„è¿‡æœŸæ—¶é—´æ®µ</span>
</code></pre></div><p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>å‡½æ•°è¶…æ—¶æ§åˆ¶</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
LOOP<span class="token punctuation">:</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		<span class="token comment">// é€€å‡ºä¿¡å·</span>
		<span class="token keyword">select</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			<span class="token keyword">break</span> LOOP
		<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// ä¸šåŠ¡ä»£ç </span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	ctx<span class="token punctuation">,</span> cancel <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithTimeout</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>Second<span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯</span>
	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span>

	<span class="token comment">// å¼€å§‹å·¥ä½œäº†</span>
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">worker</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span>

	<span class="token comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆæˆ–è¶…æ—¶</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="withvalue" tabindex="-1"><a class="header-anchor" href="#withvalue" aria-hidden="true">#</a> WithValue</h4>
<p>å¯ä»¥æºå¸¦ä¸€ä¸ªå€¼</p>
<p>å‡½æ•°ç­¾å</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">WithValue</span><span class="token punctuation">(</span>parent Context<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val any<span class="token punctuation">)</span> Context
</code></pre></div><p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"context"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Work</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> wg <span class="token operator">*</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">Value</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	ctx <span class="token operator">:=</span> context<span class="token punctuation">.</span><span class="token function">WithValue</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"key"</span><span class="token punctuation">,</span> <span class="token string">"value"</span><span class="token punctuation">)</span>
	wg <span class="token operator">:=</span> <span class="token function">new</span><span class="token punctuation">(</span>sync<span class="token punctuation">.</span>WaitGroup<span class="token punctuation">)</span>

	<span class="token comment">// å·¥ä½œ</span>
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">Work</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> wg<span class="token punctuation">)</span>

	<span class="token comment">// ç­‰å¾…å·¥ä½œå®Œæˆ</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="æ•°æ®ç«äº‰" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç«äº‰" aria-hidden="true">#</a> æ•°æ®ç«äº‰</h3>
<p>å¹¶å‘è¯»å†™å…±äº«èµ„æºçš„æ—¶å€™ä¼šå‡ºç°æ•°æ®ç«äº‰<code v-pre>ï¼ˆdata raceï¼‰</code>ï¼Œæ‰€ä»¥éœ€è¦åƒé”ç­‰æœºåˆ¶æ¥è¿›è¡Œä¿æŠ¤</p>
<br />
<p>åœ¨ç¼–è¯‘<code v-pre>(cmpile)</code>ã€æµ‹è¯•<code v-pre>ï¼ˆtestï¼‰</code>ã€è¿è¡Œ<code v-pre>ï¼ˆrunï¼‰</code>å‰ä½¿ç”¨<code v-pre>-race</code>é€‰é¡¹èƒ½æ£€æµ‹æ•°æ®ç«äº‰é—®é¢˜ï¼Œ</p>
<p>ä»–çš„åŸç†æ˜¯ï¼šåœ¨ç¨‹åºè¿è¡Œä»¥åï¼Œä¼šç›‘æ§ç¨‹åºå¯¹å†…å­˜åœ°å€è®¿é—®ï¼Œå¹¶æ‰“å°å‡ºæç¤º</p>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>å¦‚æœç¨‹åºåœ¨ä»¥åä¼šè®¿é—®æŸä¸ªèµ„æºï¼Œæ­¤æ—¶ä½¿ç”¨<code v-pre>-race</code>æ˜¯æ£€æµ‹ä¸åˆ°çš„</li>
<li>å¼€å¯äº†<code v-pre>-race</code>ä¸è¦éƒ¨ç½²åˆ°çº¿ä¸Šï¼Œå› ä¸ºä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œæµ‹è¯•æœŸé—´å¯ä»¥å¼€å¯<code v-pre>-race</code></li>
</ul>
<p>å…ˆå‡†å¤‡ä¸€æ®µä»£ç </p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> data <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			data<span class="token operator">++</span>
			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ¯æ¬¡è¿è¡Œç»“æœéƒ½ä¸ä¸€æ ·ï¼Œå¤§æ¦‚åœ¨ä¸º9600å·¦å³ï¼ŒåŸç†æ˜¯äº§ç”Ÿäº†æ•°æ®ç«äº‰ï¼Œdata++ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ“ä½œæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„</span>
<span class="token comment">// æ¯”å¦‚è¯´ æœ‰2ä¸ªåç¨‹åŒæ—¶æ‹¿åˆ°äº†dataä¸º100ï¼Œé‚£ä¹ˆåç¨‹1ç»™data+1=101ï¼Œåç¨‹2ä¹Ÿç»™data+1=101ï¼Œç»è¿‡è¿™ä¿©åç¨‹ä¸€ç•ªæ“ä½œï¼Œdataåªå¢é•¿äº†1ï¼Œ</span>
<span class="token comment">// æ‰€ä»¥æˆ‘ä»¬è™½ç„¶å¾ªç¯äº†ä¸€ä¸‡æ¬¡ï¼Œå…¶å®ç»“æœè¦&lt;=10000ï¼Œå¦‚æœå°†ä¸Šé¢çš„å¾ªç¯æ¬¡æ•°ä¿®æ”¹ä¸º100æ¬¡ï¼Œé‚£ä¹ˆç»“æœæ˜¯æ­£ç¡®çš„ï¼Œä½†å…¶å®æ˜¯è¿˜æ˜¯æœ‰é—®é¢˜çš„</span>
</code></pre></div><p>ä¸‹é¢å¼€å¯<code v-pre>--race</code>æ£€æµ‹æ•°æ®ç«äº‰</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>Goroutine <span class="token number">8</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> created at:
  main.main<span class="token punctuation">(</span><span class="token punctuation">)</span>
      C:/Users/Administrator/GolandProjects/learn/main.go:14 +0x84

Goroutine <span class="token number">7</span> <span class="token punctuation">(</span>finished<span class="token punctuation">)</span> created at:
  main.main<span class="token punctuation">(</span><span class="token punctuation">)</span>
      C:/Users/Administrator/GolandProjects/learn/main.go:14 +0x84
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token number">10000</span>
Found <span class="token number">1</span> data race<span class="token punctuation">(</span>s<span class="token punctuation">)</span>	<span class="token comment"># å‘ç°1ä¸ªæ•°æ®ç«äº‰</span>
<span class="token builtin class-name">exit</span> status <span class="token number">66</span>
</code></pre></div><p>æœ€å¸¸ç”¨çš„åŠæ³•å°±æ˜¯ä½¿ç”¨é”ï¼Œæ¥çœ‹ä¸€ä¸‹ä»£ç </p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> data <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			data<span class="token operator">++</span>
			mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¿è¡Œå¹¶å¼€å¯--raceæ£€æµ‹</span>
<span class="token comment">// go run -race main.go  </span>
<span class="token comment">// 10000</span>
</code></pre></div><h3 id="sync" tabindex="-1"><a class="header-anchor" href="#sync" aria-hidden="true">#</a> Sync</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/sync" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/sync<ExternalLinkIcon/></a></p>
<p><code v-pre>sync</code>æ˜¯Goçš„æ ‡å‡†åº“ï¼Œæä¾›äº†æœ€åŸºæœ¬çš„åŒæ­¥åŸè¯­ï¼Œä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼šå¯¹è±¡ä¸€æ—¦è¢«ä½¿ç”¨å°±ä¸åº”è¯¥è¢«å¤åˆ¶ã€‚</p>
<h4 id="äº’æ–¥é”å’Œè¯»å†™é”" tabindex="-1"><a class="header-anchor" href="#äº’æ–¥é”å’Œè¯»å†™é”" aria-hidden="true">#</a> äº’æ–¥é”å’Œè¯»å†™é”</h4>
<p>é”æ¥å£</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// A Locker represents an object that can be locked and unlocked.</span>
<span class="token keyword">type</span> Locker <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>äº’æ–¥é”</p>
<p><code v-pre>sync.Mutex</code> äº’æ–¥é”ï¼Œåœ¨æŸä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªåç¨‹å¯ä»¥æ‹¿åˆ°é”ï¼Œæ‹¿ä¸åˆ°çš„ä¼šä¸€ç›´é˜»å¡ï¼Œé€‚åˆè¯»å°‘å†™å¤šçš„åœºæ™¯</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		<span class="token comment">// åŠ é”/è§£é”</span>
<span class="token function">TryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			<span class="token comment">// å°è¯•è·å–é”ï¼Œè¿”å›å¸ƒå°”å€¼ï¼Œæ­¤å‡½æ•°ä¸ä¼šé˜»å¡</span>
</code></pre></div><p>è¯»å†™é”</p>
<p><code v-pre>sync.RWMutex</code> è¯»å†™é”ï¼Œåœ¨æŸä¸€æ—¶åˆ»åªèƒ½ç”±ä»»æ„çš„<code v-pre>reader</code>æŒæœ‰ï¼Œæˆ–è€…æ˜¯åªèƒ½è¢«å•ä¸ªçš„<code v-pre>writer</code>æŒæœ‰ï¼Œé€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯</p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     	<span class="token comment">// å†™æ“ä½œè°ƒç”¨çš„æ–¹æ³•</span>
<span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   	<span class="token comment">// è¯»æ“ä½œè°ƒç”¨çš„æ–¹æ³•</span>
<span class="token function">TryLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">TryRLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	<span class="token comment">// å°è¯•è·å–é”,ä¸ä¼šé˜»å¡</span>
<span class="token function">RLocker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           	<span class="token comment">// ä¸ºè¯»æ“ä½œè¿”å›ä¸€ä¸ªLockeræ¥å£çš„å¯¹è±¡ï¼Œä»–çš„Lockæ–¹æ³•ä¼šè°ƒç”¨RLockï¼Œä»–çš„Unlockä¼šè°ƒç”¨RUnlock</span>
</code></pre></div><p><strong>ğŸ’¡ æ³¨æ„ï¼šæœªæŒæœ‰é”çš„åç¨‹ä¹Ÿå¯ä»¥é‡Šæ”¾é”</strong></p>
<details class="custom-container details"><summary>æµ‹è¯•ä»£ç -1</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è·å–é”"</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"é‡Šæ”¾é”"</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æœªæŒæœ‰é”çš„åç¨‹ä¹Ÿå¯ä»¥é‡Šæ”¾é”ï¼Œä½†æ˜¯éå¸¸ä¸æ¨èè¿™ä¹ˆä½¿ç”¨</span>
</code></pre></div></details>
<details class="custom-container details"><summary>æµ‹è¯•ä»£ç -2</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	<span class="token keyword">var</span> mu sync<span class="token punctuation">.</span>Mutex

	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 lock"</span><span class="token punctuation">)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 unlock"</span><span class="token punctuation">)</span>

		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
		mu<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 unlock"</span><span class="token punctuation">)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span>
		mu<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 lock"</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"End"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="æ¡ˆä¾‹-å¹¶å‘å®‰å…¨çš„mapçš„3ç§å®ç°" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-å¹¶å‘å®‰å…¨çš„mapçš„3ç§å®ç°" aria-hidden="true">#</a> æ¡ˆä¾‹ï¼šå¹¶å‘å®‰å…¨çš„Mapçš„3ç§å®ç°</h4>
<h5 id="_1-åŸç”Ÿmap-è¯»å†™é”" tabindex="-1"><a class="header-anchor" href="#_1-åŸç”Ÿmap-è¯»å†™é”" aria-hidden="true">#</a> ï¼ˆ1ï¼‰åŸç”ŸMap+è¯»å†™é”</h5>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> RWMap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	sync<span class="token punctuation">.</span>RWMutex
	m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ„é€ å‡½æ•°</span>
<span class="token keyword">func</span> <span class="token function">NewRWMap</span><span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>RWMap <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>RWMap<span class="token punctuation">{</span>
		m<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¯»æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Load</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
	<span class="token keyword">return</span> v<span class="token punctuation">,</span> ok
<span class="token punctuation">}</span>

<span class="token comment">// å†™æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Store</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
<span class="token punctuation">}</span>

<span class="token comment">// åˆ æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Delete</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// éå†æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Range</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> m<span class="token punctuation">.</span>m <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token operator">!</span><span class="token function">f</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¤åˆæ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">LoadAndDelete</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
	<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">,</span> k<span class="token punctuation">)</span>
	<span class="token keyword">return</span> v<span class="token punctuation">,</span> ok
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">LoadAndStore</span><span class="token punctuation">(</span>k <span class="token builtin">int</span><span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
	<span class="token keyword">if</span> ok <span class="token punctuation">{</span>
		<span class="token keyword">return</span> v<span class="token punctuation">,</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span>
	m<span class="token punctuation">.</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v
	<span class="token keyword">return</span> v<span class="token punctuation">,</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token comment">// è·å–å¤§å°</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>m <span class="token operator">*</span>RWMap<span class="token punctuation">)</span> <span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	m<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">defer</span> m<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>m<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	m <span class="token operator">:=</span> <span class="token function">NewRWMap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™æ•°æ®</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹å†™å…¥æ•°æ®"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// æ³¨æ„è¿™é‡Œè¦å°†iä¼ å…¥</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å†™å…¥æ•°æ®å®Œæˆ"</span><span class="token punctuation">)</span>

	<span class="token comment">// éå†</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹éå†æ•°æ®"</span><span class="token punctuation">)</span>
	m<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> k <span class="token operator">!=</span> v <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"key is error: %d"</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"éå†æ•°æ®å®Œæˆ"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h5 id="_2-æ ‡å‡†åº“-sync-map" tabindex="-1"><a class="header-anchor" href="#_2-æ ‡å‡†åº“-sync-map" aria-hidden="true">#</a> ï¼ˆ2ï¼‰æ ‡å‡†åº“ sync.Map</h5>
<p><code v-pre>sync.Map</code>æ˜¯Goä¸ºæˆ‘ä»¬æä¾›çš„å¹¶å‘å®‰å…¨çš„<code v-pre>Map</code>ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</p>
<p>ï¼ˆé€‚ç”¨åœºæ™¯ä¸åŸç”Ÿ<code v-pre>map</code> + <code v-pre>sync.RWMutex</code>ç±»ä¼¼ï¼Œç›¸æ¯”è€Œè¨€<code v-pre>sync.Map</code>è¯»çš„æ€§èƒ½æ›´å¥½å†™çš„æ€§èƒ½æ›´å·®ï¼‰</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> m sync<span class="token punctuation">.</span>Map
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

	<span class="token comment">// å†™æ•°æ®ï¼Œå¹¶å‘å†™</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// å†™æ•°æ®ï¼Œæ”¯æŒä¸åŒçš„æ•°æ®ç±»å‹</span>
	m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	m<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token string">"ä¸­å›½"</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»æ•°æ®</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// è¯»å–</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">LoadAndDelete</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// è¯»å–å¹¶åˆ é™¤</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">LoadOrStore</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// è¯»å–,ç¬¬äºŒä¸ªè¿”å›å€¼ä»£è¡¨æ˜¯å¦è¯»å–åˆ°ï¼Œè‹¥è¯»ä¸åˆ°åˆ™è®¾ç½®valueä¸ºè¯¥å€¼å¹¶è¿”å›</span>

	<span class="token comment">// åˆ é™¤æ•°æ®</span>
	m<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span> <span class="token comment">// æ— è¿”å›å€¼</span>
	m<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>

	<span class="token comment">// éå†</span>
	m<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value any<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h5 id="_3-ç¬¬ä¸‰æ–¹åº“-mapåˆ†ç‰‡" tabindex="-1"><a class="header-anchor" href="#_3-ç¬¬ä¸‰æ–¹åº“-mapåˆ†ç‰‡" aria-hidden="true">#</a> ï¼ˆ3ï¼‰ç¬¬ä¸‰æ–¹åº“ï¼š<code v-pre>map</code>åˆ†ç‰‡</h5>
<p><code v-pre>Github</code>åœ°å€ï¼š<a href="https://github.com/orcaman/concurrent-map" target="_blank" rel="noopener noreferrer">https://github.com/orcaman/concurrent-map<ExternalLinkIcon/></a></p>
<p><code v-pre>concurrent-map</code>æä¾›äº†ä¸€ç§é«˜æ€§èƒ½çš„è§£å†³æ–¹æ¡ˆ:é€šè¿‡å¯¹å†…éƒ¨<code v-pre>map</code>è¿›è¡Œåˆ†ç‰‡ï¼Œé™ä½é”ç²’åº¦ï¼Œä»è€Œè¾¾åˆ°æœ€å°‘çš„é”ç­‰å¾…æ—¶é—´(é”å†²çª)</p>
<p><strong>å®ç°é€»è¾‘</strong></p>
<ul>
<li>é»˜è®¤å¯¹<code v-pre>map</code>åˆ†äº†32ç‰‡ï¼ˆæ¯ä¸€ç‰‡æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œæ¯ä¸ªç»“æ„ä½“åŒ…å«åŸç”ŸMapå’Œè¯»å†™é”ï¼‰ï¼Œæ‰€æœ‰åˆ†ç‰‡å­˜å‚¨åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­<code v-pre>[]*ConcurrentMapShared</code></li>
<li>æ¯æ¬¡æ“ä½œæ—¶(å¢åˆ æ”¹æŸ¥)ï¼Œå…ˆé€šè¿‡<code v-pre>GetShard(key)</code>è·å–<code v-pre>key</code>æ‰€åœ¨çš„åˆ†ç‰‡ï¼Œç„¶åå¯¹åˆ†ç‰‡åŠ é”åå†æ“ä½œ</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"github.com/orcaman/concurrent-map"</span>
	<span class="token string">"log"</span>
	<span class="token string">"strconv"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	m <span class="token operator">:=</span> cmap<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åˆå§‹åŒ–Map</span>
	loop <span class="token operator">:=</span> <span class="token number">1000000</span> <span class="token comment">// å¾ªç¯æ¬¡æ•°</span>

	<span class="token comment">// å†™æ•°æ®ï¼Œå€¼å¿…é¡»ä¸ºstringï¼Œè¿™æ˜¯ä»£ç é‡Œå†™æ­»çš„</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> loop<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			m<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">*</span>i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è·å–æ•°æ®å¹¶æ ¡éªŒ</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> loop<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">if</span> v<span class="token punctuation">,</span> ok <span class="token operator">:=</span> m<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
				<span class="token keyword">if</span> v <span class="token operator">!=</span> i<span class="token operator">*</span>i <span class="token punctuation">{</span>
					log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"key err: %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="åªæ‰§è¡Œä¸€æ¬¡" tabindex="-1"><a class="header-anchor" href="#åªæ‰§è¡Œä¸€æ¬¡" aria-hidden="true">#</a> åªæ‰§è¡Œä¸€æ¬¡</h4>
<p><code v-pre>sync.Once</code>åªæš´éœ²äº†ä¸€ä¸ªæ–¹æ³•<code v-pre>Do</code>,å¤šæ¬¡è°ƒç”¨<code v-pre>Do</code>æ–¹æ³•ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨<code v-pre>Do</code>æ–¹æ³•æ—¶å‚æ•°<code v-pre>f</code>å‡½æ•°æ‰ä¼šæ‰§è¡Œï¼Œ<code v-pre>f</code>å‡½æ•°æ˜¯æ— å‚æ•°æ— è¿”å›å€¼çš„å‡½æ•°</p>
<p><strong>å•ä¾‹æ¨¡å¼ä¸é‡ç½®</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	once   sync<span class="token punctuation">.</span>Once
	person <span class="token operator">*</span>Person
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">*</span>Person <span class="token punctuation">{</span>
	once<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		person <span class="token operator">=</span> <span class="token operator">&amp;</span>Person<span class="token punctuation">{</span>name<span class="token punctuation">:</span> name<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> person
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">RestPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	once <span class="token operator">=</span> sync<span class="token punctuation">.</span>Once<span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å•ä¾‹æ¨¡å¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// é‡ç½®</span>
	<span class="token function">RestPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment">// ç»§ç»­å•ä¾‹æ¨¡å¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token function">NewPerson</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// 0xc00004a250</span>
<span class="token comment">// 0xc00004a250</span>
<span class="token comment">// 0xc00004a260</span>
<span class="token comment">// 0xc00004a260</span>
</code></pre></div></details>
<blockquote>
<p>ğŸ‘€  å…¶ä»–å•ä¾‹æ¨¡å¼æ‰©å±•</p>
<p>æ–¹æ³•1ï¼šå®šä¹‰åŒ…çº§åˆ«çš„å˜é‡<br>
æ–¹æ³•2ï¼šåŒ…çº§åˆ«<code v-pre>init</code>å‡½æ•°åˆå§‹åŒ–<br>
æ–¹æ³•3ï¼šåœ¨<code v-pre>main</code>å‡½æ•°ä¸­ï¼Œæ‰§è¡Œä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°</p>
</blockquote>
<h4 id="ä¸´æ—¶ç¼“å­˜æ± pool" tabindex="-1"><a class="header-anchor" href="#ä¸´æ—¶ç¼“å­˜æ± pool" aria-hidden="true">#</a> ä¸´æ—¶ç¼“å­˜æ± Pool</h4>
<p><code v-pre>sync.Pool</code>æ˜¯ä¸€ä¸ªä¸´æ—¶ç¼“å­˜æ± ï¼Œå¹¶å‘å®‰å…¨</p>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>æ± å¯¹è±¡å¯ä»¥éšæ—¶è¢«åƒåœ¾å›æ”¶æ‰ï¼Œæ‰€ä»¥HTTPé•¿è¿æ¥ã€æ•°æ®åº“é•¿è¿æ¥ç­‰ä¸é€‚åˆä½¿ç”¨å®ƒ</li>
<li>æ± ä¸­è¦æ”¾å…¥å¼•ç”¨ç±»å‹çš„å¯¹è±¡ï¼Œä¸ç„¶æ˜¯å¯¹è±¡çš„æ‹·è´åˆ™èµ·ä¸åˆ°ç¼“å­˜æ± çš„ä½œç”¨</li>
<li>åœ¨å¯¹è±¡ç”¨å®Œä»¥åï¼Œæ”¾å…¥æ± ä¸­ä¹‹å‰ï¼Œæœ€å¥½åšä¸€ä¸‹æ¸…ç†å·¥ä½œï¼Œä¸ç„¶ä¸‹æ¬¡ä»æ± ä¸­ä¼šæ‹¿åˆ°ä¸€ä¸ªæœ‰ä½¿ç”¨ç—•è¿¹çš„å¯¹è±¡</li>
<li><code v-pre>Get()</code>å’Œ<code v-pre>Put(x)</code>æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä½†æ˜¯<code v-pre>New()</code>ä¸æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä½†æ˜¯å¹¶ä¸å½±å“æˆ‘ä»¬ä½¿ç”¨</li>
</ul>
<p><strong>å®šä¹‰å’Œæ–¹æ³•</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// sync.Poolç»“æ„ä½“å®šä¹‰</span>
<span class="token keyword">type</span> Pool <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span> 			<span class="token comment">// å¿½ç•¥</span>
	New <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any	<span class="token comment">// å½“æ± ä¸ºç©ºæ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡å¹¶æ”¾å…¥æ± ä¸­</span>
<span class="token punctuation">}</span>

<span class="token comment">// sync.Poolç»“æ„ä½“æ–¹æ³•</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">// ä»æ± ä¸­å–èµ°ä¸€ä¸ªå…ƒç´ ï¼ŒåŒæ—¶ä¼šåœ¨æ± ä¸­åˆ é™¤è¿™ä¸ªå…ƒç´ </span>
								<span class="token comment">// å¦‚æœPoolä¸­æ²¡æœ‰å…ƒç´ äº†ï¼Œä¼šä½¿ç”¨ç»“æ„ä½“çš„Newæ–¹æ³•åˆ›å»ºä¸€ä¸ªå…ƒç´ </span>
        						<span class="token comment">// å¦‚æœç»“æ„ä½“æ²¡æœ‰å®šä¹‰Newæ–¹æ³•ï¼Œé‚£ä¹ˆGetæ–¹æ³•ä¼šè¿”å›nilï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Getæ—¶è¦åˆ¤æ–­nilçš„æƒ…å†µ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Pool<span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span>x any<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>	<span class="token comment">// å°†å…ƒç´ æ”¾åˆ°Poolï¼Œå¦‚æœå…ƒç´ ä¸ºnilï¼Œé‚£ä¹ˆPoolä¼šå¿½ç•¥è¿™ä¸ªå€¼</span>
</code></pre></div><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>u <span class="token operator">*</span>User<span class="token punctuation">)</span> <span class="token function">Clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	u<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">""</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–æ± </span>
	pool <span class="token operator">:=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span>
		New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">new</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">}</span>

	<span class="token comment">// ä»æ± ä¸­è·å–å¯¹è±¡</span>
	user <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v %p\n"</span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> user<span class="token punctuation">)</span>

	<span class="token comment">// ä½¿ç”¨å¯¹è±¡</span>
	user<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"bob"</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v %p\n"</span><span class="token punctuation">,</span> user<span class="token punctuation">,</span> user<span class="token punctuation">)</span>

	<span class="token comment">// ç”¨å®Œäº†ï¼Œæ”¾å›æ± ä¸­</span>
	user<span class="token punctuation">.</span><span class="token function">Clean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ”¾å›æ± ä¹‹å‰æ‰§è¡Œæ¸…ç†å·¥ä½œï¼Œä¸ç„¶ä¸‹æ¬¡ä»æ± ä¸­ä¼šæ‹¿åˆ°ä¸€ä¸ªæœ‰ä½¿ç”¨ç—•è¿¹çš„å¯¹è±¡</span>
	pool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

	<span class="token comment">// å†æ¬¡ç”³è¯·ä¸€ä¸ª</span>
	user2 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>User<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%#v %p\n"</span><span class="token punctuation">,</span> user2<span class="token punctuation">,</span> user2<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¾“å‡ºç»“æœ</span>
<span class="token comment">// &amp;main.User{Name:""} 0xc00004a250</span>
<span class="token comment">// &amp;main.User{Name:"bob"} 0xc00004a250</span>
<span class="token comment">// &amp;main.User{Name:""} 0xc00004a250</span>
</code></pre></div></details>
<h4 id="æ¡ˆä¾‹-å¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± çš„2ç§å®ç°" tabindex="-1"><a class="header-anchor" href="#æ¡ˆä¾‹-å¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± çš„2ç§å®ç°" aria-hidden="true">#</a> æ¡ˆä¾‹ï¼šå¹¶å‘å®‰å…¨çš„å­—èŠ‚æ± çš„2ç§å®ç°</h4>
<h5 id="_1-sync-poolå®ç°" tabindex="-1"><a class="header-anchor" href="#_1-sync-poolå®ç°" aria-hidden="true">#</a> ï¼ˆ1ï¼‰<code v-pre>sync.Pool</code>å®ç°</h5>
<p>ä»£ç æ¥è‡ª<code v-pre>Hugo</code>ï¼š<a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener noreferrer">https://github.com/gohugoio/hugo<ExternalLinkIcon/></a></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bytes"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> bufferPool <span class="token operator">=</span> <span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span>
	New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">&amp;</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// GetBuffer returns a buffer from the pool.</span>
<span class="token keyword">func</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>buf <span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> bufferPool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// PutBuffer returns a buffer to the pool.</span>
<span class="token comment">// The buffer is reset before it is put back into circulation.</span>
<span class="token keyword">func</span> <span class="token function">PutBuffer</span><span class="token punctuation">(</span>buf <span class="token operator">*</span>bytes<span class="token punctuation">.</span>Buffer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	buf<span class="token punctuation">.</span><span class="token function">Reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	bufferPool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ä»æ± å­å–å‡ºå¯¹è±¡</span>
	buf <span class="token operator">:=</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// ä½¿ç”¨</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		buf<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// æ”¾å…¥æ± å­</span>
	<span class="token function">PutBuffer</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>

	<span class="token comment">// å†æ¬¡ä»æ± å­å–å‡º</span>
	buf2 <span class="token operator">:=</span> <span class="token function">GetBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> buf2<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> buf2<span class="token punctuation">.</span><span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h5 id="_2-ä½¿ç”¨channelå®ç°" tabindex="-1"><a class="header-anchor" href="#_2-ä½¿ç”¨channelå®ç°" aria-hidden="true">#</a> ï¼ˆ2ï¼‰ä½¿ç”¨channelå®ç°</h5>
<p>ä»£ç æ¥è‡ªminioï¼š<a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">https://github.com/minio/minio<ExternalLinkIcon/></a></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token comment">// BytePoolCap implements a leaky pool of []byte in the form of a bounded channel.</span>
<span class="token keyword">type</span> BytePoolCap <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	c    <span class="token keyword">chan</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
	w    <span class="token builtin">int</span>
	wcap <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// NewBytePoolCap creates a new BytePool bounded to the given maxSize, with new</span>
<span class="token comment">// byte arrays sized based on width.</span>
<span class="token keyword">func</span> <span class="token function">NewBytePoolCap</span><span class="token punctuation">(</span>maxSize <span class="token builtin">int</span><span class="token punctuation">,</span> width <span class="token builtin">int</span><span class="token punctuation">,</span> capwidth <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token operator">&amp;</span>BytePoolCap<span class="token punctuation">{</span>
		c<span class="token punctuation">:</span>    <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> maxSize<span class="token punctuation">)</span><span class="token punctuation">,</span>
		w<span class="token punctuation">:</span>    width<span class="token punctuation">,</span>
		wcap<span class="token punctuation">:</span> capwidth<span class="token punctuation">,</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Get gets a []byte from the BytePool, or creates a new one if none are</span>
<span class="token comment">// available in the pool.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> b <span class="token operator">=</span> <span class="token operator">&lt;-</span>bp<span class="token punctuation">.</span>c<span class="token punctuation">:</span>
	<span class="token comment">// reuse existing buffer</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token comment">// create new buffer</span>
		<span class="token keyword">if</span> bp<span class="token punctuation">.</span>wcap <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>
			b <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bp<span class="token punctuation">.</span>w<span class="token punctuation">,</span> bp<span class="token punctuation">.</span>wcap<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			b <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bp<span class="token punctuation">.</span>w<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span>
<span class="token punctuation">}</span>

<span class="token comment">// Put returns the given Buffer to the BytePool.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Put</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">select</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> bp<span class="token punctuation">.</span>c <span class="token operator">&lt;-</span> b<span class="token punctuation">:</span>
		<span class="token comment">// buffer went back into pool</span>
	<span class="token keyword">default</span><span class="token punctuation">:</span>
		<span class="token comment">// buffer didn't go back into pool, just discard</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Width returns the width of the byte arrays in this pool.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">Width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> bp<span class="token punctuation">.</span>w
<span class="token punctuation">}</span>

<span class="token comment">// WidthCap returns the cap width of the byte arrays in this pool.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>bp <span class="token operator">*</span>BytePoolCap<span class="token punctuation">)</span> <span class="token function">WidthCap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> bp<span class="token punctuation">.</span>wcap
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–æ± å­</span>
	pool <span class="token operator">:=</span> <span class="token function">NewBytePoolCap</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span>

	<span class="token comment">// ä»æ± å­å–å‡ºå¯¹è±¡</span>
	buf <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// ä½¿ç”¨</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		buf <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token char">'h'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// æ”¾å…¥æ± å­</span>
	pool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>

	<span class="token comment">// å†æ¬¡ä»æ± å­å–å‡º</span>
	buf2 <span class="token operator">:=</span> pool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"é•¿åº¦: %d | å®¹é‡: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>buf2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h5 id="_3-å¯èƒ½éœ€è¦çš„æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_3-å¯èƒ½éœ€è¦çš„æ³¨æ„äº‹é¡¹" aria-hidden="true">#</a> ï¼ˆ3ï¼‰å¯èƒ½éœ€è¦çš„æ³¨æ„äº‹é¡¹</h5>
<ul>
<li>
<p>å†…å­˜æ³„æ¼é—®é¢˜ï¼š</p>
<ul>
<li>
<p>æè¿°ï¼šå½“<code v-pre>byte</code>å¾ˆå¤§çš„æ—¶å€™ï¼Œå†æ”¾å…¥æ± å­ï¼Œå°±ä¼šå¼•èµ·å†…å­˜æ³„æ¼</p>
</li>
<li>
<p>è§£å†³ï¼šæ”¾å›æ± å­æ—¶åˆ¤æ–­<code v-pre>Byte</code>å¤§å°ï¼Œå¦‚æœå¾ˆå¤§å°±ç›´æ¥ä¸¢å¼ƒ</p>
</li>
<li>
<p>å‚è€ƒå®ç°</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// fmtåŒ…print.goæ–‡ä»¶</span>

<span class="token comment">// å®šä¹‰æ± å­</span>
<span class="token keyword">var</span> ppFree <span class="token operator">=</span> sync<span class="token punctuation">.</span>Pool<span class="token punctuation">{</span>
	New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> any <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">new</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ”¾å›æ± å­æ“ä½œ</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>pp<span class="token punctuation">)</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// Proper usage of a sync.Pool requires each entry to have approximately</span>
	<span class="token comment">// the same memory cost. To obtain this property when the stored type</span>
	<span class="token comment">// contains a variably-sized buffer, we add a hard limit on the maximum buffer</span>
	<span class="token comment">// to place back in the pool.</span>
	<span class="token comment">//</span>
	<span class="token comment">// See https://golang.org/issue/23199</span>
	<span class="token keyword">if</span> <span class="token function">cap</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>buf<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">64</span><span class="token operator">&lt;&lt;</span><span class="token number">10</span> <span class="token punctuation">{</span>	<span class="token comment">// å®¹é‡è¿‡å¤§åˆ™ä¸¢å¼ƒ</span>
		<span class="token keyword">return</span>
	<span class="token punctuation">}</span>

	p<span class="token punctuation">.</span>buf <span class="token operator">=</span> p<span class="token punctuation">.</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>
	p<span class="token punctuation">.</span>arg <span class="token operator">=</span> <span class="token boolean">nil</span>
	p<span class="token punctuation">.</span>value <span class="token operator">=</span> reflect<span class="token punctuation">.</span>Value<span class="token punctuation">{</span><span class="token punctuation">}</span>
	p<span class="token punctuation">.</span>wrappedErr <span class="token operator">=</span> <span class="token boolean">nil</span>
	ppFree<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
</li>
</ul>
</li>
<li>
<p>å†…å­˜æµªè´¹é—®é¢˜ï¼š</p>
<ul>
<li>
<p>æè¿°ï¼šå¦‚æœæ± å­å†…çš„<code v-pre>buffer</code>æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯å®é™…ç”¨çš„è¯æ¯”è¾ƒå°ï¼Œå°±å­˜åœ¨æµªè´¹é—®é¢˜äº†</p>
</li>
<li>
<p>è§£å†³ï¼šå®šä¹‰å¤šç§è§„æ ¼çš„æ± å­ï¼ŒæŒ‰éœ€ä½¿ç”¨</p>
</li>
<li>
<p>å‚è€ƒå®ç°</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å‚è€ƒä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// net/httpåŒ…server.go</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	bufioReaderPool   sync<span class="token punctuation">.</span>Pool
	bufioWriter2kPool sync<span class="token punctuation">.</span>Pool
	bufioWriter4kPool sync<span class="token punctuation">.</span>Pool
<span class="token punctuation">)</span>
</code></pre></div></details>
</li>
</ul>
</li>
</ul>
<h4 id="æ¡ä»¶å˜é‡-ä¸æ¨è" tabindex="-1"><a class="header-anchor" href="#æ¡ä»¶å˜é‡-ä¸æ¨è" aria-hidden="true">#</a> æ¡ä»¶å˜é‡(ä¸æ¨è)</h4>
<p><code v-pre>sync.Cond</code>å¹¶ä¸è¢«æ¨èä½¿ç”¨ï¼Œè¿™é‡Œæƒå½“äº†è§£ä¸€ä¸‹</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> done <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">func</span> <span class="token function">read</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> c <span class="token operator">*</span>sync<span class="token punctuation">.</span>Cond<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token operator">!</span>done <span class="token punctuation">{</span>
		c<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ä¼šé‡Šæ”¾é”ï¼Œè¢«å”¤é†’æ—¶åˆä¼šé‡æ–°è·å¾—é”</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">"starts reading"</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">write</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> c <span class="token operator">*</span>sync<span class="token punctuation">.</span>Cond<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">"starts writing"</span><span class="token punctuation">)</span>
	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>
	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	done <span class="token operator">=</span> <span class="token boolean">true</span>
	c<span class="token punctuation">.</span>L<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">"wakes all"</span><span class="token punctuation">)</span>
	c<span class="token punctuation">.</span><span class="token function">Broadcast</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	cond <span class="token operator">:=</span> sync<span class="token punctuation">.</span><span class="token function">NewCond</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"reader1"</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"reader2"</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token string">"reader3"</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span>
	<span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"writer"</span><span class="token punctuation">,</span> cond<span class="token punctuation">)</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h3 id="sync-atomic" tabindex="-1"><a class="header-anchor" href="#sync-atomic" aria-hidden="true">#</a> sync/atomic</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/sync/atomic" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/sync/atomic<ExternalLinkIcon/></a></p>
<p><code v-pre>sync/atomic</code>åŒ…æä¾›äº†ä¸€ç³»åˆ—åŸå­ç›¸å…³æ“ä½œ</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>åŸå­æ“ä½œæ˜¯ä¸å…è®¸ä¸­æ–­çš„ï¼ˆ<code v-pre>interrupt</code>ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥å®ç°æ— é”å¹¶å‘ï¼ˆ<code v-pre>lock-free</code>ï¼‰</li>
<li>åŸå­æ“ä½œæ˜¯ä¸å…è®¸ä¸­æ–­çš„ï¼ˆ<code v-pre>interrupt</code>ï¼‰ï¼Œæ‰€ä»¥å®ƒå¿…é¡»å¾ˆå¿«ï¼Œæ‰€ä»¥æä¾›çš„åŸå­æ–¹æ³•æ•°é‡å¾ˆå°‘</li>
<li>åŸå­æ“ä½œç”±åº•å±‚ç¡¬ä»¶å®ç°ï¼Œ<code v-pre>Mutex</code>æ˜¯ç”±æ“ä½œç³»ç»Ÿå®ç°çš„ï¼Œæ‰€ä»¥åŸå­æ“ä½œæ€§èƒ½æ›´å¥½</li>
</ul>
<h4 id="åŸºæœ¬æ•°æ®ç±»å‹-åŸå­æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬æ•°æ®ç±»å‹-åŸå­æ“ä½œ" aria-hidden="true">#</a> <strong>åŸºæœ¬æ•°æ®ç±»å‹-åŸå­æ“ä½œ</strong></h4>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŠ å‡æ³•</td>
<td>(1)<code v-pre>AddInt32(addr *int32, delta int32) (new int32)</code><br />(2)<code v-pre>AddInt64(addr *int64, delta int64) (new int64)</code><br />(3)<code v-pre>AddUint32(addr *uint32, delta uint32) (new uint32)</code><br />(4)<code v-pre>AddUint64(addr *uint64, delta uint64) (new uint64)</code><br />(5)<code v-pre>AddUintptr(addr *uintptr, delta uintptr) (new uintptr)</code></td>
<td>ï¼ˆ1ï¼‰å‡æ³•éœ€è¦æ³¨æ„ï¼š<br />å¯¹äº<code v-pre>Int</code>ç±»å‹ï¼ŒåŠ ä¸€ä¸ªè´Ÿæ•°å³å¯<br />å¯¹äº<code v-pre>Uint</code>ç±»å‹ï¼Œä½¿ç”¨ä½è¿ç®—æ¥å¾—åˆ°è´Ÿæ•°<br />ï¼ˆ2ï¼‰è¿™ä¸ªåªæ”¯æŒ5ç§æ•°æ®ç±»å‹</td>
</tr>
<tr>
<td>äº¤æ¢</td>
<td>(1)<code v-pre>SwapInt32(addr *int32, new int32) (old int32)</code><br />(2)<code v-pre>SwapInt64(addr *int64, new int64) (old int64)</code><br />(3)<code v-pre>SwapUint32(addr *uint32, new uint32) (old uint32)</code><br />(4)<code v-pre>SwapUint64(addr *uint64, new uint64) (old uint64)</code><br />(5)<code v-pre>SwapUintptr(addr *uintptr, new uintptr) (old uintptr)</code><br />(6)<code v-pre>SwapPointer(addr *unsafe.Pointer, new unsafe.Pointer) (old unsafe.Pointer)</code></td>
<td>&quot;èµ‹å€¼&quot;å¹¶è¿”å›æ—§å€¼</td>
</tr>
<tr>
<td>æ¯”è¾ƒå¹¶äº¤æ¢</td>
<td>(1)<code v-pre>CompareAndSwapInt32(addr *int32, old, new int32) (swapped bool)</code><br />(2)<code v-pre>CompareAndSwapInt64(addr *int64, old, new int64) (swapped bool)</code><br />(3)<code v-pre>CompareAndSwapUint32(addr *uint32, old, new uint32) (swapped bool)</code><br />(4)<code v-pre>CompareAndSwapUint64(addr *uint64, old, new uint64) (swapped bool)</code><br />(5)<code v-pre>CompareAndSwapUintptr(addr *uintptr, old, new uintptr) (swapped bool)</code><br />(6)<code v-pre>CompareAndSwapPointer(addr *unsafe.Pointer, old, new unsafe.Pointer) (swapped bool)</code></td>
<td>&quot;æ¯”è¾ƒå¹¶èµ‹å€¼&quot;å¹¶è¿”å›æ—§å€¼</td>
</tr>
<tr>
<td>åŠ è½½</td>
<td>(1)<code v-pre>LoadInt32(addr *int32) (val int32)</code><br />(2)<code v-pre>LoadInt64(addr *int64) (val int64)</code><br />(3)<code v-pre>LoadUint32(addr *uint32) (val uint32)</code><br />(4)<code v-pre>LoadUint64(addr *uint64) (val uint64)</code><br />(5)<code v-pre>LoadUintptr(addr *uintptr) (val uintptr)</code><br />(6)<code v-pre>LoadPointer(addr *unsafe.Pointer) (val unsafe.Pointer)</code></td>
<td>&quot;è¯»å–&quot;å˜é‡çš„å€¼</td>
</tr>
<tr>
<td>å­˜å‚¨</td>
<td>(1)<code v-pre>StoreInt32(addr *int32, val int32)</code><br />(2)<code v-pre>StoreInt64(addr *int64, val int64)</code><br />(3)<code v-pre>StoreUint32(addr *uint32, val uint32)</code><br />(4)<code v-pre>StoreUint64(addr *uint64, val uint64)</code><br />(5)<code v-pre>StoreUintptr(addr *uintptr, val uintptr)</code><br />(6)<code v-pre>StorePointer(addr *unsafe.Pointer, val unsafe.Pointer)</code></td>
<td>&quot;èµ‹å€¼&quot;ä¸ä¼šè¿”å›æ—§å€¼<br />è¿™ä¸ªå’Œ<code v-pre>Swap</code>ç³»åˆ—å‡½æ•°å¾ˆåƒ</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync/atomic"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åŠ æ³•</span>
	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">100</span>
	<span class="token keyword">var</span> y <span class="token builtin">uint32</span> <span class="token operator">=</span> <span class="token number">1000</span>

	<span class="token comment">// å› ä¸ºxæ˜¯æœ‰ç¬¦å·æ•´æ•°ï¼Œå¯ä»¥å‡æ³•å¯ä»¥å†™æˆåŠ æ³•ï¼Œ-1 -> + -1</span>
	atomic<span class="token punctuation">.</span><span class="token function">AddInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token function">int32</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å› ä¸ºyæ˜¯æ— ç¬¦å·æ•´æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨uint32(-1)</span>
	<span class="token comment">// è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨^ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ä½¿ç”¨ï¼ŒæŒ‰ä½å–åï¼Œå¾—åˆ°ç±»ä¼¼-1çš„æ•ˆæœ</span>
	atomic<span class="token punctuation">.</span><span class="token function">AddUint32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>y<span class="token punctuation">,</span> <span class="token operator">^</span><span class="token function">uint32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åŠ å‡æ³•:\n"</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"y = %d\n"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\näº¤æ¢:\n"</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">100</span>
	<span class="token keyword">var</span> y <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">200</span>
	old <span class="token operator">:=</span> atomic<span class="token punctuation">.</span><span class="token function">SwapInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token comment">// yå€¼ä¿æŒä¸å˜ï¼Œxå€¼æ›´æ–°ä¸ºyå€¼ï¼Œoldä¸ºxçš„æ—§å€¼</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"y = %d\n"</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"old = %d\n"</span><span class="token punctuation">,</span> old<span class="token punctuation">)</span>	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å…ˆæ¯”è¾ƒï¼Œå†å†³å®šæ˜¯å¦è¦†ç›–</span>
	<span class="token comment">// å¦‚æœx == yï¼Œé‚£ä¹ˆç”¨zè¦†ç›–xï¼Œå¹¶è¿”å›true</span>
	<span class="token comment">// å¦‚æœx != yï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åšï¼Œå¹¶è¿”å›false</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\næ¯”è¾ƒå¹¶äº¤æ¢:\n"</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span>
	<span class="token keyword">var</span> y <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">300</span>
	<span class="token keyword">var</span> z <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">400</span>
	<span class="token keyword">if</span> atomic<span class="token punctuation">.</span><span class="token function">CompareAndSwapInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: %d %d %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ¯”è¾ƒå¹¶äº¤æ¢å¤±è´¥: %d %d %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nåŠ è½½:\n"</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">999</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> atomic<span class="token punctuation">.</span><span class="token function">LoadInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// -999</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"\nå­˜å‚¨:\n"</span><span class="token punctuation">)</span>
	<span class="token keyword">var</span> x <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">888</span>
	atomic<span class="token punctuation">.</span><span class="token function">StoreInt32</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"x = %d\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token comment">// 222</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>åŠ å‡æ³•:
x <span class="token operator">=</span> <span class="token number">99</span>                      
y <span class="token operator">=</span> <span class="token number">999</span>                     
                            
äº¤æ¢:                       
x <span class="token operator">=</span> <span class="token number">200</span>                     
y <span class="token operator">=</span> <span class="token number">200</span>                     
old <span class="token operator">=</span> -100                  
                            
æ¯”è¾ƒå¹¶äº¤æ¢:                 
æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: <span class="token number">400</span> -300 <span class="token number">400</span>
                            
è½½å…¥:                       
x <span class="token operator">=</span> -999                    
                            
å­˜å‚¨:                       
x <span class="token operator">=</span> <span class="token number">222</span>
</code></pre></div><h4 id="ä»»æ„æ•°æ®ç±»å‹-åŸå­æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#ä»»æ„æ•°æ®ç±»å‹-åŸå­æ“ä½œ" aria-hidden="true">#</a> ä»»æ„æ•°æ®ç±»å‹-åŸå­æ“ä½œ</h4>
<p>å¦‚æœæ˜¯å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œ<code v-pre>atomic</code>ä¸ºæˆ‘ä»¬æä¾›äº†<code v-pre>Value</code>ç»“æ„ä½“æ¥åŸå­æ“ä½œ</p>
<p>æ³¨æ„äº‹é¡¹</p>
<ul>
<li>é»˜è®¤ä¸º<code v-pre>nil</code>å€¼</li>
<li>åŸå­å€¼å­˜å‚¨çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå†³å®šäº†å®ƒä»Šåèƒ½ä¸”åªèƒ½å­˜å‚¨å“ªä¸€ä¸ªç±»å‹çš„å€¼</li>
<li>åˆ‡ç‰‡ã€æ˜ å°„ç­‰ä¸æ”¯æŒ&quot;æ¯”è¾ƒå¹¶äº¤æ¢&quot;</li>
</ul>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync/atomic"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// åˆå§‹åŒ–</span>
	<span class="token keyword">var</span> v atomic<span class="token punctuation">.</span>Value

	<span class="token comment">// å­˜å‚¨ä»»æ„æ•°æ®ç±»å‹</span>
	v<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span>

	<span class="token comment">// åŠ è½½ä»»æ„æ•°æ®ç±»å‹</span>
	x <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"xçš„æ•°æ®ç±»å‹: %T | xçš„å€¼: %#v\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>

	<span class="token comment">// äº¤æ¢</span>
	v<span class="token punctuation">.</span><span class="token function">Swap</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">)</span>

	<span class="token comment">// æ¯”è¾ƒå¹¶äº¤æ¢</span>
	<span class="token keyword">if</span> v<span class="token punctuation">.</span><span class="token function">CompareAndSwap</span><span class="token punctuation">(</span><span class="token string">"world!"</span><span class="token punctuation">,</span> <span class="token string">"hello world!"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ¯”è¾ƒå¹¶äº¤æ¢æˆåŠŸ: %s\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ¯”è¾ƒå¹¶äº¤æ¢å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="åŸå­æ“ä½œä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#åŸå­æ“ä½œä¸¾ä¾‹" aria-hidden="true">#</a> åŸå­æ“ä½œä¸¾ä¾‹</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"sync/atomic"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> data <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//data++ // éåŸå­æ“ä½œï¼Œè¿™ä¼šå¼•èµ·æ•°æ®ç«äº‰</span>
			atomic<span class="token punctuation">.</span><span class="token function">AddInt64</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// åŸå­æ“ä½œ</span>
			wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="io" tabindex="-1"><a class="header-anchor" href="#io" aria-hidden="true">#</a> IO</h2>
<h3 id="osåŒ…-åŸºç¡€æ–‡ä»¶è¯»å†™" tabindex="-1"><a class="header-anchor" href="#osåŒ…-åŸºç¡€æ–‡ä»¶è¯»å†™" aria-hidden="true">#</a> <code v-pre>os</code>åŒ…ï¼šåŸºç¡€æ–‡ä»¶è¯»å†™</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/os" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/os<ExternalLinkIcon/></a></p>
<h4 id="æ‰“å¼€æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#æ‰“å¼€æ–‡ä»¶" aria-hidden="true">#</a> æ‰“å¼€æ–‡ä»¶</h4>
<p>æ–¹å¼ä¸€ï¼š<code v-pre>OpenFile</code></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token function">OpenFile</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">,</span> flag <span class="token builtin">int</span><span class="token punctuation">,</span> perm FileMode<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
</code></pre></div><details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†ä»‹ç»</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// flagé€‰é¡¹</span>
<span class="token comment">//	(1)æ‰“å¼€æ¨¡å¼ï¼ˆå¿…é¡»æŒ‡å®šå…¶ä¸€ï¼‰</span>
<span class="token comment">//		os.O_RDONLY         ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶       å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span>
<span class="token comment">//		os.O_WRONLY         ä»¥åªå†™æ–¹å¼æ‰“å¼€          å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span>
<span class="token comment">//		os.O_RDWR           ä»¥è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶       å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span>
<span class="token comment">//	(2)è¾…åŠ©æ§åˆ¶è¡Œä¸º</span>
<span class="token comment">//		os.O_APPEND         è¿½åŠ æ–¹å¼å†™å…¥</span>
<span class="token comment">//		os.O_CREATE         æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼›Windowsç³»ç»Ÿè¯¥å±æ€§ä¼šè‡ªå¸¦å†™å±æ€§                                          </span>
<span class="token comment">//		os.O_EXCL           æ–‡ä»¶å¿…é¡»ä¸å­˜åœ¨ï¼›ä½¿ç”¨åœºæ™¯æ¯”å¦‚ï¼šåªå…è®¸è¿›ç¨‹æ‰“å¼€è‡ªå·±çš„æ–‡ä»¶ æˆ– å¤šè¿›ç¨‹è¿è¡Œæ—¶é€€å‡ºï¼Œåªå…è®¸å•è¿›ç¨‹è¿è¡Œ</span>
<span class="token comment">//		os.O_TRUNC          æ–‡ä»¶å­˜åœ¨åˆ™æˆªæ–­ï¼ˆæ¸…ç©ºå†…å®¹ï¼‰</span>

<span class="token comment">// å¸¸ç”¨flagç»„åˆé€‰é¡¹</span>
<span class="token comment">//	è¯»æ–‡ä»¶</span>
<span class="token comment">//		os.O_RDONLY                             è¯»æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸å­˜åœ¨åˆ™æŠ¥é”™</span>
<span class="token comment">//	å†™æ–‡ä»¶</span>
<span class="token comment">//		os.O_RDWR | os.O_CREATE                 å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶</span>
<span class="token comment">//		os.O_RDWR | os.O_CREATE | os.O_APPEND   å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶è¿½åŠ å†…å®¹</span>
<span class="token comment">//		os.O_RDWR | os.O_CREATE | os.O_TRUNC    å†™æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶æ¸…ç©ºæ–‡ä»¶å†…å®¹</span>

<span class="token comment">// permé€‰é¡¹</span>
<span class="token comment">// 	æ–‡ä»¶æƒé™</span>
<span class="token comment">//	(1)åªæœ‰åœ¨åˆ›å»ºæ–‡ä»¶æ—¶æ‰æœ‰ç”¨ï¼Œå½“ä¸éœ€è¦åˆ›å»ºæ–‡ä»¶æ—¶å¯ä»¥è®¾ç½®ä¸º0</span>
<span class="token comment">//	(2)å†…ç½®å¸¸é‡os.ModePerm = 0777</span>
</code></pre></div></details>
<p>æ–¹å¼äºŒï¼š<code v-pre>Open</code></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Open</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> O_RDONLY<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ ¸å¿ƒä¸ºOpenFileï¼Œä»¥åªè¯»æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</span>
</code></pre></div><p>æ–¹å¼ä¸‰ï¼š<code v-pre>Create</code></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Create</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>File<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">OpenFile</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> O_RDWR<span class="token operator">|</span>O_CREATE<span class="token operator">|</span>O_TRUNC<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ ¸å¿ƒä¸ºOpenFileï¼Œå½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºï¼Œå½“æ–‡ä»¶å­˜åœ¨æ—¶ä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹</span>
<span class="token comment">// ä½¿ç”¨æ—¶å¤šåŠ æ³¨æ„ï¼Œä¸è¦è¯¯æ¸…ç©ºäº†æ–‡ä»¶å†…å®¹!!!</span>
</code></pre></div><h4 id="å¸¸è§„æ“ä½œå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å¸¸è§„æ“ä½œå‡½æ•°" aria-hidden="true">#</a> å¸¸è§„æ“ä½œå‡½æ•°</h4>
<table>
<thead>
<tr>
<th>åˆ†ç±»</th>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ›å»ºä¸´æ—¶æ–‡ä»¶æˆ–ç›®å½•</td>
<td><code v-pre>CreateTemp(dir, pattern string) (*File, error)</code></td>
<td>åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œè¿”å›ä¸´æ—¶æ–‡ä»¶çš„è·¯å¾„<br />ï¼ˆ1ï¼‰<code v-pre>dir</code>æŒ‡å®šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶ç›®å½•ï¼Œä¸ºç©ºä¼šä½¿ç”¨ç”¨æˆ·é»˜è®¤ä¸´æ—¶ç›®å½•<br />ï¼ˆ2ï¼‰<code v-pre>pattern </code>æŒ‡å®šæ–‡ä»¶åå‰ç¼€ï¼Œå¦‚æœåŒ…å«<code v-pre>*</code>ï¼Œé‚£ä¹ˆä»£æŒ‡æ•´ä¸ªæ–‡ä»¶åï¼Œ<br /><code v-pre>*</code>è¢«æ›¿æ¢ä¸ºéšæœºå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td></td>
<td><code v-pre>MkdirTemp(dir, pattern string) (string, error)</code></td>
<td>åŒä¸Šï¼Œåªä¸è¿‡åˆ›å»ºçš„æ˜¯ä¸´æ—¶ç›®å½•</td>
</tr>
<tr>
<td>åˆ›å»ºç›®å½•</td>
<td><code v-pre>Mkdir(name string, perm FileMode) error</code></td>
<td>åˆ›å»ºç›®å½•ï¼›<br />ï¼ˆ1ï¼‰ä¸æ”¯æŒåˆ›å»ºå¤šçº§ç›®å½•<br />ï¼ˆ2ï¼‰ç›®å½•å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td></td>
<td><code v-pre>MkdirAll(path string, perm FileMode) error</code></td>
<td>åˆ›å»ºç›®å½•<br />ï¼ˆ1ï¼‰æ”¯æŒåˆ›å»ºå¤šçº§ç›®å½•<br />ï¼ˆ2ï¼‰ç›®å½•å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</td>
<td><code v-pre>Remove(name string) error</code></td>
<td>åˆ é™¤æ–‡ä»¶æˆ–ç©ºç›®å½•ï¼Œä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td></td>
<td><code v-pre>RemoveAll(path string) error</code></td>
<td>åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ï¼Œæ”¯æŒéç©ºç›®å½•ï¼Œä¸å­˜åœ¨æ—¶ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td>é‡å‘½å</td>
<td><code v-pre>Rename(oldpath, newpath string) error</code></td>
<td>æ–‡ä»¶æˆ–ç›®å½•é‡å‘½å</td>
</tr>
<tr>
<td>æ–‡ä»¶è¯¦æƒ…</td>
<td><code v-pre>Stat(name string) (FileInfo, error)</code></td>
<td>è·å–æ–‡ä»¶è¯¦æƒ…</td>
</tr>
<tr>
<td></td>
<td><code v-pre>Lstat(name string) (FileInfo, error)</code></td>
<td>åŒä¸Šï¼ŒåŒºåˆ«æ˜¯å¯¹äºé“¾æ¥æ–‡ä»¶ï¼Œ<code v-pre>Stat</code>å…·æœ‰ç©¿é€èƒ½åŠ›è€Œ<code v-pre>Lstat</code>æ²¡æœ‰</td>
</tr>
<tr>
<td>åˆ¤æ–­æ˜¯å“ªç§é”™è¯¯</td>
<td><code v-pre>IsExist(err error) bool</code></td>
<td>æ˜¯å¦æ˜¯æ–‡ä»¶å­˜åœ¨é”™è¯¯</td>
</tr>
<tr>
<td></td>
<td><code v-pre>IsNotExist(err error) bool</code></td>
<td>æ˜¯å¦æ˜¯æ–‡ä»¶ä¸å­˜åœ¨é”™è¯¯</td>
</tr>
<tr>
<td></td>
<td><code v-pre>IsPermission(err error) bool</code></td>
<td>æ˜¯å¦æ˜¯æƒé™é”™è¯¯</td>
</tr>
<tr>
<td></td>
<td><code v-pre>IsTimeout(err error) bool</code></td>
<td>æ˜¯å¦æ˜¯è¶…æ—¶é”™è¯¯</td>
</tr>
</tbody>
</table>
<p>åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token comment">// åˆ¤æ–­æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</span>
<span class="token keyword">func</span> <span class="token function">PathExists</span><span class="token punctuation">(</span>path <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Stat</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> os<span class="token punctuation">.</span><span class="token function">IsNotExist</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">,</span> err
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> path <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"main.go"</span><span class="token punctuation">,</span> <span class="token string">"go.mod"</span><span class="token punctuation">,</span> <span class="token string">"test.log"</span><span class="token punctuation">,</span> <span class="token string">"C:\\Windows"</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> exists<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">PathExists</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s exist: %t\n"</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> exists<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s exist: %t\n"</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token string">"unknown"</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>main.go exist: <span class="token boolean">true</span>
go.mod exist: <span class="token boolean">true</span>    
test.log exist: <span class="token boolean">false</span> 
C:<span class="token punctuation">\</span>Windows exist: <span class="token boolean">true</span>
</code></pre></div><h4 id="å†™å…¥æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å†™å…¥æ•°æ®" aria-hidden="true">#</a> å†™å…¥æ•°æ®</h4>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©ºå†…å®¹ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">"test.log"</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">,</span> <span class="token number">0777</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Open file error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥å†…å®¹ - å­—èŠ‚</span>
	byteLine <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"äººä¹‹åˆï¼Œæ€§æœ¬å–„ã€‚æ€§ç›¸è¿‘ï¼Œä¹ ç›¸è¿œã€‚"</span><span class="token punctuation">)</span>
	byteLine <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>byteLine<span class="token punctuation">,</span> <span class="token char">'\n'</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>byteLine<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Write error: %s"</span><span class="token punctuation">,</span> byteLine<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// å†™å…¥å†…å®¹ - å­—ç¬¦ä¸²</span>
	stringLine <span class="token operator">:=</span> <span class="token string">"è‹Ÿä¸æ•™ï¼Œæ€§ä¹ƒè¿ã€‚æ•™ä¹‹é“ï¼Œè´µä»¥ä¸“ã€‚"</span>
	stringLine <span class="token operator">=</span> stringLine <span class="token operator">+</span> <span class="token string">"\n"</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span>stringLine<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Write error: %s"</span><span class="token punctuation">,</span> stringLine<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// è·å–æ–‡ä»¶æŒ‡é’ˆä½ç½® (ä»å½“å‰ä½ç½®å¼€å§‹ï¼Œåç§»ä¸º0çš„ä½ç½®)</span>
	currentSeek<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekCurrent<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Get file current seek error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// ä½¿ç”¨æŒ‡é’ˆå†™å…¥ï¼ˆå†™å…¥çš„é•¿åº¦ä¼šå°†æŒ‡é’ˆåé¢çš„å†…å®¹è¦†ç›–ï¼‰</span>
	<span class="token comment">// è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨â€æ–°â€œæ›¿æ¢æ‰â€è´µä»¥ä¸“ã€‚â€œä¸­çš„â€è´µâ€œ,æ€è·¯å°±æ˜¯æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°â€è´µâ€œå­—ä¸Šï¼Œç„¶åæ›¿æ¢å³å¯</span>
	<span class="token comment">// åç§»é‡è®¡ç®—ï¼š1('\n') + 12("è´µæ–°ä¸“ã€‚"ï¼Œä¸€ä¸ªæ±‰å­—3ä¸ªå­—èŠ‚ï¼Œæ³¨æ„è¿™é‡Œçš„å¥å·æ˜¯ä¸­æ–‡çš„ï¼Œä¹Ÿè®¡ç®—åœ¨æ±‰å­—é‡Œé¢) = 13</span>
	seekRune <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"æ–°"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">WriteAt</span><span class="token punctuation">(</span>seekRune<span class="token punctuation">,</span> currentSeek<span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Write error: %s"</span><span class="token punctuation">,</span> byteLine<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="è¯»å–æ•°æ®" tabindex="-1"><a class="header-anchor" href="#è¯»å–æ•°æ®" aria-hidden="true">#</a> è¯»å–æ•°æ®</h4>
<p><strong>æŒ‰å­—èŠ‚ä»æ–‡ä»¶å¼€å§‹è¯»å–æ•°æ®</strong>
<code v-pre>Read(b []byte) (n int, err error)</code></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	fileName <span class="token operator">:=</span> <span class="token string">"test.log"</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸å­˜åœ¨: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// å¾ªç¯è¯»å–æ–‡ä»¶</span>
	buffer <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span>

		<span class="token comment">// å¤„ç†æ•°æ®</span>
		<span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>
            fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> buffer<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment">// æ³¨æ„è¿™é‡Œ[:n]</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// åˆ¤æ–­æ˜¯å¦å¯ä»¥è¯»å–ä¸‹ä¸€è¡Œ</span>
		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// æ–‡ä»¶è¯»å–å®Œæˆ</span>
		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// æ–‡ä»¶è¯»å–å¤±è´¥</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶è¯»å–å¤±è´¥: %s:%s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p><strong>æŒ‰å­—èŠ‚ä»æ–‡ä»¶ä»»æ„ä½ç½®è¯»å–æ•°æ®</strong></p>
<p><code v-pre>ReadAt(b []byte, off int64) (n int, err error)</code></p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">ReadAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	fileName <span class="token operator">:=</span> <span class="token string">"test.log"</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ–‡ä»¶ä¸å­˜åœ¨: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è·å–æ–‡ä»¶æŒ‡é’ˆ(æœ«å°¾)</span>
	seekEnd<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekEnd<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"File seek error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// ReadAtè¯»å–</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">ReadAt</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> seekEnd<span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// è¯»å–æ–‡ä»¶æœ«å°¾çš„4ä¸ªå­—èŠ‚ï¼Œæ¢è¡Œç¬¦1ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡1ä¸ªå­—èŠ‚</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"File readat error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">ReadAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="è¯»å–ä¸­æ–‡ä¹±ç é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#è¯»å–ä¸­æ–‡ä¹±ç é—®é¢˜" aria-hidden="true">#</a> è¯»å–ä¸­æ–‡ä¹±ç é—®é¢˜</h4>
<p>ä¸€ä¸ªä¸­æ–‡å 3ä¸ªå­—èŠ‚ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„ä½¿ç”¨<code v-pre>Read</code>æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶çš„è¯ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bufio"</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
	<span class="token string">"unicode/utf8"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç”Ÿæˆæ•°æ®</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">170</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"ä¸­"</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"å›½"</span><span class="token punctuation">)</span><span class="token operator">...</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥æ–‡ä»¶</span>
	err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> data<span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"å†™å…¥æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å†™å…¥æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadByte</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span>

		<span class="token comment">// æ˜¾ç¤ºæ•°æ®,æœ€åä¸€ä¸ªä¸­æ–‡æ˜¾ç¤ºä¹±ç </span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token comment">// æ£€æµ‹åˆ‡ç‰‡[]byteæ˜¯å¦åŒ…å«å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—ï¼ˆä¸èƒ½æœ‰ä¹±ç ï¼‰</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: %t\n"</span><span class="token punctuation">,</span> utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadAllByte</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	data<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadByRune</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
	data <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">rune</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		r<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//log.Printf("è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n", fileName, size)</span>
		data <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> r<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// æ˜¾ç¤ºæ•°æ®</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadByteBySeek</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	<span class="token keyword">var</span> bufsize <span class="token builtin">int64</span> <span class="token operator">=</span> <span class="token number">512</span>
	oldSize <span class="token operator">:=</span> bufsize
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token comment">// è¯»å–æ•°æ®</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> bufsize<span class="token punctuation">)</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// éå®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span>
		<span class="token keyword">if</span> <span class="token operator">!</span>utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// æŒ‡é’ˆå›é€€</span>
			<span class="token keyword">if</span> ret<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Seek</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token operator">*</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> io<span class="token punctuation">.</span>SeekCurrent<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">,</span> ret<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// bufå­—èŠ‚æ•°+1</span>
			bufsize<span class="token operator">++</span>

			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// å®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
		bufsize <span class="token operator">=</span> oldSize
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadByteNoSeek</span><span class="token punctuation">(</span>fileName <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// æ‰“å¼€æ–‡ä»¶</span>
	f<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	lastLeft <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// ä¸Šæ¬¡è¯»å–ç•™ä¸‹æ¥çš„ä¸å®Œæ•´çš„å­—èŠ‚åˆ‡ç‰‡</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token comment">// è¯»å–æ•°æ®</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> f<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
			log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s \n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// ä¸ä¸Šæ¬¡è¯»å–é—ç•™å­—èŠ‚åˆå¹¶</span>
		buf <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>lastLeft<span class="token punctuation">,</span> buf<span class="token operator">...</span><span class="token punctuation">)</span>
		n <span class="token operator">+=</span> <span class="token function">len</span><span class="token punctuation">(</span>lastLeft<span class="token punctuation">)</span>
		lastLeft <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// é‡æ–°åˆå§‹åŒ–</span>

		<span class="token comment">// æ£€æŸ¥åºåˆ—å®Œæ•´æ€§</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> utf8<span class="token punctuation">.</span><span class="token function">Valid</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
			lastByte <span class="token operator">:=</span> buf<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
			lastLeft <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span>lastByte<span class="token punctuation">}</span><span class="token punctuation">,</span> lastLeft<span class="token operator">...</span><span class="token punctuation">)</span>
			n<span class="token operator">--</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// å®Œæ•´çš„UTF8åºåˆ—å¤„ç†</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> n<span class="token punctuation">)</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: %s\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fileName <span class="token operator">:=</span> <span class="token string">"test.log"</span>

	<span class="token comment">// å†™æ•°æ®</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"------------------ å†™å…¥æ•°æ® ---------------------"</span><span class="token punctuation">)</span>
	<span class="token function">WriteFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

	<span class="token comment">// æŒ‰å­—èŠ‚è¯»æ•°æ®(ä¼šè¯»åˆ°ä¹±ç )</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n------------------ æŒ‰å­—èŠ‚è¯»æ•°æ®(ä¼šè¯»åˆ°ä¹±ç ) ---------------------"</span><span class="token punctuation">)</span>
	<span class="token function">ReadByte</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

	<span class="token comment">// è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­</span>
	<span class="token comment">// ç¼ºç‚¹ï¼šå†…å­˜å ç”¨è¿‡å¤§ï¼Œä¸é€‚ç”¨å¤§æ–‡ä»¶</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n------------------ è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­ ---------------------"</span><span class="token punctuation">)</span>
	<span class="token function">ReadAllByte</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

	<span class="token comment">// è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeè¯»å–æ–‡ä»¶</span>
	<span class="token comment">// ç¼ºç‚¹ï¼šä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦çš„è¯»ï¼Œæ•ˆç‡å¤ªä½</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n------------------ è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeæ–¹å¼è¯»å– ---------------------"</span><span class="token punctuation">)</span>
	<span class="token function">ReadByRune</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

	<span class="token comment">// è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»å–ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å°</span>
	<span class="token comment">// ç¼ºç‚¹ï¼šéœ€è¦é€šè¿‡SeekæŒ‡é’ˆæ“ä½œ</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n- è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»æ•°æ®ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å° -"</span><span class="token punctuation">)</span>
	<span class="token function">ReadByteBySeek</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>

	<span class="token comment">// è§£å†³æ–¹æ¡ˆ4ï¼šæŒ‰å­—èŠ‚è¯»å–ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—ï¼Œé‚£ä¹ˆå°†å­—èŠ‚åˆ‡ç‰‡åˆ†å‰²ï¼Œåªæ˜¯ç”¨å®Œæ•´çš„UTF8åºåˆ—ï¼Œä¹±ç éƒ¨åˆ†ä¸ä¸‹ä¸€æ¬¡è¯»å–è¿æ¥èµ·æ¥</span>
	<span class="token comment">// ç¼ºç‚¹ï¼šä»£ç æ¯”è¾ƒå¤æ‚</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"\n------- è§£å†³æ–¹æ¡ˆ4ï¼šå­—èŠ‚åˆ†å‰²ä¸é‡ç»„è¯»æ³•ï¼ˆä¸Readè¡¨ç°ä¸€è‡´ï¼‰ ----------"</span><span class="token punctuation">)</span>
	<span class="token function">ReadByteNoSeek</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code>------------------ å†™å…¥æ•°æ® ---------------------
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 å†™å…¥æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes

------------------ æŒ‰å­—èŠ‚è¯»æ•°æ®<span class="token punctuation">(</span>ä¼šè¯»åˆ°ä¹±ç <span class="token punctuation">)</span> ---------------------
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">512</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ï¿½ï¿½
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: <span class="token boolean">false</span>
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">1</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ï¿½
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ£€æµ‹å­—èŠ‚åˆ‡ç‰‡æ˜¯å¦æ˜¯å®Œæ•´ä¸”åˆæ³•çš„UTF-8ç¼–ç åºåˆ—: <span class="token boolean">false</span>

------------------ è§£å†³æ–¹æ¡ˆ1ï¼šä¸€æ¬¡æ€§å…¨éƒ¨è¯»å–åˆ°å†…å­˜ä¸­ ---------------------      
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½

------------------ è§£å†³æ–¹æ¡ˆ2ï¼šæŒ‰Runeæ–¹å¼è¯»å– ---------------------
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½

- è§£å†³æ–¹æ¡ˆ3ï¼šæŒ‰å­—èŠ‚è¯»æ•°æ®ï¼Œå¦‚æœä¸æ˜¯å®Œæ•´UTF8åºåˆ—åˆ™å›é€€æ–‡ä»¶æŒ‡é’ˆï¼ŒåŠ¨æ€å¾®è°ƒbufå¤§å° -
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">513</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­å›½

------- è§£å†³æ–¹æ¡ˆ4ï¼šå­—èŠ‚åˆ†å‰²ä¸é‡ç»„è¯»æ³•ï¼ˆä¸Readè¡¨ç°ä¸€è‡´ï¼‰ ----------
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">510</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­ä¸­
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 è¯»å–æ–‡ä»¶æˆåŠŸ: test.log: <span class="token number">3</span> bytes
<span class="token number">2022</span>/04/25 <span class="token number">15</span>:56:39 æ˜¾ç¤ºæ–‡ä»¶å†…å®¹: å›½
</code></pre></div><h4 id="è¯»å†™å¿«æ·å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#è¯»å†™å¿«æ·å‡½æ•°" aria-hidden="true">#</a> è¯»å†™å¿«æ·å‡½æ•°</h4>
<p><code v-pre>os.WriteFile</code>å’Œ<code v-pre>os.ReadFile</code>åº•å±‚è°ƒç”¨çš„æ˜¯<code v-pre>OpenFile</code>ï¼Œä¸€æ¬¡æ€§åŠ è½½æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œé€‚åˆè¯»å–å°æ–‡ä»¶ï¼Œå¤§æ–‡ä»¶æœ‰æ’‘çˆ†å†…å­˜çš„é£é™©</p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å†™å…¥æ–‡ä»¶</span>
	writeFileName <span class="token operator">:=</span> <span class="token string">"test.log"</span>
	err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span>writeFileName<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"Hello, è¿™é‡Œæ˜¯æµ‹è¯•æ—¥å¿—"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"å†™å…¥æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> writeFileName<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å†™å…¥æ–‡ä»¶æˆåŠŸ: %s\n"</span><span class="token punctuation">,</span> writeFileName<span class="token punctuation">)</span>

	<span class="token comment">// å‡½æ•°æºç å¦‚ä¸‹ï¼š</span>
	<span class="token comment">//func WriteFile(name string, data []byte, perm FileMode) error {</span>
	<span class="token comment">//	f, err := OpenFile(name, O_WRONLY|O_CREATE|O_TRUNC, perm)</span>
	<span class="token comment">//	if err != nil {</span>
	<span class="token comment">//	return err</span>
	<span class="token comment">//}</span>
	<span class="token comment">//	_, err = f.Write(data)</span>
	<span class="token comment">//	if err1 := f.Close(); err1 != nil &amp;&amp; err == nil {</span>
	<span class="token comment">//	err = err1</span>
	<span class="token comment">//}</span>
	<span class="token comment">//	return err</span>
	<span class="token comment">//}</span>
	<span class="token comment">// å¯ä»¥çœ‹åˆ°ï¼Œ(1)è¯»å†™æ¨¡å¼æ‰“å¼€æ–‡ä»¶ (2)æ–‡ä»¶è‹¥ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º (3)æ–‡ä»¶è‹¥å­˜åœ¨åˆ™ä¼šæˆªæ–­(æ¸…ç©ºå†…å®¹)ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°å‰éœ€è¦å°å¿ƒä¸€äº›</span>

	<span class="token comment">// è¯»å–æ–‡ä»¶</span>
	readFileName <span class="token operator">:=</span> <span class="token string">"D:\\iso\\CentOS-7-x86_64-DVD-1708.iso"</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹è¯»å–æ–‡ä»¶: %s\n"</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">)</span>
	buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>readFileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶å¤±è´¥: %s: %s\n"</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"è¯»å–æ–‡ä»¶æˆåŠŸ: %s: %d bytes\n"</span><span class="token punctuation">,</span> readFileName<span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// æŸ¥çœ‹æºç å¯ä»¥çœ‹åˆ°ï¼Œ</span>
	<span class="token comment">//		(1)ä½¿ç”¨Openæ‰“å¼€æ–‡ä»¶</span>
	<span class="token comment">//		(2)å½“æ–‡ä»¶å¤§å°(int64ç±»å‹)èƒ½æ­£å¸¸è½¬ä¸ºintç±»å‹æ—¶ï¼Œbufå°±å–è¿™ä¸ªå€¼ï¼›å¦åˆ™bufè®¾ç½®ä¸º512</span>
	<span class="token comment">//		   intæœ€å¤§å€¼è½¬ä¸ºGBæ˜¯å¤šå°‘å‘¢ï¼Ÿ math.MaxInt / 1024 / 1024 / 1024 = 8589934591</span>
	<span class="token comment">//		   å½“æ–‡ä»¶å°äº8589934591GBæ—¶ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­</span>
	<span class="token comment">// 		   æ‰€ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±ç­‰åŒäºå°†æ–‡ä»¶ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ï¼Œè¯·ç¡®ä¿å†…å­˜å……è¶³..</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/24 <span class="token number">14</span>:30:58 å†™å…¥æ–‡ä»¶æˆåŠŸ: test.log
<span class="token number">2022</span>/04/24 <span class="token number">14</span>:30:58 å¼€å§‹è¯»å–æ–‡ä»¶: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso
<span class="token number">2022</span>/04/24 <span class="token number">14</span>:31:00 è¯»å–æ–‡ä»¶æˆåŠŸ: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso: <span class="token number">4521459712</span> bytes

<span class="token comment"># å¯ä»¥çœ‹åˆ°ï¼Œ4ä¸ªå¤šGçš„æ–‡ä»¶2ç§’é’Ÿè¯»å®Œäº†</span>
</code></pre></div><h3 id="ioåŒ…-ioåŸºæœ¬æ¥å£å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#ioåŒ…-ioåŸºæœ¬æ¥å£å®šä¹‰" aria-hidden="true">#</a> <code v-pre>io</code>åŒ…ï¼šIOåŸºæœ¬æ¥å£å®šä¹‰</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/io" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/io<ExternalLinkIcon/></a></p>
<h4 id="readeråŸºæœ¬æ¥å£" tabindex="-1"><a class="header-anchor" href="#readeråŸºæœ¬æ¥å£" aria-hidden="true">#</a> ReaderåŸºæœ¬æ¥å£</h4>
<p><strong>Readerå®šä¹‰</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// io.Reader</span>
<span class="token keyword">type</span> Reader <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Read</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote>
<p>æ ¹æ®æ¥å£å®šä¹‰å¾—åˆ°çš„ä¿¡æ¯ï¼šè¯»å–æ•°æ®å¹¶å¡«å……åˆ°<code v-pre>p</code>ä¸­ï¼Œæœ€å¤šå¡«å……<code v-pre>len(p)</code>ä¸ªå­—èŠ‚ï¼›è¿”å›å®é™…è¯»å–åˆ°çš„å­—èŠ‚æ•°<code v-pre>n</code>å’Œ<code v-pre>error</code></p>
</blockquote>
<p><strong>Readerè¯»å–è§„åˆ™</strong></p>
<p>ï¼ˆ1ï¼‰è¯»å–æˆåŠŸï¼Œæ•°æ®å…¨éƒ¨å¡«å……è‡³<code v-pre>p</code>ï¼Œæ­¤æ—¶æœ‰<code v-pre> n == len(p)</code>ã€<code v-pre>err == nil</code></p>
<p>ï¼ˆ2ï¼‰è¯»å–å¤±è´¥ï¼Œæ­¤æ—¶æœ‰<code v-pre>err != nil</code>ï¼Œ<code v-pre>err</code>ä»£è¡¨å…·ä½“çš„é”™è¯¯</p>
<p>ï¼ˆ3ï¼‰è¯»åˆ°<code v-pre>EOF</code>ï¼Œæ­¤æ—¶æ”¯æŒä»¥ä¸‹ä¸¤ç§å¤„ç†æƒ…å†µï¼š</p>
<p>â€‹		â‘  è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°nï¼Œå°†<code v-pre>err</code>è®¾ç½®ä¸º<code v-pre>EOF</code>ï¼ˆæ¨èï¼‰</p>
<p>â€‹		â‘¡ è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°nï¼Œå°†<code v-pre>err</code>è®¾ç½®ä¸º<code v-pre>nil</code>ï¼Œå¯¹äºè¿™ç§æƒ…å†µï¼Œåœ¨ä¸‹ä¸€æ¬¡è¯»å–æ—¶éœ€è¦è¿”å›<code v-pre>n == 0, err == nil</code>ï¼ˆä¸æ¨èï¼‰</p>
<p>ï¼ˆ4ï¼‰<span style="color: blue; font-weight: bold;">å…è®¸æ•°æ®æ²¡å…¨éƒ¨å‡†å¤‡å¥½æ—¶ï¼Œè¿”å›éƒ¨åˆ†æ•°æ®ï¼Œæ­¤æ—¶æœ‰<code v-pre>p</code>å°šæœªå¡«å……æ»¡ï¼ŒåŒæ—¶<code v-pre>err == nil</code></span>ï¼ˆè¿™ç§æƒ…å†µè¦å°å¿ƒï¼Œå¯èƒ½å†™ä»£ç ä¼šå‡ºç°ä¸€äº›å‘ï¼‰</p>
<p><strong>Readeræ¥å£çš„å‡ ç§å®ç°</strong></p>
<table>
<thead>
<tr>
<th>ç»“æ„ä½“/æ¥å£</th>
<th>å…·ä½“å®ç°</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä»æ–‡ä»¶ä¸­è¯»ï¼š<br /><code v-pre>os.File</code>ç»“æ„ä½“</td>
<td><code v-pre>os.OpenFile()</code></td>
<td>æ–‡ä»¶è¯»å–</td>
</tr>
<tr>
<td></td>
<td><code v-pre>os.Stdin</code>/<code v-pre>os.Stdout</code>/<code v-pre>os.Stderr</code></td>
<td>ä¸»è¦ä¸ºæ ‡å‡†è¾“å…¥è¯»å–<code v-pre>Stdin</code></td>
</tr>
<tr>
<td>ä»å­—ç¬¦ä¸²ä¸­è¯»ï¼š<br /><code v-pre>strings.Reader</code>ç»“æ„ä½“</td>
<td><code v-pre>strings.NewReader()</code></td>
<td><code v-pre>Reader</code>æ¥å£ï¼šæœ¬è´¨æ˜¯è°ƒç”¨å†…ç½®å‡½æ•°<code v-pre>copy</code>ï¼Œæ— æ³•è¯»å–ä¸­æ–‡<br /><code v-pre>RuneReader</code>æ¥å£ï¼šæœ¬è´¨æ˜¯æŒ‰å­—èŠ‚éå†ï¼Œå¦‚æœå­—èŠ‚åœ¨ASCIIç èŒƒå›´å†…<br />åˆ™ä½¿ç”¨<code v-pre>rune</code>åŒ…è£…ä¸€ä¸‹è¿”å›ï¼Œå¦åˆ™è°ƒç”¨<code v-pre>utf8.DecodeRuneInString</code>è§£ç å‡ºç¬¬ä¸€ä¸ª<code v-pre>Rune</code>å¹¶è¿”å›</td>
</tr>
<tr>
<td>ä»å­—èŠ‚ä¸­è¯»ï¼š<br /><code v-pre>bytes.Reader</code>ç»“æ„ä½“</td>
<td><code v-pre>bytes.NewReader()</code></td>
<td>ç±»ä¼¼äº<code v-pre>strings.Reader</code>ç»“æ„ä½“</td>
</tr>
<tr>
<td>ä»ç¼“å†²ä¸­è¯»ï¼š<br /><code v-pre>bytes.Buffer</code>ç»“æ„ä½“<br /><code v-pre>bufio.Reader</code>ç»“æ„ä½“</td>
<td>è¯¦ç»†ä»‹ç»è§åé¢ç« èŠ‚</td>
<td>è¯¦ç»†ä»‹ç»è§åé¢ç« èŠ‚</td>
</tr>
<tr>
<td>ä»ç½‘ç»œè¿æ¥ä¸­è¯»ï¼š<br /><code v-pre>net.Conn</code>æ¥å£</td>
<td>ä»¥åè¡¥å……</td>
<td>ä»¥åè¡¥å……</td>
</tr>
</tbody>
</table>
<p>ç¤ºä¾‹ä»£ç </p>
<details class="custom-container details"><summary>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä»£ç </summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"fmt"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
	<span class="token string">"strings"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">ReadFromStdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		<span class="token comment">// è¯»å–è¾“å…¥</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s è¯·è¾“å…¥åå­—ï¼š"</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">"2006/01/02 15:04:05"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span>Stdin<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Fatalln</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// è§£æè¾“å…¥</span>
		name <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token comment">// åˆ¤æ–­è¾“å…¥æ˜¯å¦åˆæ³•</span>
		<span class="token keyword">if</span> <span class="token function">len</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"æ‚¨çš„åå­—ä¸º: %s"</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	reader <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">"hello world!"</span><span class="token punctuation">)</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
		<span class="token keyword">if</span> n <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">continue</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
			<span class="token keyword">break</span>
		<span class="token punctuation">}</span>
		log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"read error"</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">ReadRuneFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	reader <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">"aä½ å¥½"</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
		r<span class="token punctuation">,</span> <span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
				<span class="token keyword">break</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> <span class="token function">string</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">ReadFromStdin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">ReadFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">ReadRuneFromStringReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:13 è¯·è¾“å…¥åå­—ï¼šæ„¤æ€’çš„è¥¿ç“œ
<span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 æ‚¨çš„åå­—ä¸º: æ„¤æ€’çš„è¥¿ç“œ
<span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 hello world<span class="token operator">!</span>
<span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 a
<span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 ä½ 
<span class="token number">2022</span>/04/24 <span class="token number">16</span>:52:32 å¥½
</code></pre></div><h4 id="readerå…¶ä»–æ¥å£" tabindex="-1"><a class="header-anchor" href="#readerå…¶ä»–æ¥å£" aria-hidden="true">#</a> Readerå…¶ä»–æ¥å£</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token comment">// è¯»å–ä¸€æ¬¡è¿”å›ä¸€ä¸ªå­—èŠ‚</span>
<span class="token keyword">type</span> ByteReader <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">ReadByte</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è¯»å–ä¸€æ¬¡è¿”å›ä¸€ä¸ªRune</span>
<span class="token keyword">type</span> RuneReader <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">ReadRune</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">,</span> size <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¯ä»¥ä»æŒ‡å®šä½ç½®(å­—èŠ‚)å¤„è¯»å–</span>
<span class="token keyword">type</span> ReaderAt <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">ReadAt</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> off <span class="token builtin">int64</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="readerå°è£…å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#readerå°è£…å‡½æ•°" aria-hidden="true">#</a> Readerå°è£…å‡½æ•°</h4>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code v-pre>func ReadAll(r Reader) ([]byte, error)</code></td>
<td>ä»<code v-pre>Reader</code>ä¸­è¯»å®Œæ‰€æœ‰æ•°æ®å†è¿”å›ï¼Œå½“æ–‡ä»¶è¿‡å¤§æ—¶æœ‰æ’‘çˆ†å†…å­˜çš„é£é™©</td>
</tr>
<tr>
<td><code v-pre>func ReadFull(r Reader, buf []byte) (n int, err error)</code></td>
<td>è¯»æ»¡ç¼“å†²åŒºå†è¿”å›ï¼Œæœªè¯»æ»¡ç¼“å†²åŒºï¼ˆå³ä½¿è¯»åˆ°<code v-pre>EOF</code>ï¼‰ä¹Ÿä¼šè¿”å›é”™è¯¯</td>
</tr>
<tr>
<td><code v-pre>func ReadAtLeast(r Reader, buf []byte, min int) (n int, err error)</code></td>
<td>æœ€å°‘è¦è¯»<code v-pre>min</code>ä¸ªå­—èŠ‚ï¼Œå³ä½¿è¯»åˆ°<code v-pre>EOF</code>ä¹Ÿä¼šè¿”å›é”™è¯¯</td>
</tr>
<tr>
<td><code v-pre>func LimitReader(r Reader, n int64) Reader</code></td>
<td>è¿”å›ä¸€ä¸ªæ–°<code v-pre>Reader</code>ï¼Œè¯¥<code v-pre>Reader</code>æœ€å¤šåªèƒ½è¯»å–<code v-pre>n</code>ä¸ªå­—èŠ‚ï¼ˆåç§»ä¸º0ï¼‰</td>
</tr>
<tr>
<td><code v-pre>func NewSectionReader(r ReaderAt, off int64, n int64) *SectionReader</code></td>
<td>è¿”å›ä¸€ä¸ªæ–°<code v-pre>Reader</code>ï¼Œè¯¥<code v-pre>Reader</code>æœ€å¤šåªèƒ½è¯»å–<code v-pre>n</code>ä¸ªå­—èŠ‚ï¼ˆåç§»ä¸º<code v-pre>off</code>ï¼‰</td>
</tr>
</tbody>
</table>
<h4 id="writerå’Œcloseræ¥å£" tabindex="-1"><a class="header-anchor" href="#writerå’Œcloseræ¥å£" aria-hidden="true">#</a> Writerå’ŒCloseræ¥å£</h4>
<p><strong>æ¥å£å®šä¹‰</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">type</span> Writer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Write</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Closer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="readerå’Œwriterå¤åˆå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#readerå’Œwriterå¤åˆå‡½æ•°" aria-hidden="true">#</a> Readerå’ŒWriterå¤åˆå‡½æ•°</h4>
<p><strong>io.Copyç³»åˆ—</strong></p>
<p>ï¼ˆ1ï¼‰<code v-pre>func Copy(dst Writer, src Reader) (written int64, err error)</code></p>
<p>ä¸»è¦åŠŸèƒ½ä¸ºï¼šä»<code v-pre>Reader</code>ä¸­è¯»å–ï¼Œå¹¶å†™å…¥åˆ°<code v-pre>Writer</code>ä¸­ï¼Œè¿”å›å†™å…¥çš„å­—èŠ‚æ•°å’Œé”™è¯¯</p>
<blockquote>
<p>å®ç°çš„ç»†èŠ‚ï¼š</p>
<ol>
<li>å¦‚æœ<code v-pre>src</code>å®ç°äº†<code v-pre>WriteTo</code>æ¥å£ï¼Œé‚£ä¹ˆå°±è°ƒç”¨<code v-pre>src.WriteTo(dst)</code>æ–¹æ³•</li>
<li>å¦‚æœ<code v-pre>dst</code>å®ç°äº†<code v-pre>ReaderFrom</code>æ¥å£ï¼Œé‚£ä¹ˆå°±è°ƒç”¨<code v-pre>dst.ReadFrom(src)</code>æ–¹æ³•</li>
<li>å¦‚æœä»¥ä¸Šä¸¤ä¸ªæ¥å£éƒ½æ²¡å®ç°ï¼Œé‚£ä¹ˆå°±ä»<code v-pre>src</code>è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºå†å†™å…¥<code v-pre>Writer</code></li>
<li>å¦‚æœ<code v-pre>src</code>æ˜¯<code v-pre>*LimitedReader</code>ç»“æ„ä½“ï¼Œé‚£ä¹ˆ<code v-pre>buffer</code>å¤§å°è®¾å®šä¸ºè§„å®šçš„å¤§å°ï¼Œå¦åˆ™è®¾ç½®ä¸º<code v-pre>32KB</code></li>
</ol>
</blockquote>
<p>ï¼ˆ2ï¼‰<code v-pre>func CopyBuffer(dst Writer, src Reader, buf []byte) (written int64, err error)</code></p>
<p>ä¸<code v-pre>io.Copy</code>ä¸åŒçš„åœ°æ–¹åœ¨äºå¯ä»¥è‡ªå®šä¹‰<code v-pre>buffer</code>å¤§å°çš„<code v-pre>Copy</code>ï¼Œä½†æ˜¯è¯·æ³¨æ„åªæœ‰åœ¨<code v-pre>src.WriteTo</code>å’Œ<code v-pre>dst.ReadFrom</code>éƒ½æ²¡æœ‰å®ç°çš„æƒ…å†µä¸‹ç”Ÿæ•ˆ</p>
<p>ï¼ˆ3ï¼‰<code v-pre>func CopyN(dst Writer, src Reader, n int64) (written int64, err error)</code></p>
<p>åªæ‹·è´Nä¸ªå­—èŠ‚ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡<code v-pre>LimitReader</code>æ¥é™åˆ¶<code v-pre>Reader</code>æ‰€èƒ½è¯»å–çš„å­—èŠ‚æ•°</p>
<p><strong>io.Pipe</strong></p>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Pipe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>PipeReader<span class="token punctuation">,</span> <span class="token operator">*</span>PipeWriter<span class="token punctuation">)</span>
</code></pre></div><ul>
<li>
<p>ä»wä¸­å†™å…¥ï¼Œä»rä¸­è¯»å‡º</p>
</li>
<li>
<p>çº¿ç¨‹å®‰å…¨</p>
</li>
<li>
<p>æœ¬è´¨ä¸Šæ˜¯æ— ç¼“å†²çš„<code v-pre>channel</code>ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨åŒä¸€ä¸ªåç¨‹ä¸­è¯»å’Œå†™</p>
</li>
</ul>
<h3 id="bufioåŒ…-å¸¦ç¼“å†²çš„ioåŒ…" tabindex="-1"><a class="header-anchor" href="#bufioåŒ…-å¸¦ç¼“å†²çš„ioåŒ…" aria-hidden="true">#</a> bufioåŒ…ï¼šå¸¦ç¼“å†²çš„IOåŒ…</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/bufio" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/bufio<ExternalLinkIcon/></a></p>
<h4 id="ç¼“å†²åŸç†" tabindex="-1"><a class="header-anchor" href="#ç¼“å†²åŸç†" aria-hidden="true">#</a> ç¼“å†²åŸç†</h4>
<p><img src="https://tuchuang-1257805459.cos.ap-shanghai.myqcloud.com/bufio.png" alt="bufio"></p>
<p>æœ¬è´¨ä¸Šæ¥è®²ï¼Œå°±æ˜¯é€šè¿‡å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¥æé«˜æ•ˆç‡ï¼Œä»˜å‡ºçš„ä»£ä»·å°±æ˜¯å†…å­˜å ç”¨å˜å¤š</p>
<h4 id="æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°" aria-hidden="true">#</a> æ„é€ å‡½æ•°</h4>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">NewReader</span><span class="token punctuation">(</span>rd io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token operator">*</span>Reader <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">NewReaderSize</span><span class="token punctuation">(</span>rd<span class="token punctuation">,</span> defaultBufSize<span class="token punctuation">)</span>	
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewWriter</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">)</span> <span class="token operator">*</span>Writer <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">NewWriterSize</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> defaultBufSize<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// é»˜è®¤çš„ç¼“å†²åŒºå¤§å°defaultBufSize = 4096</span>
</code></pre></div><h4 id="ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç¤ºä¾‹" aria-hidden="true">#</a> ä½¿ç”¨ç¤ºä¾‹</h4>
<details class="custom-container details"><summary>Readerä½¿ç”¨ç¤ºä¾‹</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bufio"</span>
	<span class="token string">"log"</span>
	<span class="token string">"strings"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// ç”ŸæˆåŸå§‹Reader</span>
	<span class="token keyword">var</span> str <span class="token builtin">string</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">170</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		str <span class="token operator">+=</span> <span class="token string">"ä¸­"</span>
	<span class="token punctuation">}</span>
	r <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"åŸå§‹Readerå¯è¯»å–æ•°æ®å¤§å°: %d\n"</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// å¸¦ç¼“å†²çš„Reader</span>
	<span class="token comment">//reader := bufio.NewReader(f)	// ä½¿ç”¨é»˜è®¤ç¼“å†²å¤§å°</span>
	reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReaderSize</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span> <span class="token comment">// è‡ªå®šä¹‰ç¼“å†²å¤§å°</span>

	<span class="token comment">// è¯»å–æ•°æ®</span>
	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Read error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Read %d bytes\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>

	<span class="token comment">// æŸ¥çœ‹ç¼“å†²åŒºä¿¡æ¯</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç¼“å†²åŒºå¤§å°: %d bytes\n"</span><span class="token punctuation">,</span> reader<span class="token punctuation">.</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç¼“å†²åŒºå‰©ä½™çš„å¯è¯»å­—èŠ‚æ•°: %d bytes\n"</span><span class="token punctuation">,</span> reader<span class="token punctuation">.</span><span class="token function">Buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<details class="custom-container details"><summary>Writerä½¿ç”¨ç¤ºä¾‹</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bufio"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å¸¦ç¼“å†²çš„Writer</span>
	<span class="token comment">//writer := bufio.NewWriter(os.Stdout)</span>
	writer <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriterSize</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>

	<span class="token comment">// å†™å…¥æ•°æ®ï¼Œæœ¬æ¬¡æ€»å…±å†™å…¥13ä¸ªå­—èŠ‚æ•°æ®</span>
	<span class="token comment">// è‹¥ç¼“å†²åŒºå¤§äºç­‰äº13åˆ™å†™å…¥åˆ°ç¼“å†²åŒºï¼Œå±å¹•ä¸Šä¹Ÿä¸ä¼šè¾“å‡ºä»»ä½•ä¿¡æ¯ï¼Œå› ä¸ºç¼“å†²åŒºè¿˜å¹¶æ²¡æœ‰å‘çœŸæ­£çš„io.Writerä¸­å†™å…¥</span>
	<span class="token comment">// è‹¥ç¼“å†²åŒºå°äº13åˆ™ä¸å†™ç¼“å†²åŒºç›´æ¥å†™åˆ°åŸå§‹çš„io.Writerä¸­å»</span>
	n<span class="token punctuation">,</span> err <span class="token operator">:=</span> writer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token string">"hello world!\n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"Write error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Write ok: %d bytes\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>

	<span class="token comment">// ç¼“å†²åŒºä¿¡æ¯</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"ç¼“å†²åŒºå¤§å°: %d\n"</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">//_ = writer.Flush()   // å°†ç¼“å†²åŒºæ•°æ®å†™å…¥åˆ°io.Writerä¸­</span>
	<span class="token comment">//writer.Reset(writer) // æ¸…ç©ºç¼“å†²åŒº, æœªå†™å…¥çš„åˆ™ä¸¢å¼ƒ</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç¼“å†²åŒºå·²å†™å…¥çš„å­—èŠ‚æ•°: %d\n"</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Buffered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"å½“å‰ç¼“å†²åŒºæœªä½¿ç”¨çš„å­—èŠ‚æ•°: %d\n"</span><span class="token punctuation">,</span> writer<span class="token punctuation">.</span><span class="token function">Available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">//b := writer.AvailableBuffer() // è¿”å›æœªä½¿ç”¨å­—èŠ‚ç»„æˆçš„åˆ‡ç‰‡, ç­‰åŒäºb := make([]byte, writer.Available())</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<h4 id="è¯»å†™æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#è¯»å†™æµ‹è¯•" aria-hidden="true">#</a> è¯»å†™æµ‹è¯•</h4>
<p><strong>å†™æµ‹è¯•</strong></p>
<details class="custom-container details"><summary>å†™ç¼“å†²æ€§èƒ½æµ‹è¯•</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bufio"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">WriteBufTest</span><span class="token punctuation">(</span>srcFileName<span class="token punctuation">,</span> dstFileName <span class="token builtin">string</span><span class="token punctuation">,</span> buffer <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å®šä¹‰å˜é‡</span>
	<span class="token keyword">var</span> <span class="token punctuation">(</span>
		total <span class="token builtin">int64</span>
		err   <span class="token builtin">error</span>
	<span class="token punctuation">)</span>
	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ‰“å¼€srcæ–‡ä»¶</span>
	reader<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>srcFileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s: %s\n"</span><span class="token punctuation">,</span> srcFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> reader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ‰“å¼€dstæ–‡ä»¶</span>
	writer<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span>dstFileName<span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_RDWR<span class="token operator">|</span>os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_TRUNC<span class="token punctuation">,</span> os<span class="token punctuation">.</span>ModePerm<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s: %s\n"</span><span class="token punctuation">,</span> dstFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> writer<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ˜¯å¦ä½¿ç”¨buffer</span>
	<span class="token keyword">if</span> buffer <span class="token punctuation">{</span>
		<span class="token comment">// ç”Ÿæˆbufferå¹¶å†™å…¥</span>
		w <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriterSize</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token operator">*</span><span class="token number">32</span><span class="token punctuation">)</span>

		<span class="token comment">// ä½¿ç”¨io.Copyå†™å…¥</span>
		<span class="token comment">//total, err = io.Copy(w, reader)</span>

		<span class="token comment">// æ‰‹åŠ¨è¯»å–å†™å…¥</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
					<span class="token keyword">break</span>
				<span class="token punctuation">}</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"read error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>

			<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"write error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			total <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// ä½¿ç”¨io.Copyå†™å…¥</span>
		<span class="token comment">//total, err = io.Copy(writer, reader)</span>

		<span class="token comment">// æ‰‹åŠ¨è¯»å–å†™å…¥</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
					<span class="token keyword">break</span>
				<span class="token punctuation">}</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"read error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">=</span> writer<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"write error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			total <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‹·è´æ–‡ä»¶å¤±è´¥: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	delta <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"It takes %d seconds to copy %d bytes for %s\n"</span><span class="token punctuation">,</span> delta<span class="token punctuation">,</span> total<span class="token punctuation">,</span> dstFileName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">WriteBufTest</span><span class="token punctuation">(</span><span class="token string">"D:\\iso\\CentOS-7-x86_64-DVD-1708.iso"</span><span class="token punctuation">,</span> <span class="token string">"D:\\iso\\write_without_buffer.iso"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">WriteBufTest</span><span class="token punctuation">(</span><span class="token string">"D:\\iso\\CentOS-7-x86_64-DVD-1708.iso"</span><span class="token punctuation">,</span> <span class="token string">"D:\\iso\\write_with_buffer.iso"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/27 <span class="token number">12</span>:56:39 It takes <span class="token number">23</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>write_with_buffer.iso
<span class="token number">2022</span>/04/27 <span class="token number">12</span>:56:50 It takes <span class="token number">34</span> seconds to copy <span class="token number">4521459712</span> bytes <span class="token keyword">for</span> D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>write_without_buffer.iso
</code></pre></div><blockquote>
<p>ğŸ’¡ è¯´æ˜ï¼š</p>
<p>ä»£ç ä¸­ç»™å‡ºäº†2ç§è¯»å†™æ–¹å¼ï¼Œ<code v-pre>Read</code>/<code v-pre>Write</code>è¯»å†™æ–¹å¼ å’Œ <code v-pre>io.Copy</code>è¯»å†™æ–¹å¼</p>
<p>ä»è¾“å‡ºç»“æœæ¥çœ‹</p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨<code v-pre>Read</code>/<code v-pre>Write</code>è¯»å†™æ–¹å¼æ€§èƒ½æœ‰æ˜æ˜¾æå‡ï¼ˆ1.5å€å·¦å³ï¼‰ï¼Œå†™ç¼“å­˜èµ·åˆ°äº†å¾ˆå¤§çš„ä½œç”¨</p>
<p>ï¼ˆ2ï¼‰ä½†å¦‚æœä½¿ç”¨<code v-pre>io.Copy</code>æ–¹å¼è¯»å†™æ–‡ä»¶ï¼Œä¼šä½¿ç”¨<code v-pre>dst.ReadFrom(src)</code>æ–¹å¼è¯»å†™ï¼Œå¯¹æˆ‘ä»¬è¿™æ¬¡æµ‹è¯•æ¥è¯´å¹¶ä¸å‡†ï¼Œç”¨ä¸ç”¨<code v-pre>bufio</code>ï¼Œä¸¤è€…èŠ±è´¹çš„æ—¶é—´å‡ ä¹ä¸€è‡´</p>
</blockquote>
<p><strong>è¯»æµ‹è¯•</strong></p>
<details class="custom-container details"><summary>è¯»ç¼“å†²æ€§èƒ½æµ‹è¯•</summary>
<div class="language-go ext-go"><pre v-pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">"bufio"</span>
	<span class="token string">"io"</span>
	<span class="token string">"log"</span>
	<span class="token string">"os"</span>
	<span class="token string">"sync"</span>
	<span class="token string">"time"</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">ReadBufTest</span><span class="token punctuation">(</span>srcFileName <span class="token builtin">string</span><span class="token punctuation">,</span> buffer <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// å®šä¹‰å˜é‡</span>
	<span class="token keyword">var</span> <span class="token punctuation">(</span>
		total <span class="token builtin">int64</span>
		err   <span class="token builtin">error</span>
	<span class="token punctuation">)</span>
	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ‰“å¼€srcæ–‡ä»¶</span>
	reader<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>srcFileName<span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: %s: %s\n"</span><span class="token punctuation">,</span> srcFileName<span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">defer</span> reader<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// æ˜¯å¦ä½¿ç”¨buffer</span>
	<span class="token keyword">if</span> buffer <span class="token punctuation">{</span>
		<span class="token comment">// ç”Ÿæˆbufferå¹¶å†™å…¥</span>
		reader <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReaderSize</span><span class="token punctuation">(</span>reader<span class="token punctuation">,</span> <span class="token number">1024</span><span class="token operator">*</span><span class="token number">32</span><span class="token punctuation">)</span>

		<span class="token comment">// æ‰‹åŠ¨è¯»å–</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
					<span class="token keyword">break</span>
				<span class="token punctuation">}</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"read error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			total <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// æ‰‹åŠ¨è¯»å–</span>
		buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span> <span class="token punctuation">{</span>
			n<span class="token punctuation">,</span> err <span class="token operator">:=</span> reader<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>
			<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>
					<span class="token keyword">break</span>
				<span class="token punctuation">}</span>
				log<span class="token punctuation">.</span><span class="token function">Fatalf</span><span class="token punctuation">(</span><span class="token string">"read error: %s\n"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			total <span class="token operator">+=</span> <span class="token function">int64</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	delta <span class="token operator">:=</span> <span class="token function">float64</span><span class="token punctuation">(</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixMilli</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span>
	log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"Read %d bytes in %.2f second: %s\n"</span><span class="token punctuation">,</span> total<span class="token punctuation">,</span> delta<span class="token punctuation">,</span> srcFileName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
	wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">ReadBufTest</span><span class="token punctuation">(</span><span class="token string">"D:\\iso\\CentOS-7-x86_64-DVD-1708.iso"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">ReadBufTest</span><span class="token punctuation">(</span><span class="token string">"D:\\iso\\CentOS-7-x86_64-DVD-1708.iso"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
		wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></details>
<p>è¾“å‡ºç»“æœ</p>
<div class="language-bash ext-sh"><pre v-pre class="language-bash"><code><span class="token number">2022</span>/04/27 <span class="token number">13</span>:20:28 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">1.15</span> second: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso
<span class="token number">2022</span>/04/27 <span class="token number">13</span>:20:34 Read <span class="token number">4521459712</span> bytes <span class="token keyword">in</span> <span class="token number">7.15</span> second: D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>CentOS-7-x86_64-DVD-1708.iso
</code></pre></div><blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¯»çš„æ€§èƒ½æå‡æ˜¯å·¨å¤§çš„ï¼Œ6å€å·¦å³ï¼Œå¦‚æœèˆå¾—ç”¨å†…å­˜ï¼Œæ€§èƒ½è¿˜å¯ä»¥ç»§ç»­æå‡</p>
</blockquote>
<h3 id="ioutilsåŒ…-å·²è¢«os-ioåŒ…ä»£æ›¿" tabindex="-1"><a class="header-anchor" href="#ioutilsåŒ…-å·²è¢«os-ioåŒ…ä»£æ›¿" aria-hidden="true">#</a> ioutilsåŒ…ï¼šå·²è¢«os/ioåŒ…ä»£æ›¿</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pkg.go.dev/io/ioutil" target="_blank" rel="noopener noreferrer">https://pkg.go.dev/io/ioutil<ExternalLinkIcon/></a></p>
<p>ä»Go 1.16å¼€å§‹ï¼ŒåŒæ ·çš„åŠŸèƒ½ç°åœ¨ç”±åŒ…<code v-pre>io</code>åŒ…æˆ–<code v-pre>os</code>åŒ…æä¾›ï¼Œåœ¨æ–°ä»£ç ä¸­åº”è¯¥ä¼˜å…ˆä½¿ç”¨è¿™äº›å®ç°ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç‰¹å®šåŠŸèƒ½æ–‡æ¡£ã€‚</p>
</div></template>
